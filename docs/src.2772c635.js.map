{"version":3,"sources":["js/guitarstring.js","js/note.js","js/vextabscribe.js","js/app.js","../node_modules/process/browser.js","../node_modules/path-browserify/index.js","js/aubio.js","js/tuner.js","../src/tools/tools.ts","../node_modules/tslib/tslib.es6.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/clone.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/index.js","../node_modules/d3-selection/src/select.js","../node_modules/lower-case/dist.es2015/index.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/join.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/no-case/dist.es2015/index.js","../node_modules/dot-case/node_modules/tslib/tslib.es6.js","../node_modules/dot-case/dist.es2015/index.js","../node_modules/param-case/node_modules/tslib/tslib.es6.js","../src/fretboard/utils.ts","../node_modules/param-case/dist.es2015/index.js","../src/constants.ts","../node_modules/@tonaljs/core/dist/index.es.js","../node_modules/@tonaljs/note/dist/index.es.js","../node_modules/@tonaljs/interval/dist/index.es.js","../node_modules/@tonaljs/collection/dist/index.es.js","../node_modules/@tonaljs/pcset/dist/index.es.js","../node_modules/@tonaljs/chord-type/dist/index.es.js","../node_modules/@tonaljs/scale-type/dist/index.es.js","../node_modules/@tonaljs/scale/dist/index.es.js","../node_modules/@tonaljs/mode/dist/index.es.js","../src/fretboardSystem/systems/systems.ts","../src/fretboardSystem/FretboardSystem.ts","../src/fretboard/Fretboard.ts","../src/tetrachords/tetrachords.ts","../src/chords/chords.ts","../node_modules/throttle-debounce/index.esm.js","js/appfretboard.js","js/tabselector.js","js/appcontroller.js","js/scribe.js","index.js"],"names":["GuitarString","stringNumber","openFrequency","alpha","Math","pow","logalpha","log","logopenFreq","prototype","getFret","frequency","s","round","module","exports","Note","semitone","middleA","name","value","octave","standard","type","string","frets","duration","note","getNote","getNoteString","parseInt","getStandardFrequency","noteStrings","getCents","floor","vextab","Object","keys","length","fret","VextabScribe","header","opts","tab","line","startIndex","endIndex","maxstafflength","stafflength","result","currstaff","currcount","push","addDuration","i","sn","Array","t","map","n","join","cursor","cursorIndicator","isLastNote","heading","vextabopts","staff","require","Application","configure","noteDurations","strings","f","config","options","min","max","add_frequency","addNote","buildNote","addFrets","reduce","toggleChord","e","console","splice","prior","chordstrings","includes","setDuration","deleteAt","maxi","flat","first","second","noteAt","finalopts","vs","editorWindow","pos","width","usePos","ret","before","after","startSlice","endSlice","slice","editorWindowIndices","h","start","end","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","call","runClearTimeout","marker","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","Item","array","noop","nextTick","args","arguments","apply","title","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","Aubio","c","r","hasOwnProperty","thisProgram","quit","a","b","preRun","postRun","u","aa","ba","v","window","importScripts","w","da","ea","ca","locateFile","__dirname","read","normalize","readFileSync","toString","readBinary","buffer","Uint8Array","assert","replace","exit","inspect","readbuffer","scriptArgs","fa","_currentScript","document","currentScript","src","indexOf","split","self","location","href","XMLHttpRequest","open","send","responseText","responseType","response","readAsync","d","onload","status","onerror","setWindowTitle","ha","print","bind","x","printErr","warn","ia","ceil","ja","ka","y","la","ma","z","na","oa","A","B","pa","qa","C","ta","ua","wa","xa","TextDecoder","ra","HEAP8","Int8Array","HEAP16","Int16Array","HEAP32","Int32Array","HEAPU8","HEAPU16","Uint16Array","HEAPU32","Uint32Array","HEAPF32","Float32Array","HEAPF64","Float64Array","ya","E","za","TOTAL_STACK","TOTAL_MEMORY","Aa","shift","F","dynCall_v","dynCall_vi","WebAssembly","Memory","wasmMemory","initial","maximum","ArrayBuffer","Ba","Ca","Da","Ea","Fa","Ga","unshift","Ha","cos","Ia","sin","Ja","G","Ka","String","startsWith","preloadedImages","preloadedAudios","wasmBinary","g","fetch","Promise","credentials","then","ok","arrayBuffer","catch","k","memory","byteLength","set","asm","usingWasm","monitorRunDependencies","clearInterval","instance","instantiate","global","NaN","Infinity","instantiateWasm","vb","instantiateStreaming","l","asm2wasm","parent","asmPreload","m","reallocBuffer","p","grow","table","wasmTableSize","wasmMaxTableSize","Table","element","wasmTable","memoryBase","STATIC_BASE","tableBase","sa","La","Ma","Na","Oa","STATIC_BUMP","H","I","Pa","Qa","TypeError","Ra","K","L","M","Sa","Ta","charCodeAt","Ua","Function","Va","message","stack","create","constructor","O","P","Wa","Xa","Ya","Q","forEach","X","Za","$a","ab","cb","pop","R","db","eb","j","gb","o","T","S","Z","hb","ib","jb","D","$","clone","kb","lb","fromWireType","pb","rb","count","U","Y","toWireType","V","FUNCTION_TABLE","tb","ub","wb","xb","yb","zb","Bb","Cb","Db","Eb","Fb","Gb","Hb","Ib","fromCharCode","BindingError","InternalError","isAliasOf","getPrototypeOf","isDeleted","deleteLater","argPackAdvance","readValueFromPointer","deleteObject","qb","pointerType","ob","getInheritedInstanceCount","getLiveInheritedInstances","flushPendingDeletes","setDelayFunction","UnboundTypeError","count_emval_handles","get_first_emval","N","abort","enlargeMemory","getTotalMemory","abortOnCannotGrowMemory","___setErrNo","___errno_location","___syscall140","FS","position","W","___syscall146","J","subarray","decode","bb","___syscall54","___syscall6","close","__embind_register_bool","__embind_register_class","q","fb","sb","__embind_register_class_constructor","__embind_register_class_function","className","mb","nb","Ab","__embind_register_emval","__embind_register_float","__embind_register_integer","__embind_register_memory_view","__embind_register_std_string","Uint8ClampedArray","Kb","__embind_register_std_wstring","__embind_register_void","__emval_as","__emval_decref","__emval_get_property","__emval_incref","__emval_new_array","__emval_new_cstring","__emval_new_object","__emval_run_destructors","__emval_set_property","__emval_take_value","_abort","_emscripten_memcpy_big","_llvm_cos_f32","_llvm_log10_f32","LN10","_llvm_sin_f32","DYNAMICTOP_PTR","STACKTOP","Lb","__GLOBAL__sub_I_bind_cpp","__GLOBAL__sub_I_fft_cc","__GLOBAL__sub_I_pitch_cc","__GLOBAL__sub_I_tempo_cc","___getTypeName","_free","_malloc","Nb","calledRun","onRuntimeInitialized","setStatus","onAbort","JSON","stringify","dynCall_ffii","dynCall_fi","dynCall_fii","dynCall_fiii","dynCall_ii","dynCall_iii","dynCall_iiii","dynCall_iiiii","dynCall_iiiiii","dynCall_viii","Mb","preInit","noExitRuntime","undefined","define","Tuner","a4","bufferSize","initGetUserMedia","onFrequencyDetected","AudioContext","webkitAudioContext","alert","navigator","mediaDevices","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","resolve","reject","startRecord","audio","stream","audioContext","createMediaStreamSource","connect","analyser","scriptProcessor","destination","addEventListener","event","pitchDetector","do","inputBuffer","getChannelData","error","init","createAnalyser","createScriptProcessor","aubio","Pitch","sampleRate","play","oscillator","createOscillator","stop","__assign","transpose","transpose$1","get","distance","REGEX","cache","get$1","add","addAlias","index","Systems","getChroma","getMode","getScale","chroma","TetrachordTypes","TetrachordLayouts","getInterval","AppFretboard","fretboard","Fretboard","el","fretCount","middleFretColor","middleFretWidth","scaleFrets","showFretNumbers","disabledOpacity","render","drawNote","dots","noteAllStringFrets","setDots","style","fill","color","entries","arr","noteSelectedStringFret","chordStringFrets","notes","drawLine","isChord","newdots","disabled","finaldots","reverse","filter","Tabselector","app","updateCallback","currString","getGoodStringForNote","callUpdate","eventListener","checkKey","suggestedString","changingString","possibleStrings","sort","maxString","removeEventListener","toggleChordTone","deleteCurrent","mostRecentDuration","stripDot","speedUp","slowDown","toggleDot","newduration","endsWith","oldString","oldCursor","keyCode","UP","DOWN","LEFT","RIGHT","PLUS","MINUS","DOT","DELETE","ApplicationController","tuner","$rawnote","getElementById","$rawtab","sensitivity","isRecording","vexeditors","getElementsByClassName","minieditor","display","writeVextabMini","vextabeditor","tabselector","startRecording","currNote","currNoteStart","currNoteProcessed","now","Date","currNoteAge","frequencyData","frequencyBinCount","handleNote","updateUI","stopEditing","updateCurrentNoteDisplay","notedesc","toFixed","innerHTML","getConfig","scribe","indices","vt","dispatchEvent","KeyboardEvent","writeVextab","Scribe","numstrings","scribeOptions","appline","newStaff","ns","maxfretlen","fstring","fretstring","repeat","onloadBody","openTab","appcontroller","enableButtons","hsh","es","setUserInstructions","html","opt","defaultVal","tabkey","tabtime","updateMicSensitivity","btnStart","btnStop","btnFreeze","printRecord","ts","output","addRandom","prompt","freq","random","stopRecord","renderTab","scrollIntoView","btnName","tabName","tabcontent","tablinks","tabout","btnCopy","copyTab","copyText","textArea","createElement","body","appendChild","select","execCommand","remove"],"mappings":"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","file":"src.2772c635.js","sourceRoot":"../src","sourcesContent":["const GuitarString = function(stringNumber, openFrequency) {\n  this.stringNumber = stringNumber\n  this.openFrequency = openFrequency\n\n  // Any music note frequency f is related to another frequency f0 by:\n  // f = f0 * alpha ^ s\n  // where alpha = 2 ^ (1/12)\n  // s = # of semitones from f0 to f (s > 0 if ascending, s < 0 if descending)\n  this.alpha = Math.pow(2, 1/12)\n\n  this.logalpha = Math.log(2) / 12\n  this.logopenFreq = Math.log(openFrequency)\n}\n\n /**\n * get fret from frequency.\n *\n * @param {number} frequency\n * @returns {number}\n */\nGuitarString.prototype.getFret = function(frequency) {\n  /* Derivation:\n     Since f = f0 * alpha ^ s,\n     f / f0 = alpha ^ s\n     s = Math.log(f / f0) / Math.log(alpha)\n     s = (Math.log(f) - Math.log(f0)) / Math.log(alpha)\n  */\n  const s = (Math.log(frequency) - this.logopenFreq) / this.logalpha\n  return Math.round(s)\n}\n\n\nmodule.exports = { GuitarString }\n","/**\n * Note.\n */\nconst Note = function(frequency) {\n\n  this.semitone = 69\n  this.middleA = 440\n\n  this.name = 'rest'\n  this.value = 0\n  // cents = 0\n  this.octave = 0\n  this.frequency = 0\n  this.standard = 0  // required as this controls whether the current note has changed or not.\n\n  // User can change these values later.\n  this.type = 'tone'\n  this.string = null\n  this.frets = {}\n  this.duration = null\n\n  if (frequency) {\n    const note = this.getNote(frequency)\n    this.name = this.getNoteString(note)\n    this.value = note\n    this.octave = parseInt(note / 12)\n    this.frequency = frequency\n    this.standard = this.getStandardFrequency(note)\n  }\n}\n\n/**\n * get musical note from frequency\n *\n * @param {number} frequency\n * @returns {number}\n */\nNote.prototype.getNote = function(frequency) {\n  const note = 12 * (Math.log(frequency / this.middleA) / Math.log(2))\n  return Math.round(note) + this.semitone\n}\n\nNote.prototype.getNoteString = function(note) {\n  const noteStrings = [\n    'C',\n    'C#',\n    'D',\n    'D#',\n    'E',\n    'F',\n    'F#',\n    'G',\n    'G#',\n    'A',\n    'A#',\n    'B'\n  ]\n  return noteStrings[note % 12]\n}\n\n\n/**\n * get the musical note's standard frequency\n *\n * @param note\n * @returns {number}\n */\nNote.prototype.getStandardFrequency = function(note) {\n  return this.middleA * Math.pow(2, (note - this.semitone) / 12)\n}\n\n/**\n * get cents difference between given frequency and musical note's standard frequency\n *\n * @param {number} frequency\n * @param {number} note\n * @returns {number}\n */\nNote.prototype.getCents = function(frequency, note) {\n  return Math.floor(\n    (1200 * Math.log(frequency / this.getStandardFrequency(note))) / Math.log(2)\n  )\n}\n\n\n\n/**\n * Generate vextab for note.\n */\nNote.prototype.vextab = function() {\n  if (this.string == null || Object.keys(this.frets).length == 0) {\n    return `${this.name}/${this.octave}`\n  }\n\n  const string = this.string + 1\n  const fret = this.frets[`${this.string}`]\n  return `${fret}/${string}`\n}\n\n\nmodule.exports = { Note }\n","const VextabScribe = function(header, opts = {}) {\n  this.header = header\n  this.opts = opts\n}\n\n\n /**\n * get vextab for data.\n */\nVextabScribe.prototype.tab = function(line, startIndex = 0, endIndex = null) {\n  if (line.length == 0) {\n    return this.header\n  }\n\n  if (startIndex < 0)\n    startIndex = 0\n  endIndex = (endIndex == null ? line.length : endIndex)\n  if (endIndex > line.length)\n    endIndex = line.length\n\n  const maxstafflength = this.opts.stafflength || 24\n  const result = []\n  let currstaff = []\n  let currcount = 0\n  result.push(currstaff)\n\n  addDuration = function(s, note) {\n    if (note.duration) {\n      s.push(`:${note.duration}`)\n    }\n  }\n\n  for (var i = startIndex; i < endIndex; i++) {\n    const sn = line[i]\n\n    const is_chord = (sn instanceof Array)\n\n    if (!is_chord) {\n      addDuration(currstaff, sn)\n      currstaff.push(sn.vextab())\n      currcount++\n    }\n    else {\n      addDuration(currstaff, sn[0])\n      const t = '(' + sn.map(n => n.vextab()).join('.') + ')'\n      currstaff.push(t)\n      currcount++\n    }\n\n    if (this.opts.cursor == i && this.opts.cursorIndicator)\n      currstaff.push(this.opts.cursorIndicator)\n\n    const isLastNote = (i == line.length - 1)\n    if (currcount >= maxstafflength && !isLastNote) {\n      currstaff = []\n      currcount = 0\n      result.push(currstaff)\n    }\n\n  }\n\n  let heading = this.header || ''\n  if (this.opts.vextabopts)\n    heading = `${heading} ${this.opts.vextabopts}`\n  if (heading !== '' && line.length > 0)\n    heading += '\\nnotes '\n\n  return result.\n    map(staff => `${heading}${staff.join(' ')}`).\n    join('\\n\\n')\n}\n\n\nmodule.exports = { VextabScribe }\n","const { GuitarString } = require('./guitarstring.js')\nconst { Note } = require('./note.js')\nconst { VextabScribe } = require('./vextabscribe.js')\n\n/**\n * Main application.\n *\n * Tracks notes.\n */\nconst Application = function(opts = {}) {\n  this.configure(opts)\n\n  // Allowable durations\n  this.noteDurations = [\n    'w', 'h', 'q', '8', '16', '32'\n  ]\n\n  // Frequencies from https://en.wikipedia.org/wiki/Guitar_tunings\n  const stringFreqs = [\n    329.63,\n    246.94,\n    196.00,\n    146.83,\n    110.00,\n    82.41\n  ]\n  this.strings = stringFreqs.map((f, i) => new GuitarString(i, f))\n\n  // The \"line\" of notes (i.e., the notes grouped into chords, or single tones.\n  this.line = []\n\n  // The \"cursor position\" when editing notes.\n  this.cursorIndicator = null  // '$.a-/bottom.$'\n  this.cursor = null\n}\n\n\nApplication.prototype.configure = function(config) {\n  this.options = config\n  this.options.min = this.options.min || 0\n  this.options.max = this.options.max || 12\n}\n\n\n/** Dev helper for adding random notes. */\nApplication.prototype.add_frequency = function(f) {\n  this.addNote(new Note(f))\n}\n\n\n/** Build a note, indicating frets. */\n// TODO - need to sort this out with some tests, currently this distorts the \"architecture\" :-P\nApplication.prototype.buildNote = function(frequency) {\n  const n = new Note(frequency)\n  this.addFrets(n)\n  return n\n}\n\n\n/** Add frets to a note. */\nApplication.prototype.addFrets = function(note) {\n  note.frets = this.strings.reduce((result, s) => {\n    const f = s.getFret(note.frequency)\n    if (f >= this.options.min && f <= this.options.max)\n      result[s.stringNumber] = f\n      return result\n  },{})\n}\n\n\n/** Add a new note. */\nApplication.prototype.addNote = function(note) {\n  if (note.frequency == 0) {\n    return\n  }\n\n  // Default to quarter note for first note.\n  if (this.line.length == 0)\n    note.duration = 'q'\n\n  this.addFrets(note)\n  \n  this.line.push(note)\n  this.cursor = this.line.length - 1\n}\n\n  \n/**\n * Toggle a note into a chord, or explode a chord into individual notes.\n */\nApplication.prototype.toggleChord = function(i) {\n  const e = this.line[i]\n\n  if (e instanceof Array) {\n    console.log('exploding chord')\n    const reinsert = e\n    this.line.splice(i, 1)  // remove existing chord\n    this.line.splice(i, 0, ...e)  // reinsert individual notes\n    return\n  }\n\n  if (i <= 0)\n    throw 'first note cannot be a chord tone'\n  if (e.string == null)\n    throw 'must assign string'\n\n  const prior = this.line[i - 1]\n  if (prior instanceof Array) {\n    const chordstrings = prior.map(n => n.string)\n    console.log(`Chord strings: ${chordstrings.join(', ')}`)\n    console.log(`check chord uses ${e.string}`)\n    if (chordstrings.includes(e.string))\n      throw `string ${e.string + 1} already used`\n\n    console.log('Adding to chord')\n    this.line[i - 1].push(e)\n    this.line.splice(i, 1)\n  }\n  else {\n    console.log('Adding to prior note')\n    if (prior.string == null)\n      throw 'prior note must have string assigned'\n    if (prior.string == e.string)\n      throw `string ${e.string + 1} already used`\n\n    console.log('starting chord')\n    this.line[i - 1] = [prior, e]\n    console.log('removing e from the line')\n    this.line.splice(i, 1)\n  }\n  e.type = 'chord'\n}\n\n\nApplication.prototype.setDuration = function(i, s) {\n  const e = this.line[i]\n\n  if (e instanceof Array) {\n    e[0].duration = s\n  }\n  else {\n    e.duration = s\n  }\n}\n\n\n/**\n * Delete element from line.\n */\nApplication.prototype.deleteAt = function(i) {\n  const maxi = this.line.length\n  if (i < 0 || i > maxi)\n    throw `Bounds exception, get ${i} but should be in [0, ${maxi})`\n\n  // Propagate time settings.\n  const [ first, second ] = this.line.flat()\n  if (first && second)\n    second.duration = second.duration || first.duration\n\n  this.line.splice(i, 1)  // remove existing thing\n}\n\n\n/**\n * Get note, first note of chord if chord\n */\nApplication.prototype.noteAt = function(i) {\n  const maxi = this.line.length\n  if (i < 0 || i > maxi)\n    throw `Bounds exception, get ${i} but should be in [0, ${maxi})`\n\n  const e = this.line[i]\n  return (e instanceof Array) ? e[0] : e\n}\n\n\n/**\n * Generate vextab \"notes\" string.\n */\nApplication.prototype.vextab = function(header = '', opts = {}) {\n  const finalopts = {\n    ...opts,\n    cursor: this.cursor,\n    cursorIndicator: this.cursorIndicator,\n    vextabopts: this.options.vextabopts\n  }\n  const vs = new VextabScribe(header, finalopts)\n  return vs.tab(this.line)\n}\n\n\n/**\n * Get an \"editor window\" of notes.\n */\nApplication.prototype.editorWindow = function(pos = 0, width = 10) {\n  const usePos = Math.min(Math.max(0, pos), this.line.length - 1)\n  const before = Math.max(0, usePos - width)\n  const after = Math.max(this.line.length - (usePos + 1) - width, 0)\n  const ret = {\n    line: [],\n    before: before,\n    after: after,\n    startIndex: 0,\n    endIndex: 0\n  }\n\n  if (this.line.length == 0) {\n    return ret\n  }\n\n  // eg ['a','b','c','d','e','f','g','h'].slice(2, 5) = ['c','d','e']\n  const startSlice = Math.max(usePos - width, 0)\n  const endSlice = Math.min(usePos + width + 1, this.line.length)\n  ret.startIndex = startSlice\n  ret.endIndex = endSlice\n  ret.line = this.line.slice(startSlice, endSlice)\n\n  return ret\n}\n\n\nApplication.prototype.editorWindowIndices = function(length, pos, width) {\n  const h = Math.floor(width / 2)\n  let start = pos - h\n\n  // Fix start.\n  if (start < 0)\n    start = 0\n\n  // Push end out.\n  let end = start + width\n\n  // Pull end back if needed.\n  if (end > length)\n    end = length\n\n  // Push start back if needed.\n  if (end - width < start)\n    start = end - width\n\n  // Final correction.\n  if (start < 0)\n    start = 0\n\n  return { start, end}\n}\n  \nmodule.exports = { Application }\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","var Aubio = function(Aubio) {\n  Aubio = Aubio || {};\n\nvar c;c||(c=typeof Aubio !== 'undefined' ? Aubio : {});var n={},r;for(r in c)c.hasOwnProperty(r)&&(n[r]=c[r]);c.arguments=[];c.thisProgram=\"./this.program\";c.quit=function(a,b){throw b;};c.preRun=[];c.postRun=[];var u=!1,v=!1,aa=!1,ba=!1;u=\"object\"===typeof window;v=\"function\"===typeof importScripts;aa=\"object\"===typeof process&&\"function\"===typeof require&&!u&&!v;ba=!u&&!aa&&!v;var w=\"\";function ca(a){return c.locateFile?c.locateFile(a,w):w+a}\nif(aa){w=__dirname+\"/\";var da,ea;c.read=function(a,b){da||(da=require(\"fs\"));ea||(ea=require(\"path\"));a=ea.normalize(a);a=da.readFileSync(a);return b?a:a.toString()};c.readBinary=function(a){a=c.read(a,!0);a.buffer||(a=new Uint8Array(a));assert(a.buffer);return a};1<process.argv.length&&(c.thisProgram=process.argv[1].replace(/\\\\/g,\"/\"));c.arguments=process.argv.slice(2);process.on(\"uncaughtException\",function(a){throw a;});process.on(\"unhandledRejection\",function(){process.exit(1)});c.quit=function(a){process.exit(a)};\nc.inspect=function(){return\"[Emscripten Module object]\"}}else if(ba)\"undefined\"!=typeof read&&(c.read=function(a){return read(a)}),c.readBinary=function(a){if(\"function\"===typeof readbuffer)return new Uint8Array(readbuffer(a));a=read(a,\"binary\");assert(\"object\"===typeof a);return a},\"undefined\"!=typeof scriptArgs?c.arguments=scriptArgs:\"undefined\"!=typeof arguments&&(c.arguments=arguments),\"function\"===typeof quit&&(c.quit=function(a){quit(a)});else if(u||v){if(u){var fa=this._currentScript||document.currentScript;\n0!==fa.src.indexOf(\"blob:\")&&(w=fa.src.split(\"/\").slice(0,-1).join(\"/\")+\"/\")}else v&&(w=self.location.href.split(\"/\").slice(0,-1).join(\"/\")+\"/\");c.read=function(a){var b=new XMLHttpRequest;b.open(\"GET\",a,!1);b.send(null);return b.responseText};v&&(c.readBinary=function(a){var b=new XMLHttpRequest;b.open(\"GET\",a,!1);b.responseType=\"arraybuffer\";b.send(null);return new Uint8Array(b.response)});c.readAsync=function(a,b,d){var e=new XMLHttpRequest;e.open(\"GET\",a,!0);e.responseType=\"arraybuffer\";e.onload=\nfunction(){200==e.status||0==e.status&&e.response?b(e.response):d()};e.onerror=d;e.send(null)};c.setWindowTitle=function(a){document.title=a}}var ha=c.print||(\"undefined\"!==typeof console?console.log.bind(console):\"undefined\"!==typeof print?print:null),x=c.printErr||(\"undefined\"!==typeof printErr?printErr:\"undefined\"!==typeof console&&console.warn.bind(console)||ha);for(r in n)n.hasOwnProperty(r)&&(c[r]=n[r]);n=void 0;function ia(a){var b;b||(b=16);return Math.ceil(a/b)*b}\nvar ja={\"f64-rem\":function(a,b){return a%b},\"debugger\":function(){debugger}},ka=0;function assert(a,b){a||y(\"Assertion failed: \"+b)}var la=\"undefined\"!==typeof TextDecoder?new TextDecoder(\"utf8\"):void 0;\"undefined\"!==typeof TextDecoder&&new TextDecoder(\"utf-16le\");var buffer,ma,z,na,oa,A,B,pa,qa;\nfunction ra(){c.HEAP8=ma=new Int8Array(buffer);c.HEAP16=na=new Int16Array(buffer);c.HEAP32=A=new Int32Array(buffer);c.HEAPU8=z=new Uint8Array(buffer);c.HEAPU16=oa=new Uint16Array(buffer);c.HEAPU32=B=new Uint32Array(buffer);c.HEAPF32=pa=new Float32Array(buffer);c.HEAPF64=qa=new Float64Array(buffer)}var sa,C,ta,ua,va,wa,xa;sa=C=ta=ua=va=wa=xa=0;\nfunction ya(){y(\"Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value \"+E+\", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 \")}var za=c.TOTAL_STACK||5242880,E=c.TOTAL_MEMORY||16777216;E<za&&x(\"TOTAL_MEMORY should be larger than TOTAL_STACK, was \"+E+\"! (TOTAL_STACK=\"+za+\")\");\nc.buffer?buffer=c.buffer:(\"object\"===typeof WebAssembly&&\"function\"===typeof WebAssembly.Memory?(c.wasmMemory=new WebAssembly.Memory({initial:E/65536,maximum:E/65536}),buffer=c.wasmMemory.buffer):buffer=new ArrayBuffer(E),c.buffer=buffer);ra();function Aa(a){for(;0<a.length;){var b=a.shift();if(\"function\"==typeof b)b();else{var d=b.B;\"number\"===typeof d?void 0===b.F?c.dynCall_v(d):c.dynCall_vi(d,b.F):d(void 0===b.F?null:b.F)}}}var Ba=[],Ca=[],Da=[],Ea=[],Fa=!1;\nfunction Ga(){var a=c.preRun.shift();Ba.unshift(a)}var Ha=Math.cos,Ia=Math.sin,F=0,Ja=null,G=null;c.preloadedImages={};c.preloadedAudios={};function Ka(a){return String.prototype.startsWith?a.startsWith(\"data:application/octet-stream;base64,\"):0===a.indexOf(\"data:application/octet-stream;base64,\")}\n(function(){function a(){try{if(c.wasmBinary)return new Uint8Array(c.wasmBinary);if(c.readBinary)return c.readBinary(f);throw\"both async and sync fetching of the wasm failed\";}catch(g){y(g)}}function b(){return c.wasmBinary||!u&&!v||\"function\"!==typeof fetch?new Promise(function(b){b(a())}):fetch(f,{credentials:\"same-origin\"}).then(function(a){if(!a.ok)throw\"failed to load wasm binary file at '\"+f+\"'\";return a.arrayBuffer()}).catch(function(){return a()})}function d(a){function d(a){k=a.exports;if(k.memory){a=\nk.memory;var b=c.buffer;a.byteLength<b.byteLength&&x(\"the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here\");b=new Int8Array(b);(new Int8Array(a)).set(b);c.buffer=buffer=a;ra()}c.asm=k;c.usingWasm=!0;F--;c.monitorRunDependencies&&c.monitorRunDependencies(F);0==F&&(null!==Ja&&(clearInterval(Ja),Ja=null),G&&(a=G,G=null,a()))}function e(a){d(a.instance)}function g(a){b().then(function(a){return WebAssembly.instantiate(a,h)}).then(a).catch(function(a){x(\"failed to asynchronously prepare wasm: \"+\na);y(a)})}if(\"object\"!==typeof WebAssembly)return x(\"no native wasm support detected\"),!1;if(!(c.wasmMemory instanceof WebAssembly.Memory))return x(\"no native wasm Memory in use\"),!1;a.memory=c.wasmMemory;h.global={NaN:NaN,Infinity:Infinity};h[\"global.Math\"]=Math;h.env=a;F++;c.monitorRunDependencies&&c.monitorRunDependencies(F);if(c.instantiateWasm)try{return c.instantiateWasm(h,d)}catch(vb){return x(\"Module.instantiateWasm callback failed with error: \"+vb),!1}c.wasmBinary||\"function\"!==typeof WebAssembly.instantiateStreaming||\nKa(f)||\"function\"!==typeof fetch?g(e):WebAssembly.instantiateStreaming(fetch(f,{credentials:\"same-origin\"}),h).then(e).catch(function(a){x(\"wasm streaming compile failed: \"+a);x(\"falling back to ArrayBuffer instantiation\");g(e)});return{}}var e=\"aubio.wast\",f=\"aubio.wasm\",l=\"aubio.temp.asm.js\";Ka(e)||(e=ca(e));Ka(f)||(f=ca(f));Ka(l)||(l=ca(l));var h={global:null,env:null,asm2wasm:ja,parent:c},k=null;c.asmPreload=c.asm;var m=c.reallocBuffer;c.reallocBuffer=function(a){if(\"asmjs\"===p)var b=m(a);else a:{var d=\nc.usingWasm?65536:16777216;0<a%d&&(a+=d-a%d);d=c.buffer.byteLength;if(c.usingWasm)try{b=-1!==c.wasmMemory.grow((a-d)/65536)?c.buffer=c.wasmMemory.buffer:null;break a}catch(t){b=null;break a}b=void 0}return b};var p=\"\";c.asm=function(a,b){if(!b.table){a=c.wasmTableSize;void 0===a&&(a=1024);var e=c.wasmMaxTableSize;b.table=\"object\"===typeof WebAssembly&&\"function\"===typeof WebAssembly.Table?void 0!==e?new WebAssembly.Table({initial:a,maximum:e,element:\"anyfunc\"}):new WebAssembly.Table({initial:a,element:\"anyfunc\"}):\nArray(a);c.wasmTable=b.table}b.memoryBase||(b.memoryBase=c.STATIC_BASE);b.tableBase||(b.tableBase=0);b=d(b);assert(b,\"no binaryen method succeeded.\");return b}})();sa=1024;C=sa+9312;Ca.push({B:function(){La()}},{B:function(){Ma()}},{B:function(){Na()}},{B:function(){Oa()}});c.STATIC_BASE=sa;c.STATIC_BUMP=9312;C+=16;var H=0;function I(){H+=4;return A[H-4>>2]}var Pa={};\nfunction J(a,b){H=b;try{var d=I(),e=I(),f=I();a=0;J.J||(J.J=[null,[],[]],J.P=function(a,b){var d=J.J[a];assert(d);if(0===b||10===b){a=1===a?ha:x;a:{for(var e=b=0;d[e];)++e;if(16<e-b&&d.subarray&&la)b=la.decode(d.subarray(b,e));else for(e=\"\";;){var f=d[b++];if(!f){b=e;break a}if(f&128){var k=d[b++]&63;if(192==(f&224))e+=String.fromCharCode((f&31)<<6|k);else{var l=d[b++]&63;if(224==(f&240))f=(f&15)<<12|k<<6|l;else{var h=d[b++]&63;if(240==(f&248))f=(f&7)<<18|k<<12|l<<6|h;else{var bb=d[b++]&63;if(248==\n(f&252))f=(f&3)<<24|k<<18|l<<12|h<<6|bb;else{var m=d[b++]&63;f=(f&1)<<30|k<<24|l<<18|h<<12|bb<<6|m}}}65536>f?e+=String.fromCharCode(f):(f-=65536,e+=String.fromCharCode(55296|f>>10,56320|f&1023))}}else e+=String.fromCharCode(f)}}a(b);d.length=0}else d.push(b)});for(b=0;b<f;b++){for(var l=A[e+8*b>>2],h=A[e+(8*b+4)>>2],k=0;k<h;k++)J.P(d,z[l+k]);a+=h}return a}catch(m){return\"undefined\"!==typeof FS&&m instanceof FS.I||y(m),-m.L}}\nfunction Qa(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(\"Unknown type size: \"+a);}}var Ra=void 0;function K(a){for(var b=\"\";z[a];)b+=Ra[z[a++]];return b}var L={},M={},Sa={};function Ta(a){if(void 0===a)return\"_unknown\";a=a.replace(/[^a-zA-Z0-9_]/g,\"$\");var b=a.charCodeAt(0);return 48<=b&&57>=b?\"_\"+a:a}\nfunction Ua(a,b){a=Ta(a);return(new Function(\"body\",\"return function \"+a+'() {\\n    \"use strict\";    return body.apply(this, arguments);\\n};\\n'))(b)}function Va(a){var b=Error,d=Ua(a,function(b){this.name=a;this.message=b;b=Error(b).stack;void 0!==b&&(this.stack=this.toString()+\"\\n\"+b.replace(/^Error(:[^\\n]*)?\\n/,\"\"))});d.prototype=Object.create(b.prototype);d.prototype.constructor=d;d.prototype.toString=function(){return void 0===this.message?this.name:this.name+\": \"+this.message};return d}\nvar O=void 0;function P(a){throw new O(a);}var Wa=void 0;function Xa(a){throw new Wa(a);}function Ya(a,b,d){function e(b){b=d(b);b.length!==a.length&&Xa(\"Mismatched type converter count\");for(var e=0;e<a.length;++e)Q(a[e],b[e])}a.forEach(function(a){Sa[a]=b});var f=Array(b.length),l=[],h=0;b.forEach(function(a,b){M.hasOwnProperty(a)?f[b]=M[a]:(l.push(a),L.hasOwnProperty(a)||(L[a]=[]),L[a].push(function(){f[b]=M[a];++h;h===l.length&&e(f)}))});0===l.length&&e(f)}\nfunction Q(a,b,d){d=d||{};if(!(\"argPackAdvance\"in b))throw new TypeError(\"registerType registeredInstance requires argPackAdvance\");var e=b.name;a||P('type \"'+e+'\" must have a positive integer typeid pointer');if(M.hasOwnProperty(a)){if(d.X)return;P(\"Cannot register type '\"+e+\"' twice\")}M[a]=b;delete Sa[a];L.hasOwnProperty(a)&&(b=L[a],delete L[a],b.forEach(function(a){a()}))}function Za(a){P(a.a.f.b.name+\" instance already deleted\")}var $a=void 0,ab=[];\nfunction cb(){for(;ab.length;){var a=ab.pop();a.a.s=!1;a[\"delete\"]()}}function R(){}var db={};function eb(a,b,d){if(void 0===a[b].j){var e=a[b];a[b]=function(){a[b].j.hasOwnProperty(arguments.length)||P(\"Function '\"+d+\"' called with an invalid number of arguments (\"+arguments.length+\") - expects one of (\"+a[b].j+\")!\");return a[b].j[arguments.length].apply(this,arguments)};a[b].j=[];a[b].j[e.A]=e}}\nfunction fb(a,b){c.hasOwnProperty(a)?(P(\"Cannot register public name '\"+a+\"' twice\"),eb(c,a,a),c.hasOwnProperty(void 0)&&P(\"Cannot register multiple overloads of a function with the same number of arguments (undefined)!\"),c[a].j[void 0]=b):c[a]=b}function gb(a,b,d,e,f,l,h,k){this.name=a;this.constructor=b;this.u=d;this.o=e;this.i=f;this.T=l;this.w=h;this.S=k;this.Z=[]}\nfunction hb(a,b,d){for(;b!==d;)b.w||P(\"Expected null or instance of \"+d.name+\", got an instance of \"+b.name),a=b.w(a),b=b.i;return a}function ib(a,b){if(null===b)return this.G&&P(\"null is not a valid \"+this.name),0;b.a||P('Cannot pass \"'+S(b)+'\" as a '+this.name);b.a.c||P(\"Cannot pass deleted object as a pointer of type \"+this.name);return hb(b.a.c,b.a.f.b,this.b)}\nfunction jb(a,b){if(null===b){this.G&&P(\"null is not a valid \"+this.name);if(this.D){var d=this.$();null!==a&&a.push(this.o,d);return d}return 0}b.a||P('Cannot pass \"'+S(b)+'\" as a '+this.name);b.a.c||P(\"Cannot pass deleted object as a pointer of type \"+this.name);!this.C&&b.a.f.C&&P(\"Cannot convert argument of type \"+(b.a.h?b.a.h.name:b.a.f.name)+\" to parameter type \"+this.name);d=hb(b.a.c,b.a.f.b,this.b);if(this.D)switch(void 0===b.a.g&&P(\"Passing raw pointer to smart pointer is illegal\"),this.ba){case 0:b.a.h===\nthis?d=b.a.g:P(\"Cannot convert argument of type \"+(b.a.h?b.a.h.name:b.a.f.name)+\" to parameter type \"+this.name);break;case 1:d=b.a.g;break;case 2:if(b.a.h===this)d=b.a.g;else{var e=b.clone();d=this.aa(d,T(function(){e[\"delete\"]()}));null!==a&&a.push(this.o,d)}break;default:P(\"Unsupporting sharing policy\")}return d}\nfunction kb(a,b){if(null===b)return this.G&&P(\"null is not a valid \"+this.name),0;b.a||P('Cannot pass \"'+S(b)+'\" as a '+this.name);b.a.c||P(\"Cannot pass deleted object as a pointer of type \"+this.name);b.a.f.C&&P(\"Cannot convert argument of type \"+b.a.f.name+\" to parameter type \"+this.name);return hb(b.a.c,b.a.f.b,this.b)}function lb(a){return this.fromWireType(B[a>>2])}function ob(a,b,d){if(b===d)return a;if(void 0===d.i)return null;a=ob(a,b,d.i);return null===a?null:d.S(a)}var pb={};\nfunction qb(a,b){for(void 0===b&&P(\"ptr should not be undefined\");a.i;)b=a.w(b),a=a.i;return pb[b]}function rb(a,b){b.f&&b.c||Xa(\"makeClassHandle requires ptr and ptrType\");!!b.h!==!!b.g&&Xa(\"Both smartPtrType and smartPtr must be specified\");b.count={value:1};return Object.create(a,{a:{value:b}})}\nfunction U(a,b,d,e,f,l,h,k,m,p,g){this.name=a;this.b=b;this.G=d;this.C=e;this.D=f;this.Y=l;this.ba=h;this.M=k;this.$=m;this.aa=p;this.o=g;f||void 0!==b.i?this.toWireType=jb:(this.toWireType=e?ib:kb,this.l=null)}function sb(a,b){c.hasOwnProperty(a)||Xa(\"Replacing nonexistant public symbol\");c[a]=b;c[a].A=void 0}\nfunction V(a,b){a=K(a);if(void 0!==c[\"FUNCTION_TABLE_\"+a])var d=c[\"FUNCTION_TABLE_\"+a][b];else if(\"undefined\"!==typeof FUNCTION_TABLE)d=FUNCTION_TABLE[b];else{d=c.asm[\"dynCall_\"+a];void 0===d&&(d=c.asm[\"dynCall_\"+a.replace(/f/g,\"d\")],void 0===d&&P(\"No dynCall invoker for signature: \"+a));for(var e=[],f=1;f<a.length;++f)e.push(\"a\"+f);f=\"return function \"+(\"dynCall_\"+a+\"_\"+b)+\"(\"+e.join(\", \")+\") {\\n\";f+=\"    return dynCall(rawFunction\"+(e.length?\", \":\"\")+e.join(\", \")+\");\\n\";d=(new Function(\"dynCall\",\n\"rawFunction\",f+\"};\\n\"))(d,b)}\"function\"!==typeof d&&P(\"unknown function pointer with signature \"+a+\": \"+b);return d}var tb=void 0;function ub(a){a=wb(a);var b=K(a);X(a);return b}function xb(a,b){function d(a){f[a]||M[a]||(Sa[a]?Sa[a].forEach(d):(e.push(a),f[a]=!0))}var e=[],f={};b.forEach(d);throw new tb(a+\": \"+e.map(ub).join([\", \"]));}function yb(a,b){for(var d=[],e=0;e<a;e++)d.push(A[(b>>2)+e]);return d}function zb(a){for(;a.length;){var b=a.pop();a.pop()(b)}}\nfunction Ab(a){var b=Function;if(!(b instanceof Function))throw new TypeError(\"new_ called with constructor type \"+typeof b+\" which is not a function\");var d=Ua(b.name||\"unknownFunctionName\",function(){});d.prototype=b.prototype;d=new d;a=b.apply(d,a);return a instanceof Object?a:d}var Bb=[],Y=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Cb(a){4<a&&0===--Y[a].H&&(Y[a]=void 0,Bb.push(a))}\nfunction T(a){switch(a){case void 0:return 1;case null:return 2;case !0:return 3;case !1:return 4;default:var b=Bb.length?Bb.pop():Y.length;Y[b]={H:1,value:a};return b}}function S(a){if(null===a)return\"null\";var b=typeof a;return\"object\"===b||\"array\"===b||\"function\"===b?a.toString():\"\"+a}function Db(a,b){switch(b){case 2:return function(a){return this.fromWireType(pa[a>>2])};case 3:return function(a){return this.fromWireType(qa[a>>3])};default:throw new TypeError(\"Unknown float type: \"+a);}}\nfunction Eb(a,b,d){switch(b){case 0:return d?function(a){return ma[a]}:function(a){return z[a]};case 1:return d?function(a){return na[a>>1]}:function(a){return oa[a>>1]};case 2:return d?function(a){return A[a>>2]}:function(a){return B[a>>2]};default:throw new TypeError(\"Unknown integer type: \"+a);}}function Z(a){a||P(\"Cannot use deleted val. handle = \"+a);return Y[a].value}function Fb(a,b){var d=M[a];void 0===d&&P(b+\" has unknown type \"+ub(a));return d}\nfor(var Gb={},Hb=Array(256),Ib=0;256>Ib;++Ib)Hb[Ib]=String.fromCharCode(Ib);Ra=Hb;O=c.BindingError=Va(\"BindingError\");Wa=c.InternalError=Va(\"InternalError\");R.prototype.isAliasOf=function(a){if(!(this instanceof R&&a instanceof R))return!1;var b=this.a.f.b,d=this.a.c,e=a.a.f.b;for(a=a.a.c;b.i;)d=b.w(d),b=b.i;for(;e.i;)a=e.w(a),e=e.i;return b===e&&d===a};\nR.prototype.clone=function(){this.a.c||Za(this);if(this.a.v)return this.a.count.value+=1,this;var a=this.a;a=Object.create(Object.getPrototypeOf(this),{a:{value:{count:a.count,s:a.s,v:a.v,c:a.c,f:a.f,g:a.g,h:a.h}}});a.a.count.value+=1;a.a.s=!1;return a};R.prototype[\"delete\"]=function(){this.a.c||Za(this);this.a.s&&!this.a.v&&P(\"Object already scheduled for deletion\");--this.a.count.value;if(0===this.a.count.value){var a=this.a;a.g?a.h.o(a.g):a.f.b.o(a.c)}this.a.v||(this.a.g=void 0,this.a.c=void 0)};\nR.prototype.isDeleted=function(){return!this.a.c};R.prototype.deleteLater=function(){this.a.c||Za(this);this.a.s&&!this.a.v&&P(\"Object already scheduled for deletion\");ab.push(this);1===ab.length&&$a&&$a(cb);this.a.s=!0;return this};U.prototype.U=function(a){this.M&&(a=this.M(a));return a};U.prototype.K=function(a){this.o&&this.o(a)};U.prototype.argPackAdvance=8;U.prototype.readValueFromPointer=lb;U.prototype.deleteObject=function(a){if(null!==a)a[\"delete\"]()};\nU.prototype.fromWireType=function(a){function b(){return this.D?rb(this.b.u,{f:this.Y,c:d,h:this,g:a}):rb(this.b.u,{f:this,c:a})}var d=this.U(a);if(!d)return this.K(a),null;var e=qb(this.b,d);if(void 0!==e){if(0===e.a.count.value)return e.a.c=d,e.a.g=a,e.clone();e=e.clone();this.K(a);return e}e=this.b.T(d);e=db[e];if(!e)return b.call(this);e=this.C?e.R:e.pointerType;var f=ob(d,this.b,e.b);return null===f?b.call(this):this.D?rb(e.b.u,{f:e,c:f,h:this,g:a}):rb(e.b.u,{f:e,c:f})};\nc.getInheritedInstanceCount=function(){return Object.keys(pb).length};c.getLiveInheritedInstances=function(){var a=[],b;for(b in pb)pb.hasOwnProperty(b)&&a.push(pb[b]);return a};c.flushPendingDeletes=cb;c.setDelayFunction=function(a){$a=a;ab.length&&$a&&$a(cb)};tb=c.UnboundTypeError=Va(\"UnboundTypeError\");c.count_emval_handles=function(){for(var a=0,b=5;b<Y.length;++b)void 0!==Y[b]&&++a;return a};c.get_first_emval=function(){for(var a=5;a<Y.length;++a)if(void 0!==Y[a])return Y[a];return null};\nvar Jb=C;C=C+4+15&-16;xa=Jb;ta=ua=ia(C);va=ta+za;wa=ia(va);A[xa>>2]=wa;c.wasmTableSize=83;c.wasmMaxTableSize=83;c.N={};\nc.O={abort:y,enlargeMemory:function(){ya()},getTotalMemory:function(){return E},abortOnCannotGrowMemory:ya,___setErrNo:function(a){c.___errno_location&&(A[c.___errno_location()>>2]=a);return a},___syscall140:function(a,b){H=b;try{var d=Pa.V();I();var e=I(),f=I(),l=I();FS.ea(d,e,l);A[f>>2]=d.position;d.W&&0===e&&0===l&&(d.W=null);return 0}catch(h){return\"undefined\"!==typeof FS&&h instanceof FS.I||y(h),-h.L}},___syscall146:J,___syscall54:function(a,b){H=b;return 0},___syscall6:function(a,b){H=b;try{var d=\nPa.V();FS.close(d);return 0}catch(e){return\"undefined\"!==typeof FS&&e instanceof FS.I||y(e),-e.L}},__embind_register_bool:function(a,b,d,e,f){var l=Qa(d);b=K(b);Q(a,{name:b,fromWireType:function(a){return!!a},toWireType:function(a,b){return b?e:f},argPackAdvance:8,readValueFromPointer:function(a){if(1===d)var e=ma;else if(2===d)e=na;else if(4===d)e=A;else throw new TypeError(\"Unknown boolean type size: \"+b);return this.fromWireType(e[a>>l])},l:null})},__embind_register_class:function(a,b,d,e,f,l,\nh,k,m,p,g,q,D){g=K(g);l=V(f,l);k&&(k=V(h,k));p&&(p=V(m,p));D=V(q,D);var t=Ta(g);fb(t,function(){xb(\"Cannot construct \"+g+\" due to unbound types\",[e])});Ya([a,b,d],e?[e]:[],function(b){b=b[0];if(e){var d=b.b;var f=d.u}else f=R.prototype;b=Ua(t,function(){if(Object.getPrototypeOf(this)!==h)throw new O(\"Use 'new' to construct \"+g);if(void 0===m.m)throw new O(g+\" has no accessible constructor\");var a=m.m[arguments.length];if(void 0===a)throw new O(\"Tried to invoke ctor of \"+g+\" with invalid number of parameters (\"+\narguments.length+\") - expected (\"+Object.keys(m.m).toString()+\") parameters instead!\");return a.apply(this,arguments)});var h=Object.create(f,{constructor:{value:b}});b.prototype=h;var m=new gb(g,b,h,D,d,l,k,p);d=new U(g,m,!0,!1,!1);f=new U(g+\"*\",m,!1,!1,!1);var q=new U(g+\" const*\",m,!1,!0,!1);db[a]={pointerType:f,R:q};sb(t,b);return[d,f,q]})},__embind_register_class_constructor:function(a,b,d,e,f,l){var h=yb(b,d);f=V(e,f);Ya([],[a],function(a){a=a[0];var d=\"constructor \"+a.name;void 0===a.b.m&&(a.b.m=\n[]);if(void 0!==a.b.m[b-1])throw new O(\"Cannot register multiple constructors with identical number of parameters (\"+(b-1)+\") for class '\"+a.name+\"'! Overload resolution is currently only performed using the parameter count, not actual type info!\");a.b.m[b-1]=function(){xb(\"Cannot construct \"+a.name+\" due to unbound types\",h)};Ya([],h,function(e){a.b.m[b-1]=function(){arguments.length!==b-1&&P(d+\" called with \"+arguments.length+\" arguments, expected \"+(b-1));var a=[],h=Array(b);h[0]=l;for(var k=1;k<\nb;++k)h[k]=e[k].toWireType(a,arguments[k-1]);h=f.apply(null,h);zb(a);return e[0].fromWireType(h)};return[]});return[]})},__embind_register_class_function:function(a,b,d,e,f,l,h,k){var m=yb(d,e);b=K(b);l=V(f,l);Ya([],[a],function(a){function e(){xb(\"Cannot call \"+f+\" due to unbound types\",m)}a=a[0];var f=a.name+\".\"+b;k&&a.b.Z.push(b);var p=a.b.u,t=p[b];void 0===t||void 0===t.j&&t.className!==a.name&&t.A===d-2?(e.A=d-2,e.className=a.name,p[b]=e):(eb(p,b,f),p[b].j[d-2]=e);Ya([],m,function(e){var k=f,\ng=a,m=l,q=e.length;2>q&&P(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");var t=null!==e[1]&&null!==g,D=!1;for(g=1;g<e.length;++g)if(null!==e[g]&&void 0===e[g].l){D=!0;break}var mb=\"void\"!==e[0].name,N=\"\",W=\"\";for(g=0;g<q-2;++g)N+=(0!==g?\", \":\"\")+\"arg\"+g,W+=(0!==g?\", \":\"\")+\"arg\"+g+\"Wired\";k=\"return function \"+Ta(k)+\"(\"+N+\") {\\nif (arguments.length !== \"+(q-2)+\") {\\nthrowBindingError('function \"+k+\" called with ' + arguments.length + ' arguments, expected \"+(q-2)+\n\" args!');\\n}\\n\";D&&(k+=\"var destructors = [];\\n\");var nb=D?\"destructors\":\"null\";N=\"throwBindingError invoker fn runDestructors retType classParam\".split(\" \");m=[P,m,h,zb,e[0],e[1]];t&&(k+=\"var thisWired = classParam.toWireType(\"+nb+\", this);\\n\");for(g=0;g<q-2;++g)k+=\"var arg\"+g+\"Wired = argType\"+g+\".toWireType(\"+nb+\", arg\"+g+\"); // \"+e[g+2].name+\"\\n\",N.push(\"argType\"+g),m.push(e[g+2]);t&&(W=\"thisWired\"+(0<W.length?\", \":\"\")+W);k+=(mb?\"var rv = \":\"\")+\"invoker(fn\"+(0<W.length?\", \":\"\")+W+\");\\n\";if(D)k+=\n\"runDestructors(destructors);\\n\";else for(g=t?1:2;g<e.length;++g)q=1===g?\"thisWired\":\"arg\"+(g-2)+\"Wired\",null!==e[g].l&&(k+=q+\"_dtor(\"+q+\"); // \"+e[g].name+\"\\n\",N.push(q+\"_dtor\"),m.push(e[g].l));mb&&(k+=\"var ret = retType.fromWireType(rv);\\nreturn ret;\\n\");N.push(k+\"}\\n\");e=Ab(N).apply(null,m);void 0===p[b].j?(e.A=d-2,p[b]=e):p[b].j[d-2]=e;return[]});return[]})},__embind_register_emval:function(a,b){b=K(b);Q(a,{name:b,fromWireType:function(a){var b=Y[a].value;Cb(a);return b},toWireType:function(a,\nb){return T(b)},argPackAdvance:8,readValueFromPointer:lb,l:null})},__embind_register_float:function(a,b,d){d=Qa(d);b=K(b);Q(a,{name:b,fromWireType:function(a){return a},toWireType:function(a,b){if(\"number\"!==typeof b&&\"boolean\"!==typeof b)throw new TypeError('Cannot convert \"'+S(b)+'\" to '+this.name);return b},argPackAdvance:8,readValueFromPointer:Db(b,d),l:null})},__embind_register_integer:function(a,b,d,e,f){function l(a){return a}b=K(b);-1===f&&(f=4294967295);var h=Qa(d);if(0===e){var k=32-8*d;\nl=function(a){return a<<k>>>k}}var m=-1!=b.indexOf(\"unsigned\");Q(a,{name:b,fromWireType:l,toWireType:function(a,d){if(\"number\"!==typeof d&&\"boolean\"!==typeof d)throw new TypeError('Cannot convert \"'+S(d)+'\" to '+this.name);if(d<e||d>f)throw new TypeError('Passing a number \"'+S(d)+'\" from JS side to C/C++ side to an argument of type \"'+b+'\", which is outside the valid range ['+e+\", \"+f+\"]!\");return m?d>>>0:d|0},argPackAdvance:8,readValueFromPointer:Eb(b,h,0!==e),l:null})},__embind_register_memory_view:function(a,\nb,d){function e(a){a>>=2;var b=B;return new f(b.buffer,b[a+1],b[a])}var f=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][b];d=K(d);Q(a,{name:d,fromWireType:e,argPackAdvance:8,readValueFromPointer:e},{X:!0})},__embind_register_std_string:function(a,b){b=K(b);Q(a,{name:b,fromWireType:function(a){for(var b=B[a>>2],d=Array(b),l=0;l<b;++l)d[l]=String.fromCharCode(z[a+4+l]);X(a);return d.join(\"\")},toWireType:function(a,b){function d(a,b){return a[b]}function e(a,\nb){return a.charCodeAt(b)}b instanceof ArrayBuffer&&(b=new Uint8Array(b));var h;b instanceof Uint8Array?h=d:b instanceof Uint8ClampedArray?h=d:b instanceof Int8Array?h=d:\"string\"===typeof b?h=e:P(\"Cannot pass non-string to std::string\");var k=b.length,m=Kb(4+k);B[m>>2]=k;for(var p=0;p<k;++p){var g=h(b,p);255<g&&(X(m),P(\"String has UTF-16 code units that do not fit in 8 bits\"));z[m+4+p]=g}null!==a&&a.push(X,m);return m},argPackAdvance:8,readValueFromPointer:lb,l:function(a){X(a)}})},__embind_register_std_wstring:function(a,\nb,d){d=K(d);if(2===b){var e=function(){return oa};var f=1}else 4===b&&(e=function(){return B},f=2);Q(a,{name:d,fromWireType:function(a){for(var b=e(),d=B[a>>2],l=Array(d),p=a+4>>f,g=0;g<d;++g)l[g]=String.fromCharCode(b[p+g]);X(a);return l.join(\"\")},toWireType:function(a,d){var k=e(),h=d.length,l=Kb(4+h*b);B[l>>2]=h;for(var g=l+4>>f,q=0;q<h;++q)k[g+q]=d.charCodeAt(q);null!==a&&a.push(X,l);return l},argPackAdvance:8,readValueFromPointer:lb,l:function(a){X(a)}})},__embind_register_void:function(a,b){b=\nK(b);Q(a,{da:!0,name:b,argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},__emval_as:function(a,b,d){a=Z(a);b=Fb(b,\"emval::as\");var e=[],f=T(e);A[d>>2]=f;return b.toWireType(e,a)},__emval_decref:Cb,__emval_get_property:function(a,b){a=Z(a);b=Z(b);return T(a[b])},__emval_incref:function(a){4<a&&(Y[a].H+=1)},__emval_new_array:function(){return T([])},__emval_new_cstring:function(a){var b=Gb[a];return T(void 0===b?K(a):b)},__emval_new_object:function(){return T({})},__emval_run_destructors:function(a){zb(Y[a].value);\nCb(a)},__emval_set_property:function(a,b,d){a=Z(a);b=Z(b);d=Z(d);a[b]=d},__emval_take_value:function(a,b){a=Fb(a,\"_emval_take_value\");a=a.readValueFromPointer(b);return T(a)},_abort:function(){c.abort()},_emscripten_memcpy_big:function(a,b,d){z.set(z.subarray(b,b+d),a);return a},_llvm_cos_f32:Ha,_llvm_log10_f32:function(a){return Math.log(a)/Math.LN10},_llvm_sin_f32:Ia,DYNAMICTOP_PTR:xa,STACKTOP:ua};var Lb=c.asm(c.N,c.O,buffer);c.asm=Lb;\nvar Oa=c.__GLOBAL__sub_I_bind_cpp=function(){return c.asm.__GLOBAL__sub_I_bind_cpp.apply(null,arguments)},La=c.__GLOBAL__sub_I_fft_cc=function(){return c.asm.__GLOBAL__sub_I_fft_cc.apply(null,arguments)},Na=c.__GLOBAL__sub_I_pitch_cc=function(){return c.asm.__GLOBAL__sub_I_pitch_cc.apply(null,arguments)},Ma=c.__GLOBAL__sub_I_tempo_cc=function(){return c.asm.__GLOBAL__sub_I_tempo_cc.apply(null,arguments)},wb=c.___getTypeName=function(){return c.asm.___getTypeName.apply(null,arguments)},X=c._free=function(){return c.asm._free.apply(null,\narguments)},Kb=c._malloc=function(){return c.asm._malloc.apply(null,arguments)};c.dynCall_ffii=function(){return c.asm.dynCall_ffii.apply(null,arguments)};c.dynCall_fi=function(){return c.asm.dynCall_fi.apply(null,arguments)};c.dynCall_fii=function(){return c.asm.dynCall_fii.apply(null,arguments)};c.dynCall_fiii=function(){return c.asm.dynCall_fiii.apply(null,arguments)};c.dynCall_ii=function(){return c.asm.dynCall_ii.apply(null,arguments)};\nc.dynCall_iii=function(){return c.asm.dynCall_iii.apply(null,arguments)};c.dynCall_iiii=function(){return c.asm.dynCall_iiii.apply(null,arguments)};c.dynCall_iiiii=function(){return c.asm.dynCall_iiiii.apply(null,arguments)};c.dynCall_iiiiii=function(){return c.asm.dynCall_iiiiii.apply(null,arguments)};c.dynCall_v=function(){return c.asm.dynCall_v.apply(null,arguments)};c.dynCall_vi=function(){return c.asm.dynCall_vi.apply(null,arguments)};\nc.dynCall_viii=function(){return c.asm.dynCall_viii.apply(null,arguments)};c.asm=Lb;c.then=function(a){if(c.calledRun)a(c);else{var b=c.onRuntimeInitialized;c.onRuntimeInitialized=function(){b&&b();a(c)}}return c};G=function Mb(){c.calledRun||Nb();c.calledRun||(G=Mb)};\nfunction Nb(){function a(){if(!c.calledRun&&(c.calledRun=!0,!ka)){Fa||(Fa=!0,Aa(Ca));Aa(Da);if(c.onRuntimeInitialized)c.onRuntimeInitialized();if(c.postRun)for(\"function\"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var a=c.postRun.shift();Ea.unshift(a)}Aa(Ea)}}if(!(0<F)){if(c.preRun)for(\"function\"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)Ga();Aa(Ba);0<F||c.calledRun||(c.setStatus?(c.setStatus(\"Running...\"),setTimeout(function(){setTimeout(function(){c.setStatus(\"\")},\n1);a()},1)):a())}}c.run=Nb;function y(a){if(c.onAbort)c.onAbort(a);void 0!==a?(ha(a),x(a),a=JSON.stringify(a)):a=\"\";ka=!0;throw\"abort(\"+a+\"). Build with -s ASSERTIONS=1 for more info.\";}c.abort=y;if(c.preInit)for(\"function\"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();c.noExitRuntime=!0;Nb();\n\n\n  return Aubio;\n};\nAubio = Aubio.bind({\n  _currentScript: typeof document !== 'undefined' ? document.currentScript : undefined\n});\nif (typeof exports === 'object' && typeof module === 'object')\n    module.exports = Aubio;\n  else if (typeof define === 'function' && define['amd'])\n    define([], function() { return Aubio; });\n  else if (typeof exports === 'object')\n    exports[\"Aubio\"] = Aubio;\n  ","import Aubio from './aubio.js'\n\nconst Tuner = function(a4) {\n  this.bufferSize = 4096\n  this.initGetUserMedia()\n\n  /** Callback for when a frequency is heard. */\n  this.onFrequencyDetected = null\n}\n\nTuner.prototype.initGetUserMedia = function() {\n  window.AudioContext = window.AudioContext || window.webkitAudioContext\n  if (!window.AudioContext) {\n    return alert('AudioContext not supported')\n  }\n\n  // Older browsers might not implement mediaDevices at all, so we set an empty object first\n  if (navigator.mediaDevices === undefined) {\n    navigator.mediaDevices = {}\n  }\n\n  // Some browsers partially implement mediaDevices. We can't just assign an object\n  // with getUserMedia as it would overwrite existing properties.\n  // Here, we will just add the getUserMedia property if it's missing.\n  if (navigator.mediaDevices.getUserMedia === undefined) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      // First get ahold of the legacy getUserMedia, if present\n      const getUserMedia =\n        navigator.webkitGetUserMedia || navigator.mozGetUserMedia\n\n      // Some browsers just don't implement it - return a rejected promise with an error\n      // to keep a consistent interface\n      if (!getUserMedia) {\n        alert('getUserMedia is not implemented in this browser')\n      }\n\n      // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n      return new Promise(function(resolve, reject) {\n        getUserMedia.call(navigator, constraints, resolve, reject)\n      })\n    }\n  }\n}\n\nTuner.prototype.startRecord = function () {\n  const self = this\n  navigator.mediaDevices\n    .getUserMedia({ audio: true })\n    .then(function(stream) {\n      self.audioContext.createMediaStreamSource(stream).connect(self.analyser)\n      self.analyser.connect(self.scriptProcessor)\n      self.scriptProcessor.connect(self.audioContext.destination)\n      self.scriptProcessor.addEventListener('audioprocess', function(event) {\n        const frequency = self.pitchDetector.do(\n          event.inputBuffer.getChannelData(0)\n        )\n        self.onFrequencyDetected(frequency || 0)\n      })\n    })\n    .catch(function(error) {\n      alert(error.name + ': ' + error.message)\n    })\n}\n\nTuner.prototype.init = function() {\n  this.audioContext = new window.AudioContext()\n  this.analyser = this.audioContext.createAnalyser()\n  this.scriptProcessor = this.audioContext.createScriptProcessor(\n    this.bufferSize,\n    1,\n    1\n  )\n\n  const self = this\n\n  Aubio().then(function(aubio) {\n    self.pitchDetector = new aubio.Pitch(\n      'default',\n      self.bufferSize,\n      1,\n      self.audioContext.sampleRate\n    )\n    self.startRecord()\n  })\n}\n\n/**\n * play the musical note\n *\n * @param {number} frequency\n */\nTuner.prototype.play = function(frequency) {\n  if (!this.oscillator) {\n    this.oscillator = this.audioContext.createOscillator()\n    this.oscillator.connect(this.audioContext.destination)\n    this.oscillator.start()\n  }\n  this.oscillator.frequency.value = frequency\n}\n\nTuner.prototype.stop = function() {\n  this.oscillator.stop()\n  this.oscillator = null\n}\n\nmodule.exports = { Tuner }\n","import { Position } from '../fretboard/Fretboard';\n\nfunction transform({\n  box = [] as Position[],\n  from = { string: 6, fret: 0 },\n  to = { string: 1, fret: 100 },\n  action = (x: Position): Position => x\n} = {}): Position[] {\n  function inSelection({ string, fret }: {\n    string: number;\n    fret: number;\n  }): boolean {\n    if (string > from.string || string < to.string) {\n      return false;\n    }\n    if (string === from.string && fret < from.fret) {\n      return false;\n    }\n    if (string === to.string && fret > to.fret) {\n      return false;\n    }\n    return true;\n  }\n  return box.map(x => inSelection(x) ? action(x) : x);\n}\n\nexport function disableStrings({\n  box = [],\n  strings = []\n}: {\n  box: Position[];\n  strings: number[];\n}): Position[] {\n  return box.map(({ string, ...dot }) => ({\n    string,\n    disabled: strings.indexOf(string) > -1,\n    ...dot\n  }));\n}\n\nexport function sliceBox({\n  box = [] as Position[],\n  from = { string: 6, fret: 0 },\n  to = { string: 1, fret: 100 }\n} = {}): Position[] {\n  const sortedBox = box.slice().sort((a, b) => {\n    if (a.string > b.string) {\n      return -1;\n    }\n    if (a.fret > b.fret) {\n      return 1;\n    }\n    return -1;\n  });\n\n  function findIndex(key: {\n    string: number;\n    fret: number;\n  }): number {\n    return sortedBox.findIndex(({ string, fret }) =>\n      string === key.string && fret === key.fret\n    );\n  }\n\n  let fromIndex = findIndex(from);\n  if (fromIndex === -1) {\n    fromIndex = 0;\n  }\n  let toIndex = findIndex(to);\n  if (toIndex === -1) {\n    toIndex = sortedBox.length;\n  }\n  return sortedBox.slice(fromIndex, toIndex);\n}\n\nexport function disableDots({\n  box = [] as Position[],\n  from = { string: 6, fret: 0 },\n  to = { string: 1, fret: 100 }\n} = {}): Position[] {\n  const action = (dot: Position): Position => {\n    return { disabled: true, ...dot };\n  };\n  return transform({ box, from, to, action });\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_join from \"./join\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","/**\n * Source: ftp://ftp.unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt\n */\nvar SUPPORTED_LOCALE = {\n    tr: {\n        regexp: /\\u0130|\\u0049|\\u0049\\u0307/g,\n        map: {\n            : \"\\u0069\",\n            I: \"\\u0131\",\n            I: \"\\u0069\",\n        },\n    },\n    az: {\n        regexp: /\\u0130/g,\n        map: {\n            : \"\\u0069\",\n            I: \"\\u0131\",\n            I: \"\\u0069\",\n        },\n    },\n    lt: {\n        regexp: /\\u0049|\\u004A|\\u012E|\\u00CC|\\u00CD|\\u0128/g,\n        map: {\n            I: \"\\u0069\\u0307\",\n            J: \"\\u006A\\u0307\",\n            : \"\\u012F\\u0307\",\n            : \"\\u0069\\u0307\\u0300\",\n            : \"\\u0069\\u0307\\u0301\",\n            : \"\\u0069\\u0307\\u0303\",\n        },\n    },\n};\n/**\n * Localized lower case.\n */\nexport function localeLowerCase(str, locale) {\n    var lang = SUPPORTED_LOCALE[locale.toLowerCase()];\n    if (lang)\n        return lowerCase(str.replace(lang.regexp, function (m) { return lang.map[m]; }));\n    return lowerCase(str);\n}\n/**\n * Lower case as a function.\n */\nexport function lowerCase(str) {\n    return str.toLowerCase();\n}\n//# sourceMappingURL=index.js.map","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import { lowerCase } from \"lower-case\";\n// Support camel case (\"camelCase\" -> \"camel Case\" and \"CAMELCase\" -> \"CAMEL Case\").\nvar DEFAULT_SPLIT_REGEXP = [/([a-z0-9])([A-Z])/g, /([A-Z])([A-Z][a-z])/g];\n// Remove all non-word characters.\nvar DEFAULT_STRIP_REGEXP = /[^A-Z0-9]+/gi;\n/**\n * Normalize the string into something other libraries can manipulate easier.\n */\nexport function noCase(input, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.splitRegexp, splitRegexp = _a === void 0 ? DEFAULT_SPLIT_REGEXP : _a, _b = options.stripRegexp, stripRegexp = _b === void 0 ? DEFAULT_STRIP_REGEXP : _b, _c = options.transform, transform = _c === void 0 ? lowerCase : _c, _d = options.delimiter, delimiter = _d === void 0 ? \" \" : _d;\n    var result = replace(replace(input, splitRegexp, \"$1\\0$2\"), stripRegexp, \"\\0\");\n    var start = 0;\n    var end = result.length;\n    // Trim the delimiter from around the output string.\n    while (result.charAt(start) === \"\\0\")\n        start++;\n    while (result.charAt(end - 1) === \"\\0\")\n        end--;\n    // Transform each token independently.\n    return result.slice(start, end).split(\"\\0\").map(transform).join(delimiter);\n}\n/**\n * Replace `re` in the input string with the replacement value.\n */\nfunction replace(input, re, value) {\n    if (re instanceof RegExp)\n        return input.replace(re, value);\n    return re.reduce(function (input, re) { return input.replace(re, value); }, input);\n}\n//# sourceMappingURL=index.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { __assign } from \"tslib\";\nimport { noCase } from \"no-case\";\nexport function dotCase(input, options) {\n    if (options === void 0) { options = {}; }\n    return noCase(input, __assign({ delimiter: \".\" }, options));\n}\n//# sourceMappingURL=index.js.map","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { paramCase } from 'change-case';\nimport { Selection, BaseType } from 'd3-selection';\nimport { Position, Options } from './Fretboard';\n\nexport function getStringThickness({\n  stringWidth,\n  stringIndex\n}: {\n  stringWidth: number | [number];\n  stringIndex: number;\n}): number {\n  if (typeof stringWidth === 'number') {\n    return stringWidth;\n  }\n  return stringWidth[stringIndex] || 1;\n}\n\nexport function generateStrings({\n  stringCount,\n  stringWidth,\n  height\n}: {\n  stringCount: number;\n  stringWidth: number | [number];\n  height: number;\n}): number[] {\n  const strings = [];\n  let currentStringWidth = 0;\n\n  for (let i = 0; i < stringCount; i++) {\n    currentStringWidth = getStringThickness({ stringWidth, stringIndex: i });\n    let y = (height / (stringCount - 1)) * i;\n    if (i === 0) {\n      y += currentStringWidth / 2;\n    }\n    if (i === stringCount - 1) {\n      y -= currentStringWidth / 2;\n    }\n    strings.push(y);\n  }\n  return strings;\n}\n\nexport function generateFrets({\n  scaleFrets,\n  fretCount\n}: {\n  scaleFrets: boolean;\n  fretCount: number;\n}): number[] {\n  const fretRatio = Math.pow(2, 1 / 12);\n  const frets = [0];\n\n  for (let i = 1; i <= fretCount; i++) {\n    let x = (100 / fretCount) * i;\n    if (scaleFrets) {\n      x = 100 - 100 / Math.pow(fretRatio, i);\n    }\n    frets.push(x);\n  }\n  return frets.map(x => x / frets[frets.length - 1] * 100);\n}\n\nconst accidentalMap: { symbol: string; replacement: string }[] = [{\n  symbol: '##',\n  replacement: 'double-sharp'\n}, {\n  symbol: 'bb',\n  replacement: 'double-flat'\n}, {\n  symbol: '#',\n  replacement: 'sharp'\n}, {\n  symbol: 'b',\n  replacement: 'flat'\n}];\n\nfunction valueRenderer(key: string, value: string | number | boolean): string {\n  if (typeof value === 'boolean') {\n    return !value ? 'false' : null;\n  }\n  if (key === 'note') {\n    for (let i = 0; i < accidentalMap.length; i++) {\n      const { symbol, replacement } = accidentalMap[i];\n      if (`${value}`.endsWith(symbol)) {\n        return `${`${value}`[0]}-${replacement}`;\n      }\n    }\n    return `${value}`;\n  }\n  return `${value}`;\n}\n\nfunction classRenderer(prefix: string, key: string, value: string | number | boolean): string {\n  return [\n    'dot',\n    prefix,\n    paramCase(key),\n    valueRenderer(key, value),\n  ].filter(x => !!x).join('-');\n}\n\nexport function dotClasses(dot: Position, prefix = ''): string {\n  return [\n    prefix ? `dot-${prefix}` : null,\n    ...Object.entries(dot)\n      .map(([key, value]: [string, string|Array<string>]) => {\n        let valArray: string[];\n        if (!(value instanceof Array)) {\n          valArray = [value];\n        } else {\n          valArray = value;\n        }\n        return valArray.map(value => classRenderer(prefix, key, value)).join(' ');\n      })\n  ].filter(x => !!x).join(' ');\n}\n\nexport function getDimensions({\n  topPadding,\n  bottomPadding,\n  leftPadding,\n  rightPadding,\n  width,\n  height,\n  showFretNumbers,\n  fretNumbersHeight\n}: {\n  topPadding: number;\n  bottomPadding: number;\n  leftPadding: number;\n  rightPadding: number;\n  width: number;\n  height: number;\n  showFretNumbers: boolean;\n  fretNumbersHeight: number;\n}): {\n  totalWidth: number;\n  totalHeight: number;\n} {\n  const totalWidth = width + leftPadding + rightPadding;\n  let totalHeight = height + topPadding + bottomPadding;\n\n  if (showFretNumbers) {\n    totalHeight += fretNumbersHeight;\n  }\n  return { totalWidth, totalHeight };\n}\n\ntype GetPositionParams = {\n  event: MouseEvent;\n  stringsGroup: Selection<BaseType, unknown, HTMLElement, unknown>;\n  leftPadding: number;\n  nutWidth: number;\n  strings: number[];\n  frets: number[];\n  dots: Position[];\n}\n\nexport const getPositionFromMouseCoords = ({\n  event,\n  stringsGroup,\n  leftPadding,\n  nutWidth,\n  strings,\n  frets,\n  dots\n}: GetPositionParams): Position => {\n  const {\n    width: stringsGroupWidth,\n    height: stringsGroupHeight\n  } = (stringsGroup.node() as HTMLElement).getBoundingClientRect();\n  const bounds = (event.target as HTMLElement).getBoundingClientRect();\n  const x = event.clientX - bounds.left;\n  const y = event.clientY - bounds.top;\n\n  let foundString = 0;\n\n  const stringDistance = stringsGroupHeight / (strings.length - 1);\n\n  for (let i = 0; i < strings.length; i++) {\n     if (y < stringDistance * (i + 1)) {\n       foundString = i;\n       break;\n     }\n  }\n\n  let foundFret = -1;\n  const percentX = (Math.max(0, x - leftPadding) / stringsGroupWidth) * 100;\n\n  for (let i = 0; i < frets.length; i++) {\n    if (percentX < frets[i]) {\n      foundFret = i;\n      break;\n    }\n    foundFret = i;\n  }\n\n  if (x < leftPadding + nutWidth) {\n    foundFret = 0;\n  }\n\n  const foundDot = dots.find(({ fret, string }) => fret === foundFret && string === foundString + 1);\n  return foundDot || {\n    string: foundString + 1,\n    fret: foundFret\n  }\n}\n\nexport function createHoverDiv({\n  bottomPadding,\n  showFretNumbers,\n  fretNumbersHeight\n}: Options): HTMLDivElement {\n  const hoverDiv = document.createElement('div');\n  const bottom = bottomPadding\n    + (showFretNumbers ? fretNumbersHeight : 0);\n  hoverDiv.className = 'hoverDiv';\n  hoverDiv.style.position = 'absolute';\n  hoverDiv.style.top = '0';\n  hoverDiv.style.bottom = `${bottom}px`;\n  hoverDiv.style.left = '0';\n  hoverDiv.style.right = '0';\n  return hoverDiv;\n}\n","import { __assign } from \"tslib\";\nimport { dotCase } from \"dot-case\";\nexport function paramCase(input, options) {\n    if (options === void 0) { options = {}; }\n    return dotCase(input, __assign({ delimiter: \"-\" }, options));\n}\n//# sourceMappingURL=index.js.map","export const MIDDLE_FRET = 11;\nexport const THROTTLE_INTERVAL = 50;\nexport const DEFAULT_FRET_COUNT = 15;\n\nexport const DEFAULT_COLORS = {\n    line: '#666',\n    highlight: '#ff636c',\n    dotStroke: '#555',\n    dotFill: 'white',\n    fretNumber: '#00000099',\n    mutedString: '#333',\n    dotText: '#111',\n    barres: '#666'\n};\n\nexport const DEFAULT_DIMENSIONS = {\n    width: 960,\n    height: 150,\n    unit: 20,\n    line: 1,\n    nut: 7\n};\n\nexport const DEFAULT_FONT_FAMILY = 'Arial';\nexport const DEFAULT_FONT_SIZE = 12;\n\nexport const GUITAR_TUNINGS = {\n    default: [\"E2\", \"A2\", \"D3\", \"G3\", \"B3\", \"E4\"],\n    halfStepDown: [\"Eb2\", \"Ab2\", \"Db3\", \"Gb3\", \"Bb3\", \"Eb4\"],\n    dropD: [\"D2\", \"A2\", \"D3\", \"G3\", \"B3\", \"E4\"],\n    openG: [\"D2\", \"G2\", \"D3\", \"G3\", \"B3\", \"D4\"],\n    DADGAD: [\"D2\", \"A2\", \"D3\", \"G3\", \"A3\", \"D4\"]\n};","/**\r\n * Fill a string with a repeated character\r\n *\r\n * @param character\r\n * @param repetition\r\n */\r\nconst fillStr = (s, n) => Array(Math.abs(n) + 1).join(s);\r\nfunction deprecate(original, alternative, fn) {\r\n    return function (...args) {\r\n        // tslint:disable-next-line\r\n        console.warn(`${original} is deprecated. Use ${alternative}.`);\r\n        return fn.apply(this, args);\r\n    };\r\n}\n\nfunction isNamed(src) {\r\n    return src !== null && typeof src === \"object\" && typeof src.name === \"string\"\r\n        ? true\r\n        : false;\r\n}\n\nfunction isPitch(pitch) {\r\n    return pitch !== null &&\r\n        typeof pitch === \"object\" &&\r\n        typeof pitch.step === \"number\" &&\r\n        typeof pitch.alt === \"number\"\r\n        ? true\r\n        : false;\r\n}\r\n// The number of fifths of [C, D, E, F, G, A, B]\r\nconst FIFTHS = [0, 2, 4, -1, 1, 3, 5];\r\n// The number of octaves it span each step\r\nconst STEPS_TO_OCTS = FIFTHS.map((fifths) => Math.floor((fifths * 7) / 12));\r\nfunction encode(pitch) {\r\n    const { step, alt, oct, dir = 1 } = pitch;\r\n    const f = FIFTHS[step] + 7 * alt;\r\n    if (oct === undefined) {\r\n        return [dir * f];\r\n    }\r\n    const o = oct - STEPS_TO_OCTS[step] - 4 * alt;\r\n    return [dir * f, dir * o];\r\n}\r\n// We need to get the steps from fifths\r\n// Fifths for CDEFGAB are [ 0, 2, 4, -1, 1, 3, 5 ]\r\n// We add 1 to fifths to avoid negative numbers, so:\r\n// for [\"F\", \"C\", \"G\", \"D\", \"A\", \"E\", \"B\"] we have:\r\nconst FIFTHS_TO_STEPS = [3, 0, 4, 1, 5, 2, 6];\r\nfunction decode(coord) {\r\n    const [f, o, dir] = coord;\r\n    const step = FIFTHS_TO_STEPS[unaltered(f)];\r\n    const alt = Math.floor((f + 1) / 7);\r\n    if (o === undefined) {\r\n        return { step, alt, dir };\r\n    }\r\n    const oct = o + 4 * alt + STEPS_TO_OCTS[step];\r\n    return { step, alt, oct, dir };\r\n}\r\n// Return the number of fifths as if it were unaltered\r\nfunction unaltered(f) {\r\n    const i = (f + 1) % 7;\r\n    return i < 0 ? 7 + i : i;\r\n}\n\nconst NoNote = { empty: true, name: \"\", pc: \"\", acc: \"\" };\r\nconst cache = new Map();\r\nconst stepToLetter = (step) => \"CDEFGAB\".charAt(step);\r\nconst altToAcc = (alt) => alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt);\r\nconst accToAlt = (acc) => acc[0] === \"b\" ? -acc.length : acc.length;\r\n/**\r\n * Given a note literal (a note name or a note object), returns the Note object\r\n * @example\r\n * note('Bb4') // => { name: \"Bb4\", midi: 70, chroma: 10, ... }\r\n */\r\nfunction note(src) {\r\n    const cached = cache.get(src);\r\n    if (cached) {\r\n        return cached;\r\n    }\r\n    const value = typeof src === \"string\"\r\n        ? parse(src)\r\n        : isPitch(src)\r\n            ? note(pitchName(src))\r\n            : isNamed(src)\r\n                ? note(src.name)\r\n                : NoNote;\r\n    cache.set(src, value);\r\n    return value;\r\n}\r\nconst REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\r\n/**\r\n * @private\r\n */\r\nfunction tokenizeNote(str) {\r\n    const m = REGEX.exec(str);\r\n    return [m[1].toUpperCase(), m[2].replace(/x/g, \"##\"), m[3], m[4]];\r\n}\r\n/**\r\n * @private\r\n */\r\nfunction coordToNote(noteCoord) {\r\n    return note(decode(noteCoord));\r\n}\r\nconst mod = (n, m) => ((n % m) + m) % m;\r\nconst SEMI = [0, 2, 4, 5, 7, 9, 11];\r\nfunction parse(noteName) {\r\n    const tokens = tokenizeNote(noteName);\r\n    if (tokens[0] === \"\" || tokens[3] !== \"\") {\r\n        return NoNote;\r\n    }\r\n    const letter = tokens[0];\r\n    const acc = tokens[1];\r\n    const octStr = tokens[2];\r\n    const step = (letter.charCodeAt(0) + 3) % 7;\r\n    const alt = accToAlt(acc);\r\n    const oct = octStr.length ? +octStr : undefined;\r\n    const coord = encode({ step, alt, oct });\r\n    const name = letter + acc + octStr;\r\n    const pc = letter + acc;\r\n    const chroma = (SEMI[step] + alt + 120) % 12;\r\n    const height = oct === undefined\r\n        ? mod(SEMI[step] + alt, 12) - 12 * 99\r\n        : SEMI[step] + alt + 12 * (oct + 1);\r\n    const midi = height >= 0 && height <= 127 ? height : null;\r\n    const freq = oct === undefined ? null : Math.pow(2, (height - 69) / 12) * 440;\r\n    return {\r\n        empty: false,\r\n        acc,\r\n        alt,\r\n        chroma,\r\n        coord,\r\n        freq,\r\n        height,\r\n        letter,\r\n        midi,\r\n        name,\r\n        oct,\r\n        pc,\r\n        step,\r\n    };\r\n}\r\nfunction pitchName(props) {\r\n    const { step, alt, oct } = props;\r\n    const letter = stepToLetter(step);\r\n    if (!letter) {\r\n        return \"\";\r\n    }\r\n    const pc = letter + altToAcc(alt);\r\n    return oct || oct === 0 ? pc + oct : pc;\r\n}\n\nconst NoInterval = { empty: true, name: \"\", acc: \"\" };\r\n// shorthand tonal notation (with quality after number)\r\nconst INTERVAL_TONAL_REGEX = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\r\n// standard shorthand notation (with quality before number)\r\nconst INTERVAL_SHORTHAND_REGEX = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\r\nconst REGEX$1 = new RegExp(\"^\" + INTERVAL_TONAL_REGEX + \"|\" + INTERVAL_SHORTHAND_REGEX + \"$\");\r\n/**\r\n * @private\r\n */\r\nfunction tokenizeInterval(str) {\r\n    const m = REGEX$1.exec(`${str}`);\r\n    if (m === null) {\r\n        return [\"\", \"\"];\r\n    }\r\n    return m[1] ? [m[1], m[2]] : [m[4], m[3]];\r\n}\r\nconst cache$1 = {};\r\n/**\r\n * Get interval properties. It returns an object with:\r\n *\r\n * - name: the interval name\r\n * - num: the interval number\r\n * - type: 'perfectable' or 'majorable'\r\n * - q: the interval quality (d, m, M, A)\r\n * - dir: interval direction (1 ascending, -1 descending)\r\n * - simple: the simplified number\r\n * - semitones: the size in semitones\r\n * - chroma: the interval chroma\r\n *\r\n * @param {string} interval - the interval name\r\n * @return {Object} the interval properties\r\n *\r\n * @example\r\n * import { interval } from '@tonaljs/core'\r\n * interval('P5').semitones // => 7\r\n * interval('m3').type // => 'majorable'\r\n */\r\nfunction interval(src) {\r\n    return typeof src === \"string\"\r\n        ? cache$1[src] || (cache$1[src] = parse$1(src))\r\n        : isPitch(src)\r\n            ? interval(pitchName$1(src))\r\n            : isNamed(src)\r\n                ? interval(src.name)\r\n                : NoInterval;\r\n}\r\nconst SIZES = [0, 2, 4, 5, 7, 9, 11];\r\nconst TYPES = \"PMMPPMM\";\r\nfunction parse$1(str) {\r\n    const tokens = tokenizeInterval(str);\r\n    if (tokens[0] === \"\") {\r\n        return NoInterval;\r\n    }\r\n    const num = +tokens[0];\r\n    const q = tokens[1];\r\n    const step = (Math.abs(num) - 1) % 7;\r\n    const t = TYPES[step];\r\n    if (t === \"M\" && q === \"P\") {\r\n        return NoInterval;\r\n    }\r\n    const type = t === \"M\" ? \"majorable\" : \"perfectable\";\r\n    const name = \"\" + num + q;\r\n    const dir = num < 0 ? -1 : 1;\r\n    const simple = num === 8 || num === -8 ? num : dir * (step + 1);\r\n    const alt = qToAlt(type, q);\r\n    const oct = Math.floor((Math.abs(num) - 1) / 7);\r\n    const semitones = dir * (SIZES[step] + alt + 12 * oct);\r\n    const chroma = (((dir * (SIZES[step] + alt)) % 12) + 12) % 12;\r\n    const coord = encode({ step, alt, oct, dir });\r\n    return {\r\n        empty: false,\r\n        name,\r\n        num,\r\n        q,\r\n        step,\r\n        alt,\r\n        dir,\r\n        type,\r\n        simple,\r\n        semitones,\r\n        chroma,\r\n        coord,\r\n        oct,\r\n    };\r\n}\r\n/**\r\n * @private\r\n */\r\nfunction coordToInterval(coord) {\r\n    const [f, o = 0] = coord;\r\n    const isDescending = f * 7 + o * 12 < 0;\r\n    const ivl = isDescending ? [-f, -o, -1] : [f, o, 1];\r\n    return interval(decode(ivl));\r\n}\r\nfunction qToAlt(type, q) {\r\n    return (q === \"M\" && type === \"majorable\") ||\r\n        (q === \"P\" && type === \"perfectable\")\r\n        ? 0\r\n        : q === \"m\" && type === \"majorable\"\r\n            ? -1\r\n            : /^A+$/.test(q)\r\n                ? q.length\r\n                : /^d+$/.test(q)\r\n                    ? -1 * (type === \"perfectable\" ? q.length : q.length + 1)\r\n                    : 0;\r\n}\r\n// return the interval name of a pitch\r\nfunction pitchName$1(props) {\r\n    const { step, alt, oct = 0, dir } = props;\r\n    if (!dir) {\r\n        return \"\";\r\n    }\r\n    const num = step + 1 + 7 * oct;\r\n    const d = dir < 0 ? \"-\" : \"\";\r\n    const type = TYPES[step] === \"M\" ? \"majorable\" : \"perfectable\";\r\n    const name = d + num + altToQ(type, alt);\r\n    return name;\r\n}\r\nfunction altToQ(type, alt) {\r\n    if (alt === 0) {\r\n        return type === \"majorable\" ? \"M\" : \"P\";\r\n    }\r\n    else if (alt === -1 && type === \"majorable\") {\r\n        return \"m\";\r\n    }\r\n    else if (alt > 0) {\r\n        return fillStr(\"A\", alt);\r\n    }\r\n    else {\r\n        return fillStr(\"d\", type === \"perfectable\" ? alt : alt + 1);\r\n    }\r\n}\n\n/**\r\n * Transpose a note by an interval.\r\n *\r\n * @param {string} note - the note or note name\r\n * @param {string} interval - the interval or interval name\r\n * @return {string} the transposed note name or empty string if not valid notes\r\n * @example\r\n * import { tranpose } from \"@tonaljs/core\"\r\n * transpose(\"d3\", \"3M\") // => \"F#3\"\r\n * transpose(\"D\", \"3M\") // => \"F#\"\r\n * [\"C\", \"D\", \"E\", \"F\", \"G\"].map(pc => transpose(pc, \"M3)) // => [\"E\", \"F#\", \"G#\", \"A\", \"B\"]\r\n */\r\nfunction transpose(noteName, intervalName) {\r\n    const note$1 = note(noteName);\r\n    const interval$1 = interval(intervalName);\r\n    if (note$1.empty || interval$1.empty) {\r\n        return \"\";\r\n    }\r\n    const noteCoord = note$1.coord;\r\n    const intervalCoord = interval$1.coord;\r\n    const tr = noteCoord.length === 1\r\n        ? [noteCoord[0] + intervalCoord[0]]\r\n        : [noteCoord[0] + intervalCoord[0], noteCoord[1] + intervalCoord[1]];\r\n    return coordToNote(tr).name;\r\n}\r\n/**\r\n * Find the interval distance between two notes or coord classes.\r\n *\r\n * To find distance between coord classes, both notes must be coord classes and\r\n * the interval is always ascending\r\n *\r\n * @param {Note|string} from - the note or note name to calculate distance from\r\n * @param {Note|string} to - the note or note name to calculate distance to\r\n * @return {string} the interval name or empty string if not valid notes\r\n *\r\n */\r\nfunction distance(fromNote, toNote) {\r\n    const from = note(fromNote);\r\n    const to = note(toNote);\r\n    if (from.empty || to.empty) {\r\n        return \"\";\r\n    }\r\n    const fcoord = from.coord;\r\n    const tcoord = to.coord;\r\n    const fifths = tcoord[0] - fcoord[0];\r\n    const octs = fcoord.length === 2 && tcoord.length === 2\r\n        ? tcoord[1] - fcoord[1]\r\n        : -Math.floor((fifths * 7) / 12);\r\n    return coordToInterval([fifths, octs]).name;\r\n}\n\nexport { accToAlt, altToAcc, coordToInterval, coordToNote, decode, deprecate, distance, encode, fillStr, interval, isNamed, isPitch, note, stepToLetter, tokenizeInterval, tokenizeNote, transpose };\n//# sourceMappingURL=index.es.js.map\n","import { note, transpose as transpose$1, coordToNote } from '@tonaljs/core';\nimport { midiToNoteName, freqToMidi } from '@tonaljs/midi';\n\nconst NAMES = [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"];\r\nconst toName = (n) => n.name;\r\nconst onlyNotes = (array) => array.map(note).filter((n) => !n.empty);\r\n/**\r\n * Return the natural note names without octave\r\n * @function\r\n * @example\r\n * Note.names(); // => [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"]\r\n */\r\nfunction names(array) {\r\n    if (array === undefined) {\r\n        return NAMES.slice();\r\n    }\r\n    else if (!Array.isArray(array)) {\r\n        return [];\r\n    }\r\n    else {\r\n        return onlyNotes(array).map(toName);\r\n    }\r\n}\r\n/**\r\n * Get a note from a note name\r\n *\r\n * @function\r\n * @example\r\n * Note.get('Bb4') // => { name: \"Bb4\", midi: 70, chroma: 10, ... }\r\n */\r\nconst get = note;\r\n/**\r\n * Get the note name\r\n * @function\r\n */\r\nconst name = (note) => get(note).name;\r\n/**\r\n * Get the note pitch class name\r\n * @function\r\n */\r\nconst pitchClass = (note) => get(note).pc;\r\n/**\r\n * Get the note accidentals\r\n * @function\r\n */\r\nconst accidentals = (note) => get(note).acc;\r\n/**\r\n * Get the note octave\r\n * @function\r\n */\r\nconst octave = (note) => get(note).oct;\r\n/**\r\n * Get the note midi\r\n * @function\r\n */\r\nconst midi = (note) => get(note).midi;\r\n/**\r\n * Get the note midi\r\n * @function\r\n */\r\nconst freq = (note) => get(note).freq;\r\n/**\r\n * Get the note chroma\r\n * @function\r\n */\r\nconst chroma = (note) => get(note).chroma;\r\n/**\r\n * Given a midi number, returns a note name. Uses flats for altered notes.\r\n *\r\n * @function\r\n * @param {number} midi - the midi note number\r\n * @return {string} the note name\r\n * @example\r\n * Note.fromMidi(61) // => \"Db4\"\r\n * Note.fromMidi(61.7) // => \"D4\"\r\n */\r\nfunction fromMidi(midi) {\r\n    return midiToNoteName(midi);\r\n}\r\n/**\r\n * Given a midi number, returns a note name. Uses flats for altered notes.\r\n */\r\nfunction fromFreq(freq) {\r\n    return midiToNoteName(freqToMidi(freq));\r\n}\r\n/**\r\n * Given a midi number, returns a note name. Uses flats for altered notes.\r\n */\r\nfunction fromFreqSharps(freq) {\r\n    return midiToNoteName(freqToMidi(freq), { sharps: true });\r\n}\r\n/**\r\n * Given a midi number, returns a note name. Uses flats for altered notes.\r\n *\r\n * @function\r\n * @param {number} midi - the midi note number\r\n * @return {string} the note name\r\n * @example\r\n * Note.fromMidiSharps(61) // => \"C#4\"\r\n */\r\nfunction fromMidiSharps(midi) {\r\n    return midiToNoteName(midi, { sharps: true });\r\n}\r\n/**\r\n * Transpose a note by an interval\r\n */\r\nconst transpose = transpose$1;\r\nconst tr = transpose$1;\r\n/**\r\n * Transpose by an interval.\r\n * @function\r\n * @param {string} interval\r\n * @return {function} a function that transposes by the given interval\r\n * @example\r\n * [\"C\", \"D\", \"E\"].map(Note.transposeBy(\"5P\"));\r\n * // => [\"G\", \"A\", \"B\"]\r\n */\r\nconst transposeBy = (interval) => (note) => transpose(note, interval);\r\nconst trBy = transposeBy;\r\n/**\r\n * Transpose from a note\r\n * @function\r\n * @param {string} note\r\n * @return {function}  a function that transposes the the note by an interval\r\n * [\"1P\", \"3M\", \"5P\"].map(Note.transposeFrom(\"C\"));\r\n * // => [\"C\", \"E\", \"G\"]\r\n */\r\nconst transposeFrom = (note) => (interval) => transpose(note, interval);\r\nconst trFrom = transposeFrom;\r\n/**\r\n * Transpose a note by a number of perfect fifths.\r\n *\r\n * @function\r\n * @param {string} note - the note name\r\n * @param {number} fifhts - the number of fifths\r\n * @return {string} the transposed note name\r\n *\r\n * @example\r\n * import { transposeFifths } from \"@tonaljs/note\"\r\n * transposeFifths(\"G4\", 1) // => \"D\"\r\n * [0, 1, 2, 3, 4].map(fifths => transposeFifths(\"C\", fifths)) // => [\"C\", \"G\", \"D\", \"A\", \"E\"]\r\n */\r\nfunction transposeFifths(noteName, fifths) {\r\n    const note = get(noteName);\r\n    if (note.empty) {\r\n        return \"\";\r\n    }\r\n    const [nFifths, nOcts] = note.coord;\r\n    const transposed = nOcts === undefined\r\n        ? coordToNote([nFifths + fifths])\r\n        : coordToNote([nFifths + fifths, nOcts]);\r\n    return transposed.name;\r\n}\r\nconst trFifths = transposeFifths;\r\nconst ascending = (a, b) => a.height - b.height;\r\nconst descending = (a, b) => b.height - a.height;\r\nfunction sortedNames(notes, comparator) {\r\n    comparator = comparator || ascending;\r\n    return onlyNotes(notes).sort(comparator).map(toName);\r\n}\r\nfunction sortedUniqNames(notes) {\r\n    return sortedNames(notes, ascending).filter((n, i, a) => i === 0 || n !== a[i - 1]);\r\n}\r\n/**\r\n * Simplify a note\r\n *\r\n * @function\r\n * @param {string} note - the note to be simplified\r\n * - sameAccType: default true. Use same kind of accidentals that source\r\n * @return {string} the simplified note or '' if not valid note\r\n * @example\r\n * simplify(\"C##\") // => \"D\"\r\n * simplify(\"C###\") // => \"D#\"\r\n * simplify(\"C###\")\r\n * simplify(\"B#4\") // => \"C5\"\r\n */\r\nconst simplify = (noteName) => {\r\n    const note = get(noteName);\r\n    if (note.empty) {\r\n        return \"\";\r\n    }\r\n    return midiToNoteName(note.midi || note.chroma, {\r\n        sharps: note.alt > 0,\r\n        pitchClass: note.midi === null,\r\n    });\r\n};\r\n/**\r\n * Get enharmonic of a note\r\n *\r\n * @function\r\n * @param {string} note\r\n * @param [string] - [optional] Destination pitch class\r\n * @return {string} the enharmonic note name or '' if not valid note\r\n * @example\r\n * Note.enharmonic(\"Db\") // => \"C#\"\r\n * Note.enharmonic(\"C\") // => \"C\"\r\n * Note.enharmonic(\"F2\",\"E#\") // => \"E#2\"\r\n */\r\nfunction enharmonic(noteName, destName) {\r\n    const src = get(noteName);\r\n    if (src.empty) {\r\n        return \"\";\r\n    }\r\n    // destination: use given or generate one\r\n    const dest = get(destName ||\r\n        midiToNoteName(src.midi || src.chroma, {\r\n            sharps: src.alt < 0,\r\n            pitchClass: true,\r\n        }));\r\n    // ensure destination is valid\r\n    if (dest.empty || dest.chroma !== src.chroma) {\r\n        return \"\";\r\n    }\r\n    // if src has no octave, no need to calculate anything else\r\n    if (src.oct === undefined) {\r\n        return dest.pc;\r\n    }\r\n    // detect any octave overflow\r\n    const srcChroma = src.chroma - src.alt;\r\n    const destChroma = dest.chroma - dest.alt;\r\n    const destOctOffset = srcChroma > 11 || destChroma < 0\r\n        ? -1\r\n        : srcChroma < 0 || destChroma > 11\r\n            ? +1\r\n            : 0;\r\n    // calculate the new octave\r\n    const destOct = src.oct + destOctOffset;\r\n    return dest.pc + destOct;\r\n}\r\nvar index = {\r\n    names,\r\n    get,\r\n    name,\r\n    pitchClass,\r\n    accidentals,\r\n    octave,\r\n    midi,\r\n    ascending,\r\n    descending,\r\n    sortedNames,\r\n    sortedUniqNames,\r\n    fromMidi,\r\n    fromMidiSharps,\r\n    freq,\r\n    fromFreq,\r\n    fromFreqSharps,\r\n    chroma,\r\n    transpose,\r\n    tr,\r\n    transposeBy,\r\n    trBy,\r\n    transposeFrom,\r\n    trFrom,\r\n    transposeFifths,\r\n    trFifths,\r\n    simplify,\r\n    enharmonic,\r\n};\n\nexport default index;\nexport { accidentals, ascending, chroma, descending, enharmonic, freq, fromFreq, fromFreqSharps, fromMidi, fromMidiSharps, get, midi, name, names, octave, pitchClass, simplify, sortedNames, sortedUniqNames, tr, trBy, trFifths, trFrom, transpose, transposeBy, transposeFifths, transposeFrom };\n//# sourceMappingURL=index.es.js.map\n","import { interval, distance as distance$1, coordToInterval } from '@tonaljs/core';\n\n/**\r\n * Get the natural list of names\r\n */\r\nfunction names() {\r\n    return \"1P 2M 3M 4P 5P 6m 7m\".split(\" \");\r\n}\r\n/**\r\n * Get properties of an interval\r\n *\r\n * @function\r\n * @example\r\n * Interval.get('P4') // => {\"alt\": 0,  \"dir\": 1,  \"name\": \"4P\", \"num\": 4, \"oct\": 0, \"q\": \"P\", \"semitones\": 5, \"simple\": 4, \"step\": 3, \"type\": \"perfectable\"}\r\n */\r\nconst get = interval;\r\n/**\r\n * Get name of an interval\r\n *\r\n * @function\r\n * @example\r\n * Interval.name('4P') // => \"4P\"\r\n * Interval.name('P4') // => \"4P\"\r\n * Interval.name('C4') // => \"\"\r\n */\r\nconst name = (name) => interval(name).name;\r\n/**\r\n * Get semitones of an interval\r\n * @function\r\n * @example\r\n * Interval.semitones('P4') // => 5\r\n */\r\nconst semitones = (name) => interval(name).semitones;\r\n/**\r\n * Get quality of an interval\r\n * @function\r\n * @example\r\n * Interval.quality('P4') // => \"P\"\r\n */\r\nconst quality = (name) => interval(name).q;\r\n/**\r\n * Get number of an interval\r\n * @function\r\n * @example\r\n * Interval.num('P4') // => 4\r\n */\r\nconst num = (name) => interval(name).num;\r\n/**\r\n * Get the simplified version of an interval.\r\n *\r\n * @function\r\n * @param {string} interval - the interval to simplify\r\n * @return {string} the simplified interval\r\n *\r\n * @example\r\n * Interval.simplify(\"9M\") // => \"2M\"\r\n * Interval.simplify(\"2M\") // => \"2M\"\r\n * Interval.simplify(\"-2M\") // => \"7m\"\r\n * [\"8P\", \"9M\", \"10M\", \"11P\", \"12P\", \"13M\", \"14M\", \"15P\"].map(Interval.simplify)\r\n * // => [ \"8P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\", \"8P\" ]\r\n */\r\nfunction simplify(name) {\r\n    const i = interval(name);\r\n    return i.empty ? \"\" : i.simple + i.q;\r\n}\r\n/**\r\n * Get the inversion (https://en.wikipedia.org/wiki/Inversion_(music)#Intervals)\r\n * of an interval.\r\n *\r\n * @function\r\n * @param {string} interval - the interval to invert in interval shorthand\r\n * notation or interval array notation\r\n * @return {string} the inverted interval\r\n *\r\n * @example\r\n * Interval.invert(\"3m\") // => \"6M\"\r\n * Interval.invert(\"2M\") // => \"7m\"\r\n */\r\nfunction invert(name) {\r\n    const i = interval(name);\r\n    if (i.empty) {\r\n        return \"\";\r\n    }\r\n    const step = (7 - i.step) % 7;\r\n    const alt = i.type === \"perfectable\" ? -i.alt : -(i.alt + 1);\r\n    return interval({ step, alt, oct: i.oct, dir: i.dir }).name;\r\n}\r\n// interval numbers\r\nconst IN = [1, 2, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7];\r\n// interval qualities\r\nconst IQ = \"P m M m M P d P m M m M\".split(\" \");\r\n/**\r\n * Get interval name from semitones number. Since there are several interval\r\n * names for the same number, the name it's arbitrary, but deterministic.\r\n *\r\n * @param {Integer} num - the number of semitones (can be negative)\r\n * @return {string} the interval name\r\n * @example\r\n * Interval.fromSemitones(7) // => \"5P\"\r\n * Interval.fromSemitones(-7) // => \"-5P\"\r\n */\r\nfunction fromSemitones(semitones) {\r\n    const d = semitones < 0 ? -1 : 1;\r\n    const n = Math.abs(semitones);\r\n    const c = n % 12;\r\n    const o = Math.floor(n / 12);\r\n    return d * (IN[c] + 7 * o) + IQ[c];\r\n}\r\n/**\r\n * Find interval between two notes\r\n *\r\n * @example\r\n * Interval.distance(\"C4\", \"G4\"); // => \"5P\"\r\n */\r\nconst distance = distance$1;\r\n/**\r\n * Adds two intervals\r\n *\r\n * @function\r\n * @param {string} interval1\r\n * @param {string} interval2\r\n * @return {string} the added interval name\r\n * @example\r\n * Interval.add(\"3m\", \"5P\") // => \"7m\"\r\n */\r\nconst add = combinator((a, b) => [a[0] + b[0], a[1] + b[1]]);\r\n/**\r\n * Returns a function that adds an interval\r\n *\r\n * @function\r\n * @example\r\n * ['1P', '2M', '3M'].map(Interval.addTo('5P')) // => [\"5P\", \"6M\", \"7M\"]\r\n */\r\nconst addTo = (interval) => (other) => add(interval, other);\r\n/**\r\n * Subtracts two intervals\r\n *\r\n * @function\r\n * @param {string} minuendInterval\r\n * @param {string} subtrahendInterval\r\n * @return {string} the substracted interval name\r\n * @example\r\n * Interval.substract('5P', '3M') // => '3m'\r\n * Interval.substract('3M', '5P') // => '-3m'\r\n */\r\nconst substract = combinator((a, b) => [a[0] - b[0], a[1] - b[1]]);\r\nfunction transposeFifths(interval, fifths) {\r\n    const ivl = get(interval);\r\n    if (ivl.empty)\r\n        return \"\";\r\n    const [nFifths, nOcts, dir] = ivl.coord;\r\n    return coordToInterval([nFifths + fifths, nOcts, dir]).name;\r\n}\r\nvar index = {\r\n    names,\r\n    get,\r\n    name,\r\n    num,\r\n    semitones,\r\n    quality,\r\n    fromSemitones,\r\n    distance,\r\n    invert,\r\n    simplify,\r\n    add,\r\n    addTo,\r\n    substract,\r\n    transposeFifths,\r\n};\r\nfunction combinator(fn) {\r\n    return (a, b) => {\r\n        const coordA = interval(a).coord;\r\n        const coordB = interval(b).coord;\r\n        if (coordA && coordB) {\r\n            const coord = fn(coordA, coordB);\r\n            return coordToInterval(coord).name;\r\n        }\r\n    };\r\n}\n\nexport default index;\nexport { add, addTo, distance, fromSemitones, get, invert, name, names, num, quality, semitones, simplify, substract, transposeFifths };\n//# sourceMappingURL=index.es.js.map\n","// ascending range\r\nfunction ascR(b, n) {\r\n    const a = [];\r\n    // tslint:disable-next-line:curly\r\n    for (; n--; a[n] = n + b)\r\n        ;\r\n    return a;\r\n}\r\n// descending range\r\nfunction descR(b, n) {\r\n    const a = [];\r\n    // tslint:disable-next-line:curly\r\n    for (; n--; a[n] = b - n)\r\n        ;\r\n    return a;\r\n}\r\n/**\r\n * Creates a numeric range\r\n *\r\n * @param {number} from\r\n * @param {number} to\r\n * @return {Array<number>}\r\n *\r\n * @example\r\n * range(-2, 2) // => [-2, -1, 0, 1, 2]\r\n * range(2, -2) // => [2, 1, 0, -1, -2]\r\n */\r\nfunction range(from, to) {\r\n    return from < to ? ascR(from, to - from + 1) : descR(from, from - to + 1);\r\n}\r\n/**\r\n * Rotates a list a number of times. It\"s completly agnostic about the\r\n * contents of the list.\r\n *\r\n * @param {Integer} times - the number of rotations\r\n * @param {Array} collection\r\n * @return {Array} the rotated collection\r\n *\r\n * @example\r\n * rotate(1, [1, 2, 3]) // => [2, 3, 1]\r\n */\r\nfunction rotate(times, arr) {\r\n    const len = arr.length;\r\n    const n = ((times % len) + len) % len;\r\n    return arr.slice(n, len).concat(arr.slice(0, n));\r\n}\r\n/**\r\n * Return a copy of the collection with the null values removed\r\n * @function\r\n * @param {Array} collection\r\n * @return {Array}\r\n *\r\n * @example\r\n * compact([\"a\", \"b\", null, \"c\"]) // => [\"a\", \"b\", \"c\"]\r\n */\r\nfunction compact(arr) {\r\n    return arr.filter((n) => n === 0 || n);\r\n}\r\n/**\r\n * Randomizes the order of the specified collection in-place, using the FisherYates shuffle.\r\n *\r\n * @function\r\n * @param {Array} collection\r\n * @return {Array} the collection shuffled\r\n *\r\n * @example\r\n * shuffle([\"C\", \"D\", \"E\", \"F\"]) // => [...]\r\n */\r\nfunction shuffle(arr, rnd = Math.random) {\r\n    let i;\r\n    let t;\r\n    let m = arr.length;\r\n    while (m) {\r\n        i = Math.floor(rnd() * m--);\r\n        t = arr[m];\r\n        arr[m] = arr[i];\r\n        arr[i] = t;\r\n    }\r\n    return arr;\r\n}\r\n/**\r\n * Get all permutations of an collection\r\n *\r\n * @param {Array} collection - the collection\r\n * @return {Array<Array>} an collection with all the permutations\r\n * @example\r\n * permutations([\"a\", \"b\", \"c\"])) // =>\r\n * [\r\n *   [\"a\", \"b\", \"c\"],\r\n *   [\"b\", \"a\", \"c\"],\r\n *   [\"b\", \"c\", \"a\"],\r\n *   [\"a\", \"c\", \"b\"],\r\n *   [\"c\", \"a\", \"b\"],\r\n *   [\"c\", \"b\", \"a\"]\r\n * ]\r\n */\r\nfunction permutations(arr) {\r\n    if (arr.length === 0) {\r\n        return [[]];\r\n    }\r\n    return permutations(arr.slice(1)).reduce((acc, perm) => {\r\n        return acc.concat(arr.map((e, pos) => {\r\n            const newPerm = perm.slice();\r\n            newPerm.splice(pos, 0, arr[0]);\r\n            return newPerm;\r\n        }));\r\n    }, []);\r\n}\r\nvar index = {\r\n    compact,\r\n    permutations,\r\n    range,\r\n    rotate,\r\n    shuffle,\r\n};\n\nexport default index;\nexport { compact, permutations, range, rotate, shuffle };\n//# sourceMappingURL=index.es.js.map\n","import { range, compact, rotate } from '@tonaljs/collection';\nimport { deprecate, note, interval } from '@tonaljs/core';\n\nconst EmptyPcset = {\r\n    empty: true,\r\n    name: \"\",\r\n    setNum: 0,\r\n    chroma: \"000000000000\",\r\n    normalized: \"000000000000\",\r\n    intervals: [],\r\n};\r\n// UTILITIES\r\nconst setNumToChroma = (num) => Number(num).toString(2);\r\nconst chromaToNumber = (chroma) => parseInt(chroma, 2);\r\nconst REGEX = /^[01]{12}$/;\r\nfunction isChroma(set) {\r\n    return REGEX.test(set);\r\n}\r\nconst isPcsetNum = (set) => typeof set === \"number\" && set >= 0 && set <= 4095;\r\nconst isPcset = (set) => set && isChroma(set.chroma);\r\nconst cache = { [EmptyPcset.chroma]: EmptyPcset };\r\n/**\r\n * Get the pitch class set of a collection of notes or set number or chroma\r\n */\r\nfunction get(src) {\r\n    const chroma = isChroma(src)\r\n        ? src\r\n        : isPcsetNum(src)\r\n            ? setNumToChroma(src)\r\n            : Array.isArray(src)\r\n                ? listToChroma(src)\r\n                : isPcset(src)\r\n                    ? src.chroma\r\n                    : EmptyPcset.chroma;\r\n    return (cache[chroma] = cache[chroma] || chromaToPcset(chroma));\r\n}\r\n/**\r\n * Use Pcset.properties\r\n * @function\r\n * @deprecated\r\n */\r\nconst pcset = deprecate(\"Pcset.pcset\", \"Pcset.get\", get);\r\n/**\r\n * Get pitch class set chroma\r\n * @function\r\n * @example\r\n * Pcset.chroma([\"c\", \"d\", \"e\"]); //=> \"101010000000\"\r\n */\r\nconst chroma = (set) => get(set).chroma;\r\n/**\r\n * Get intervals (from C) of a set\r\n * @function\r\n * @example\r\n * Pcset.intervals([\"c\", \"d\", \"e\"]); //=>\r\n */\r\nconst intervals = (set) => get(set).intervals;\r\n/**\r\n * Get pitch class set number\r\n * @function\r\n * @example\r\n * Pcset.num([\"c\", \"d\", \"e\"]); //=> 2192\r\n */\r\nconst num = (set) => get(set).setNum;\r\nconst IVLS = [\r\n    \"1P\",\r\n    \"2m\",\r\n    \"2M\",\r\n    \"3m\",\r\n    \"3M\",\r\n    \"4P\",\r\n    \"5d\",\r\n    \"5P\",\r\n    \"6m\",\r\n    \"6M\",\r\n    \"7m\",\r\n    \"7M\",\r\n];\r\n/**\r\n * @private\r\n * Get the intervals of a pcset *starting from C*\r\n * @param {Set} set - the pitch class set\r\n * @return {IntervalName[]} an array of interval names or an empty array\r\n * if not a valid pitch class set\r\n */\r\nfunction chromaToIntervals(chroma) {\r\n    const intervals = [];\r\n    for (let i = 0; i < 12; i++) {\r\n        // tslint:disable-next-line:curly\r\n        if (chroma.charAt(i) === \"1\")\r\n            intervals.push(IVLS[i]);\r\n    }\r\n    return intervals;\r\n}\r\n/**\r\n * Get a list of all possible pitch class sets (all possible chromas) *having\r\n * C as root*. There are 2048 different chromas. If you want them with another\r\n * note you have to transpose it\r\n *\r\n * @see http://allthescales.org/\r\n * @return {Array<PcsetChroma>} an array of possible chromas from '10000000000' to '11111111111'\r\n */\r\nfunction chromas() {\r\n    return range(2048, 4095).map(setNumToChroma);\r\n}\r\n/**\r\n * Given a a list of notes or a pcset chroma, produce the rotations\r\n * of the chroma discarding the ones that starts with \"0\"\r\n *\r\n * This is used, for example, to get all the modes of a scale.\r\n *\r\n * @param {Array|string} set - the list of notes or pitchChr of the set\r\n * @param {boolean} normalize - (Optional, true by default) remove all\r\n * the rotations that starts with \"0\"\r\n * @return {Array<string>} an array with all the modes of the chroma\r\n *\r\n * @example\r\n * Pcset.modes([\"C\", \"D\", \"E\"]).map(Pcset.intervals)\r\n */\r\nfunction modes(set, normalize = true) {\r\n    const pcs = get(set);\r\n    const binary = pcs.chroma.split(\"\");\r\n    return compact(binary.map((_, i) => {\r\n        const r = rotate(i, binary);\r\n        return normalize && r[0] === \"0\" ? null : r.join(\"\");\r\n    }));\r\n}\r\n/**\r\n * Test if two pitch class sets are numentical\r\n *\r\n * @param {Array|string} set1 - one of the pitch class sets\r\n * @param {Array|string} set2 - the other pitch class set\r\n * @return {boolean} true if they are equal\r\n * @example\r\n * Pcset.isEqual([\"c2\", \"d3\"], [\"c5\", \"d2\"]) // => true\r\n */\r\nfunction isEqual(s1, s2) {\r\n    return get(s1).setNum === get(s2).setNum;\r\n}\r\n/**\r\n * Create a function that test if a collection of notes is a\r\n * subset of a given set\r\n *\r\n * The function is curryfied.\r\n *\r\n * @param {PcsetChroma|NoteName[]} set - the superset to test against (chroma or\r\n * list of notes)\r\n * @return{function(PcsetChroma|NoteNames[]): boolean} a function accepting a set\r\n * to test against (chroma or list of notes)\r\n * @example\r\n * const inCMajor = Pcset.isSubsetOf([\"C\", \"E\", \"G\"])\r\n * inCMajor([\"e6\", \"c4\"]) // => true\r\n * inCMajor([\"e6\", \"c4\", \"d3\"]) // => false\r\n */\r\nfunction isSubsetOf(set) {\r\n    const s = get(set).setNum;\r\n    return (notes) => {\r\n        const o = get(notes).setNum;\r\n        // tslint:disable-next-line: no-bitwise\r\n        return s && s !== o && (o & s) === o;\r\n    };\r\n}\r\n/**\r\n * Create a function that test if a collection of notes is a\r\n * superset of a given set (it contains all notes and at least one more)\r\n *\r\n * @param {Set} set - an array of notes or a chroma set string to test against\r\n * @return {(subset: Set): boolean} a function that given a set\r\n * returns true if is a subset of the first one\r\n * @example\r\n * const extendsCMajor = Pcset.isSupersetOf([\"C\", \"E\", \"G\"])\r\n * extendsCMajor([\"e6\", \"a\", \"c4\", \"g2\"]) // => true\r\n * extendsCMajor([\"c6\", \"e4\", \"g3\"]) // => false\r\n */\r\nfunction isSupersetOf(set) {\r\n    const s = get(set).setNum;\r\n    return (notes) => {\r\n        const o = get(notes).setNum;\r\n        // tslint:disable-next-line: no-bitwise\r\n        return s && s !== o && (o | s) === o;\r\n    };\r\n}\r\n/**\r\n * Test if a given pitch class set includes a note\r\n *\r\n * @param {Array<string>} set - the base set to test against\r\n * @param {string} note - the note to test\r\n * @return {boolean} true if the note is included in the pcset\r\n *\r\n * Can be partially applied\r\n *\r\n * @example\r\n * const isNoteInCMajor = isNoteIncludedIn(['C', 'E', 'G'])\r\n * isNoteInCMajor('C4') // => true\r\n * isNoteInCMajor('C#4') // => false\r\n */\r\nfunction isNoteIncludedIn(set) {\r\n    const s = get(set);\r\n    return (noteName) => {\r\n        const n = note(noteName);\r\n        return s && !n.empty && s.chroma.charAt(n.chroma) === \"1\";\r\n    };\r\n}\r\n/** @deprecated use: isNoteIncludedIn */\r\nconst includes = isNoteIncludedIn;\r\n/**\r\n * Filter a list with a pitch class set\r\n *\r\n * @param {Array|string} set - the pitch class set notes\r\n * @param {Array|string} notes - the note list to be filtered\r\n * @return {Array} the filtered notes\r\n *\r\n * @example\r\n * Pcset.filter([\"C\", \"D\", \"E\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"d2\", \"c3\", \"d3\" ])\r\n * Pcset.filter([\"C2\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"c3\" ])\r\n */\r\nfunction filter(set) {\r\n    const isIncluded = isNoteIncludedIn(set);\r\n    return (notes) => {\r\n        return notes.filter(isIncluded);\r\n    };\r\n}\r\nvar index = {\r\n    get,\r\n    chroma,\r\n    num,\r\n    intervals,\r\n    chromas,\r\n    isSupersetOf,\r\n    isSubsetOf,\r\n    isNoteIncludedIn,\r\n    isEqual,\r\n    filter,\r\n    modes,\r\n    // deprecated\r\n    pcset,\r\n};\r\n//// PRIVATE ////\r\nfunction chromaRotations(chroma) {\r\n    const binary = chroma.split(\"\");\r\n    return binary.map((_, i) => rotate(i, binary).join(\"\"));\r\n}\r\nfunction chromaToPcset(chroma) {\r\n    const setNum = chromaToNumber(chroma);\r\n    const normalizedNum = chromaRotations(chroma)\r\n        .map(chromaToNumber)\r\n        .filter((n) => n >= 2048)\r\n        .sort()[0];\r\n    const normalized = setNumToChroma(normalizedNum);\r\n    const intervals = chromaToIntervals(chroma);\r\n    return {\r\n        empty: false,\r\n        name: \"\",\r\n        setNum,\r\n        chroma,\r\n        normalized,\r\n        intervals,\r\n    };\r\n}\r\nfunction listToChroma(set) {\r\n    if (set.length === 0) {\r\n        return EmptyPcset.chroma;\r\n    }\r\n    let pitch;\r\n    const binary = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let i = 0; i < set.length; i++) {\r\n        pitch = note(set[i]);\r\n        // tslint:disable-next-line: curly\r\n        if (pitch.empty)\r\n            pitch = interval(set[i]);\r\n        // tslint:disable-next-line: curly\r\n        if (!pitch.empty)\r\n            binary[pitch.chroma] = 1;\r\n    }\r\n    return binary.join(\"\");\r\n}\n\nexport default index;\nexport { EmptyPcset, chromaToIntervals, chromas, filter, get, includes, isEqual, isNoteIncludedIn, isSubsetOf, isSupersetOf, modes, pcset };\n//# sourceMappingURL=index.es.js.map\n","import { deprecate } from '@tonaljs/core';\nimport { get as get$1, EmptyPcset } from '@tonaljs/pcset';\n\n/**\r\n * @private\r\n * Chord List\r\n * Source: https://en.wikibooks.org/wiki/Music_Theory/Complete_List_of_Chord_Patterns\r\n * Format: [\"intervals\", \"full name\", \"abrv1 abrv2\"]\r\n */\r\nconst CHORDS = [\r\n    // ==Major==\r\n    [\"1P 3M 5P\", \"major\", \"M ^ \"],\r\n    [\"1P 3M 5P 7M\", \"major seventh\", \"maj7  ma7 M7 Maj7 ^7\"],\r\n    [\"1P 3M 5P 7M 9M\", \"major ninth\", \"maj9 9 ^9\"],\r\n    [\"1P 3M 5P 7M 9M 13M\", \"major thirteenth\", \"maj13 Maj13 ^13\"],\r\n    [\"1P 3M 5P 6M\", \"sixth\", \"6 add6 add13 M6\"],\r\n    [\"1P 3M 5P 6M 9M\", \"sixth/ninth\", \"6/9 69 M69\"],\r\n    [\"1P 3M 6m 7M\", \"major seventh flat sixth\", \"M7b6 ^7b6\"],\r\n    [\r\n        \"1P 3M 5P 7M 11A\",\r\n        \"major seventh sharp eleventh\",\r\n        \"maj#4 #4 #11 M7#11 ^7#11 maj7#11\",\r\n    ],\r\n    // ==Minor==\r\n    // '''Normal'''\r\n    [\"1P 3m 5P\", \"minor\", \"m min -\"],\r\n    [\"1P 3m 5P 7m\", \"minor seventh\", \"m7 min7 mi7 -7\"],\r\n    [\r\n        \"1P 3m 5P 7M\",\r\n        \"minor/major seventh\",\r\n        \"m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7\",\r\n    ],\r\n    [\"1P 3m 5P 6M\", \"minor sixth\", \"m6 -6\"],\r\n    [\"1P 3m 5P 7m 9M\", \"minor ninth\", \"m9 -9\"],\r\n    [\"1P 3m 5P 7M 9M\", \"minor/major ninth\", \"mM9 mMaj9 -^9\"],\r\n    [\"1P 3m 5P 7m 9M 11P\", \"minor eleventh\", \"m11 -11\"],\r\n    [\"1P 3m 5P 7m 9M 13M\", \"minor thirteenth\", \"m13 -13\"],\r\n    // '''Diminished'''\r\n    [\"1P 3m 5d\", \"diminished\", \"dim  o\"],\r\n    [\"1P 3m 5d 7d\", \"diminished seventh\", \"dim7 7 o7\"],\r\n    [\"1P 3m 5d 7m\", \"half-diminished\", \"m7b5  -7b5 h7 h\"],\r\n    // ==Dominant/Seventh==\r\n    // '''Normal'''\r\n    [\"1P 3M 5P 7m\", \"dominant seventh\", \"7 dom\"],\r\n    [\"1P 3M 5P 7m 9M\", \"dominant ninth\", \"9\"],\r\n    [\"1P 3M 5P 7m 9M 13M\", \"dominant thirteenth\", \"13\"],\r\n    [\"1P 3M 5P 7m 11A\", \"lydian dominant seventh\", \"7#11 7#4\"],\r\n    // '''Altered'''\r\n    [\"1P 3M 5P 7m 9m\", \"dominant flat ninth\", \"7b9\"],\r\n    [\"1P 3M 5P 7m 9A\", \"dominant sharp ninth\", \"7#9\"],\r\n    [\"1P 3M 7m 9m\", \"altered\", \"alt7\"],\r\n    // '''Suspended'''\r\n    [\"1P 4P 5P\", \"suspended fourth\", \"sus4 sus\"],\r\n    [\"1P 2M 5P\", \"suspended second\", \"sus2\"],\r\n    [\"1P 4P 5P 7m\", \"suspended fourth seventh\", \"7sus4 7sus\"],\r\n    [\"1P 5P 7m 9M 11P\", \"eleventh\", \"11\"],\r\n    [\r\n        \"1P 4P 5P 7m 9m\",\r\n        \"suspended fourth flat ninth\",\r\n        \"b9sus phryg 7b9sus 7b9sus4\",\r\n    ],\r\n    // ==Other==\r\n    [\"1P 5P\", \"fifth\", \"5\"],\r\n    [\"1P 3M 5A\", \"augmented\", \"aug + +5 ^#5\"],\r\n    [\"1P 3m 5A\", \"minor augmented\", \"m#5 -#5 m+\"],\r\n    [\"1P 3M 5A 7M\", \"augmented seventh\", \"maj7#5 maj7+5 +maj7 ^7#5\"],\r\n    [\r\n        \"1P 3M 5P 7M 9M 11A\",\r\n        \"major sharp eleventh (lydian)\",\r\n        \"maj9#11 9#11 ^9#11\",\r\n    ],\r\n    // ==Legacy==\r\n    [\"1P 2M 4P 5P\", \"\", \"sus24 sus4add9\"],\r\n    [\"1P 3M 5A 7M 9M\", \"\", \"maj9#5 Maj9#5\"],\r\n    [\"1P 3M 5A 7m\", \"\", \"7#5 +7 7+ 7aug aug7\"],\r\n    [\"1P 3M 5A 7m 9A\", \"\", \"7#5#9 7#9#5 7alt\"],\r\n    [\"1P 3M 5A 7m 9M\", \"\", \"9#5 9+\"],\r\n    [\"1P 3M 5A 7m 9M 11A\", \"\", \"9#5#11\"],\r\n    [\"1P 3M 5A 7m 9m\", \"\", \"7#5b9 7b9#5\"],\r\n    [\"1P 3M 5A 7m 9m 11A\", \"\", \"7#5b9#11\"],\r\n    [\"1P 3M 5A 9A\", \"\", \"+add#9\"],\r\n    [\"1P 3M 5A 9M\", \"\", \"M#5add9 +add9\"],\r\n    [\"1P 3M 5P 6M 11A\", \"\", \"M6#11 M6b5 6#11 6b5\"],\r\n    [\"1P 3M 5P 6M 7M 9M\", \"\", \"M7add13\"],\r\n    [\"1P 3M 5P 6M 9M 11A\", \"\", \"69#11\"],\r\n    [\"1P 3m 5P 6M 9M\", \"\", \"m69 -69\"],\r\n    [\"1P 3M 5P 6m 7m\", \"\", \"7b6\"],\r\n    [\"1P 3M 5P 7M 9A 11A\", \"\", \"maj7#9#11\"],\r\n    [\"1P 3M 5P 7M 9M 11A 13M\", \"\", \"M13#11 maj13#11 M13+4 M13#4\"],\r\n    [\"1P 3M 5P 7M 9m\", \"\", \"M7b9\"],\r\n    [\"1P 3M 5P 7m 11A 13m\", \"\", \"7#11b13 7b5b13\"],\r\n    [\"1P 3M 5P 7m 13M\", \"\", \"7add6 67 7add13\"],\r\n    [\"1P 3M 5P 7m 9A 11A\", \"\", \"7#9#11 7b5#9 7#9b5\"],\r\n    [\"1P 3M 5P 7m 9A 11A 13M\", \"\", \"13#9#11\"],\r\n    [\"1P 3M 5P 7m 9A 11A 13m\", \"\", \"7#9#11b13\"],\r\n    [\"1P 3M 5P 7m 9A 13M\", \"\", \"13#9\"],\r\n    [\"1P 3M 5P 7m 9A 13m\", \"\", \"7#9b13\"],\r\n    [\"1P 3M 5P 7m 9M 11A\", \"\", \"9#11 9+4 9#4\"],\r\n    [\"1P 3M 5P 7m 9M 11A 13M\", \"\", \"13#11 13+4 13#4\"],\r\n    [\"1P 3M 5P 7m 9M 11A 13m\", \"\", \"9#11b13 9b5b13\"],\r\n    [\"1P 3M 5P 7m 9m 11A\", \"\", \"7b9#11 7b5b9 7b9b5\"],\r\n    [\"1P 3M 5P 7m 9m 11A 13M\", \"\", \"13b9#11\"],\r\n    [\"1P 3M 5P 7m 9m 11A 13m\", \"\", \"7b9b13#11 7b9#11b13 7b5b9b13\"],\r\n    [\"1P 3M 5P 7m 9m 13M\", \"\", \"13b9\"],\r\n    [\"1P 3M 5P 7m 9m 13m\", \"\", \"7b9b13\"],\r\n    [\"1P 3M 5P 7m 9m 9A\", \"\", \"7b9#9\"],\r\n    [\"1P 3M 5P 9M\", \"\", \"Madd9 2 add9 add2\"],\r\n    [\"1P 3M 5P 9m\", \"\", \"Maddb9\"],\r\n    [\"1P 3M 5d\", \"\", \"Mb5\"],\r\n    [\"1P 3M 5d 6M 7m 9M\", \"\", \"13b5\"],\r\n    [\"1P 3M 5d 7M\", \"\", \"M7b5\"],\r\n    [\"1P 3M 5d 7M 9M\", \"\", \"M9b5\"],\r\n    [\"1P 3M 5d 7m\", \"\", \"7b5\"],\r\n    [\"1P 3M 5d 7m 9M\", \"\", \"9b5\"],\r\n    [\"1P 3M 7m\", \"\", \"7no5\"],\r\n    [\"1P 3M 7m 13m\", \"\", \"7b13\"],\r\n    [\"1P 3M 7m 9M\", \"\", \"9no5\"],\r\n    [\"1P 3M 7m 9M 13M\", \"\", \"13no5\"],\r\n    [\"1P 3M 7m 9M 13m\", \"\", \"9b13\"],\r\n    [\"1P 3m 4P 5P\", \"\", \"madd4\"],\r\n    [\"1P 3m 5P 6m 7M\", \"\", \"mMaj7b6\"],\r\n    [\"1P 3m 5P 6m 7M 9M\", \"\", \"mMaj9b6\"],\r\n    [\"1P 3m 5P 7m 11P\", \"\", \"m7add11 m7add4\"],\r\n    [\"1P 3m 5P 9M\", \"\", \"madd9\"],\r\n    [\"1P 3m 5d 6M 7M\", \"\", \"o7M7\"],\r\n    [\"1P 3m 5d 7M\", \"\", \"oM7\"],\r\n    [\"1P 3m 6m 7M\", \"\", \"mb6M7\"],\r\n    [\"1P 3m 6m 7m\", \"\", \"m7#5\"],\r\n    [\"1P 3m 6m 7m 9M\", \"\", \"m9#5\"],\r\n    [\"1P 3m 5A 7m 9M 11P\", \"\", \"m11A\"],\r\n    [\"1P 3m 6m 9m\", \"\", \"mb6b9\"],\r\n    [\"1P 2M 3m 5d 7m\", \"\", \"m9b5\"],\r\n    [\"1P 4P 5A 7M\", \"\", \"M7#5sus4\"],\r\n    [\"1P 4P 5A 7M 9M\", \"\", \"M9#5sus4\"],\r\n    [\"1P 4P 5A 7m\", \"\", \"7#5sus4\"],\r\n    [\"1P 4P 5P 7M\", \"\", \"M7sus4\"],\r\n    [\"1P 4P 5P 7M 9M\", \"\", \"M9sus4\"],\r\n    [\"1P 4P 5P 7m 9M\", \"\", \"9sus4 9sus\"],\r\n    [\"1P 4P 5P 7m 9M 13M\", \"\", \"13sus4 13sus\"],\r\n    [\"1P 4P 5P 7m 9m 13m\", \"\", \"7sus4b9b13 7b9b13sus4\"],\r\n    [\"1P 4P 7m 10m\", \"\", \"4 quartal\"],\r\n    [\"1P 5P 7m 9m 11P\", \"\", \"11b9\"],\r\n];\n\nconst NoChordType = {\r\n    ...EmptyPcset,\r\n    name: \"\",\r\n    quality: \"Unknown\",\r\n    intervals: [],\r\n    aliases: [],\r\n};\r\nlet dictionary = [];\r\nlet index = {};\r\n/**\r\n * Given a chord name or chroma, return the chord properties\r\n * @param {string} source - chord name or pitch class set chroma\r\n * @example\r\n * import { get } from 'tonaljs/chord-type'\r\n * get('major') // => { name: 'major', ... }\r\n */\r\nfunction get(type) {\r\n    return index[type] || NoChordType;\r\n}\r\nconst chordType = deprecate(\"ChordType.chordType\", \"ChordType.get\", get);\r\n/**\r\n * Get all chord (long) names\r\n */\r\nfunction names() {\r\n    return dictionary.map((chord) => chord.name).filter((x) => x);\r\n}\r\n/**\r\n * Get all chord symbols\r\n */\r\nfunction symbols() {\r\n    return dictionary.map((chord) => chord.aliases[0]).filter((x) => x);\r\n}\r\n/**\r\n * Keys used to reference chord types\r\n */\r\nfunction keys() {\r\n    return Object.keys(index);\r\n}\r\n/**\r\n * Return a list of all chord types\r\n */\r\nfunction all() {\r\n    return dictionary.slice();\r\n}\r\nconst entries = deprecate(\"ChordType.entries\", \"ChordType.all\", all);\r\n/**\r\n * Clear the dictionary\r\n */\r\nfunction removeAll() {\r\n    dictionary = [];\r\n    index = {};\r\n}\r\n/**\r\n * Add a chord to the dictionary.\r\n * @param intervals\r\n * @param aliases\r\n * @param [fullName]\r\n */\r\nfunction add(intervals, aliases, fullName) {\r\n    const quality = getQuality(intervals);\r\n    const chord = {\r\n        ...get$1(intervals),\r\n        name: fullName || \"\",\r\n        quality,\r\n        intervals,\r\n        aliases,\r\n    };\r\n    dictionary.push(chord);\r\n    if (chord.name) {\r\n        index[chord.name] = chord;\r\n    }\r\n    index[chord.setNum] = chord;\r\n    index[chord.chroma] = chord;\r\n    chord.aliases.forEach((alias) => addAlias(chord, alias));\r\n}\r\nfunction addAlias(chord, alias) {\r\n    index[alias] = chord;\r\n}\r\nfunction getQuality(intervals) {\r\n    const has = (interval) => intervals.indexOf(interval) !== -1;\r\n    return has(\"5A\")\r\n        ? \"Augmented\"\r\n        : has(\"3M\")\r\n            ? \"Major\"\r\n            : has(\"5d\")\r\n                ? \"Diminished\"\r\n                : has(\"3m\")\r\n                    ? \"Minor\"\r\n                    : \"Unknown\";\r\n}\r\nCHORDS.forEach(([ivls, fullName, names]) => add(ivls.split(\" \"), names.split(\" \"), fullName));\r\ndictionary.sort((a, b) => a.setNum - b.setNum);\r\nvar index$1 = {\r\n    names,\r\n    symbols,\r\n    get,\r\n    all,\r\n    add,\r\n    removeAll,\r\n    keys,\r\n    // deprecated\r\n    entries,\r\n    chordType,\r\n};\n\nexport default index$1;\nexport { add, addAlias, all, chordType, entries, get, keys, names, removeAll, symbols };\n//# sourceMappingURL=index.es.js.map\n","import { deprecate } from '@tonaljs/core';\nimport { EmptyPcset, get as get$1 } from '@tonaljs/pcset';\n\n// SCALES\r\n// Format: [\"intervals\", \"name\", \"alias1\", \"alias2\", ...]\r\nconst SCALES = [\r\n    // 5-note scales\r\n    [\"1P 2M 3M 5P 6M\", \"major pentatonic\", \"pentatonic\"],\r\n    [\"1P 3M 4P 5P 7M\", \"ionian pentatonic\"],\r\n    [\"1P 3M 4P 5P 7m\", \"mixolydian pentatonic\", \"indian\"],\r\n    [\"1P 2M 4P 5P 6M\", \"ritusen\"],\r\n    [\"1P 2M 4P 5P 7m\", \"egyptian\"],\r\n    [\"1P 3M 4P 5d 7m\", \"neopolitan major pentatonic\"],\r\n    [\"1P 3m 4P 5P 6m\", \"vietnamese 1\"],\r\n    [\"1P 2m 3m 5P 6m\", \"pelog\"],\r\n    [\"1P 2m 4P 5P 6m\", \"kumoijoshi\"],\r\n    [\"1P 2M 3m 5P 6m\", \"hirajoshi\"],\r\n    [\"1P 2m 4P 5d 7m\", \"iwato\"],\r\n    [\"1P 2m 4P 5P 7m\", \"in-sen\"],\r\n    [\"1P 3M 4A 5P 7M\", \"lydian pentatonic\", \"chinese\"],\r\n    [\"1P 3m 4P 6m 7m\", \"malkos raga\"],\r\n    [\"1P 3m 4P 5d 7m\", \"locrian pentatonic\", \"minor seven flat five pentatonic\"],\r\n    [\"1P 3m 4P 5P 7m\", \"minor pentatonic\", \"vietnamese 2\"],\r\n    [\"1P 3m 4P 5P 6M\", \"minor six pentatonic\"],\r\n    [\"1P 2M 3m 5P 6M\", \"flat three pentatonic\", \"kumoi\"],\r\n    [\"1P 2M 3M 5P 6m\", \"flat six pentatonic\"],\r\n    [\"1P 2m 3M 5P 6M\", \"scriabin\"],\r\n    [\"1P 3M 5d 6m 7m\", \"whole tone pentatonic\"],\r\n    [\"1P 3M 4A 5A 7M\", \"lydian #5P pentatonic\"],\r\n    [\"1P 3M 4A 5P 7m\", \"lydian dominant pentatonic\"],\r\n    [\"1P 3m 4P 5P 7M\", \"minor #7M pentatonic\"],\r\n    [\"1P 3m 4d 5d 7m\", \"super locrian pentatonic\"],\r\n    // 6-note scales\r\n    [\"1P 2M 3m 4P 5P 7M\", \"minor hexatonic\"],\r\n    [\"1P 2A 3M 5P 5A 7M\", \"augmented\"],\r\n    [\"1P 2M 3m 3M 5P 6M\", \"major blues\"],\r\n    [\"1P 2M 4P 5P 6M 7m\", \"piongio\"],\r\n    [\"1P 2m 3M 4A 6M 7m\", \"prometheus neopolitan\"],\r\n    [\"1P 2M 3M 4A 6M 7m\", \"prometheus\"],\r\n    [\"1P 2m 3M 5d 6m 7m\", \"mystery #1\"],\r\n    [\"1P 2m 3M 4P 5A 6M\", \"six tone symmetric\"],\r\n    [\"1P 2M 3M 4A 5A 7m\", \"whole tone\", \"messiaen's mode #1\"],\r\n    [\"1P 2m 4P 4A 5P 7M\", \"messiaen's mode #5\"],\r\n    [\"1P 3m 4P 5d 5P 7m\", \"minor blues\", \"blues\"],\r\n    // 7-note scales\r\n    [\"1P 2M 3M 4P 5d 6m 7m\", \"locrian major\", \"arabian\"],\r\n    [\"1P 2m 3M 4A 5P 6m 7M\", \"double harmonic lydian\"],\r\n    [\"1P 2M 3m 4P 5P 6m 7M\", \"harmonic minor\"],\r\n    [\r\n        \"1P 2m 3m 4d 5d 6m 7m\",\r\n        \"altered\",\r\n        \"super locrian\",\r\n        \"diminished whole tone\",\r\n        \"pomeroy\",\r\n    ],\r\n    [\"1P 2M 3m 4P 5d 6m 7m\", \"locrian #2\", \"half-diminished\", \"aeolian b5\"],\r\n    [\r\n        \"1P 2M 3M 4P 5P 6m 7m\",\r\n        \"mixolydian b6\",\r\n        \"melodic minor fifth mode\",\r\n        \"hindu\",\r\n    ],\r\n    [\"1P 2M 3M 4A 5P 6M 7m\", \"lydian dominant\", \"lydian b7\", \"overtone\"],\r\n    [\"1P 2M 3M 4A 5P 6M 7M\", \"lydian\"],\r\n    [\"1P 2M 3M 4A 5A 6M 7M\", \"lydian augmented\"],\r\n    [\r\n        \"1P 2m 3m 4P 5P 6M 7m\",\r\n        \"dorian b2\",\r\n        \"phrygian #6\",\r\n        \"melodic minor second mode\",\r\n    ],\r\n    [\"1P 2M 3m 4P 5P 6M 7M\", \"melodic minor\"],\r\n    [\"1P 2m 3m 4P 5d 6m 7m\", \"locrian\"],\r\n    [\r\n        \"1P 2m 3m 4d 5d 6m 7d\",\r\n        \"ultralocrian\",\r\n        \"superlocrian bb7\",\r\n        \"superlocrian diminished\",\r\n    ],\r\n    [\"1P 2m 3m 4P 5d 6M 7m\", \"locrian 6\", \"locrian natural 6\", \"locrian sharp 6\"],\r\n    [\"1P 2A 3M 4P 5P 5A 7M\", \"augmented heptatonic\"],\r\n    [\"1P 2M 3m 5d 5P 6M 7m\", \"romanian minor\"],\r\n    [\"1P 2M 3m 4A 5P 6M 7m\", \"dorian #4\"],\r\n    [\"1P 2M 3m 4A 5P 6M 7M\", \"lydian diminished\"],\r\n    [\"1P 2m 3m 4P 5P 6m 7m\", \"phrygian\"],\r\n    [\"1P 2M 3M 4A 5A 7m 7M\", \"leading whole tone\"],\r\n    [\"1P 2M 3M 4A 5P 6m 7m\", \"lydian minor\"],\r\n    [\"1P 2m 3M 4P 5P 6m 7m\", \"phrygian dominant\", \"spanish\", \"phrygian major\"],\r\n    [\"1P 2m 3m 4P 5P 6m 7M\", \"balinese\"],\r\n    [\"1P 2m 3m 4P 5P 6M 7M\", \"neopolitan major\"],\r\n    [\"1P 2M 3m 4P 5P 6m 7m\", \"aeolian\", \"minor\"],\r\n    [\"1P 2M 3M 4P 5P 6m 7M\", \"harmonic major\"],\r\n    [\"1P 2m 3M 4P 5P 6m 7M\", \"double harmonic major\", \"gypsy\"],\r\n    [\"1P 2M 3m 4P 5P 6M 7m\", \"dorian\"],\r\n    [\"1P 2M 3m 4A 5P 6m 7M\", \"hungarian minor\"],\r\n    [\"1P 2A 3M 4A 5P 6M 7m\", \"hungarian major\"],\r\n    [\"1P 2m 3M 4P 5d 6M 7m\", \"oriental\"],\r\n    [\"1P 2m 3m 3M 4A 5P 7m\", \"flamenco\"],\r\n    [\"1P 2m 3m 4A 5P 6m 7M\", \"todi raga\"],\r\n    [\"1P 2M 3M 4P 5P 6M 7m\", \"mixolydian\", \"dominant\"],\r\n    [\"1P 2m 3M 4P 5d 6m 7M\", \"persian\"],\r\n    [\"1P 2M 3M 4P 5P 6M 7M\", \"major\", \"ionian\"],\r\n    [\"1P 2m 3M 5d 6m 7m 7M\", \"enigmatic\"],\r\n    [\r\n        \"1P 2M 3M 4P 5A 6M 7M\",\r\n        \"major augmented\",\r\n        \"major #5\",\r\n        \"ionian augmented\",\r\n        \"ionian #5\",\r\n    ],\r\n    [\"1P 2A 3M 4A 5P 6M 7M\", \"lydian #9\"],\r\n    // 8-note scales\r\n    [\"1P 2m 2M 4P 4A 5P 6m 7M\", \"messiaen's mode #4\"],\r\n    [\"1P 2m 3M 4P 4A 5P 6m 7M\", \"purvi raga\"],\r\n    [\"1P 2m 3m 3M 4P 5P 6m 7m\", \"spanish heptatonic\"],\r\n    [\"1P 2M 3M 4P 5P 6M 7m 7M\", \"bebop\"],\r\n    [\"1P 2M 3m 3M 4P 5P 6M 7m\", \"bebop minor\"],\r\n    [\"1P 2M 3M 4P 5P 5A 6M 7M\", \"bebop major\"],\r\n    [\"1P 2m 3m 4P 5d 5P 6m 7m\", \"bebop locrian\"],\r\n    [\"1P 2M 3m 4P 5P 6m 7m 7M\", \"minor bebop\"],\r\n    [\"1P 2M 3m 4P 5d 6m 6M 7M\", \"diminished\", \"whole-half diminished\"],\r\n    [\"1P 2M 3M 4P 5d 5P 6M 7M\", \"ichikosucho\"],\r\n    [\"1P 2M 3m 4P 5P 6m 6M 7M\", \"minor six diminished\"],\r\n    [\r\n        \"1P 2m 3m 3M 4A 5P 6M 7m\",\r\n        \"half-whole diminished\",\r\n        \"dominant diminished\",\r\n        \"messiaen's mode #2\",\r\n    ],\r\n    [\"1P 3m 3M 4P 5P 6M 7m 7M\", \"kafi raga\"],\r\n    [\"1P 2M 3M 4P 4A 5A 6A 7M\", \"messiaen's mode #6\"],\r\n    // 9-note scales\r\n    [\"1P 2M 3m 3M 4P 5d 5P 6M 7m\", \"composite blues\"],\r\n    [\"1P 2M 3m 3M 4A 5P 6m 7m 7M\", \"messiaen's mode #3\"],\r\n    // 10-note scales\r\n    [\"1P 2m 2M 3m 4P 4A 5P 6m 6M 7M\", \"messiaen's mode #7\"],\r\n    // 12-note scales\r\n    [\"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\", \"chromatic\"],\r\n];\n\nconst NoScaleType = {\r\n    ...EmptyPcset,\r\n    intervals: [],\r\n    aliases: [],\r\n};\r\nlet dictionary = [];\r\nlet index = {};\r\nfunction names() {\r\n    return dictionary.map((scale) => scale.name);\r\n}\r\n/**\r\n * Given a scale name or chroma, return the scale properties\r\n *\r\n * @param {string} type - scale name or pitch class set chroma\r\n * @example\r\n * import { get } from 'tonaljs/scale-type'\r\n * get('major') // => { name: 'major', ... }\r\n */\r\nfunction get(type) {\r\n    return index[type] || NoScaleType;\r\n}\r\nconst scaleType = deprecate(\"ScaleDictionary.scaleType\", \"ScaleType.get\", get);\r\n/**\r\n * Return a list of all scale types\r\n */\r\nfunction all() {\r\n    return dictionary.slice();\r\n}\r\nconst entries = deprecate(\"ScaleDictionary.entries\", \"ScaleType.all\", all);\r\n/**\r\n * Keys used to reference scale types\r\n */\r\nfunction keys() {\r\n    return Object.keys(index);\r\n}\r\n/**\r\n * Clear the dictionary\r\n */\r\nfunction removeAll() {\r\n    dictionary = [];\r\n    index = {};\r\n}\r\n/**\r\n * Add a scale into dictionary\r\n * @param intervals\r\n * @param name\r\n * @param aliases\r\n */\r\nfunction add(intervals, name, aliases = []) {\r\n    const scale = { ...get$1(intervals), name, intervals, aliases };\r\n    dictionary.push(scale);\r\n    index[scale.name] = scale;\r\n    index[scale.setNum] = scale;\r\n    index[scale.chroma] = scale;\r\n    scale.aliases.forEach((alias) => addAlias(scale, alias));\r\n    return scale;\r\n}\r\nfunction addAlias(scale, alias) {\r\n    index[alias] = scale;\r\n}\r\nSCALES.forEach(([ivls, name, ...aliases]) => add(ivls.split(\" \"), name, aliases));\r\nvar index$1 = {\r\n    names,\r\n    get,\r\n    all,\r\n    add,\r\n    removeAll,\r\n    keys,\r\n    // deprecated\r\n    entries,\r\n    scaleType,\r\n};\n\nexport default index$1;\nexport { NoScaleType, add, addAlias, all, entries, get, keys, names, removeAll, scaleType };\n//# sourceMappingURL=index.es.js.map\n","import { all } from '@tonaljs/chord-type';\nimport { rotate, range } from '@tonaljs/collection';\nimport { note, transpose, deprecate } from '@tonaljs/core';\nimport { sortedUniqNames } from '@tonaljs/note';\nimport { isSubsetOf, isSupersetOf, modes } from '@tonaljs/pcset';\nimport { names as names$1, get as get$1, all as all$1 } from '@tonaljs/scale-type';\n\n/**\r\n * References:\r\n * - https://www.researchgate.net/publication/327567188_An_Algorithm_for_Spelling_the_Pitches_of_Any_Musical_Scale\r\n * @module scale\r\n */\r\nconst NoScale = {\r\n    empty: true,\r\n    name: \"\",\r\n    type: \"\",\r\n    tonic: null,\r\n    setNum: NaN,\r\n    chroma: \"\",\r\n    normalized: \"\",\r\n    aliases: [],\r\n    notes: [],\r\n    intervals: [],\r\n};\r\n/**\r\n * Given a string with a scale name and (optionally) a tonic, split\r\n * that components.\r\n *\r\n * It retuns an array with the form [ name, tonic ] where tonic can be a\r\n * note name or null and name can be any arbitrary string\r\n * (this function doesn\"t check if that scale name exists)\r\n *\r\n * @function\r\n * @param {string} name - the scale name\r\n * @return {Array} an array [tonic, name]\r\n * @example\r\n * tokenize(\"C mixolydean\") // => [\"C\", \"mixolydean\"]\r\n * tokenize(\"anything is valid\") // => [\"\", \"anything is valid\"]\r\n * tokenize() // => [\"\", \"\"]\r\n */\r\nfunction tokenize(name) {\r\n    if (typeof name !== \"string\") {\r\n        return [\"\", \"\"];\r\n    }\r\n    const i = name.indexOf(\" \");\r\n    const tonic = note(name.substring(0, i));\r\n    if (tonic.empty) {\r\n        const n = note(name);\r\n        return n.empty ? [\"\", name] : [n.name, \"\"];\r\n    }\r\n    const type = name.substring(tonic.name.length + 1);\r\n    return [tonic.name, type.length ? type : \"\"];\r\n}\r\n/**\r\n * Get all scale names\r\n * @function\r\n */\r\nconst names = names$1;\r\n/**\r\n * Get a Scale from a scale name.\r\n */\r\nfunction get(src) {\r\n    const tokens = Array.isArray(src) ? src : tokenize(src);\r\n    const tonic = note(tokens[0]).name;\r\n    const st = get$1(tokens[1]);\r\n    if (st.empty) {\r\n        return NoScale;\r\n    }\r\n    const type = st.name;\r\n    const notes = tonic\r\n        ? st.intervals.map((i) => transpose(tonic, i))\r\n        : [];\r\n    const name = tonic ? tonic + \" \" + type : type;\r\n    return { ...st, name, type, tonic, notes };\r\n}\r\nconst scale = deprecate(\"Scale.scale\", \"Scale.get\", get);\r\n/**\r\n * Get all chords that fits a given scale\r\n *\r\n * @function\r\n * @param {string} name - the scale name\r\n * @return {Array<string>} - the chord names\r\n *\r\n * @example\r\n * scaleChords(\"pentatonic\") // => [\"5\", \"64\", \"M\", \"M6\", \"Madd9\", \"Msus2\"]\r\n */\r\nfunction scaleChords(name) {\r\n    const s = get(name);\r\n    const inScale = isSubsetOf(s.chroma);\r\n    return all()\r\n        .filter((chord) => inScale(chord.chroma))\r\n        .map((chord) => chord.aliases[0]);\r\n}\r\n/**\r\n * Get all scales names that are a superset of the given one\r\n * (has the same notes and at least one more)\r\n *\r\n * @function\r\n * @param {string} name\r\n * @return {Array} a list of scale names\r\n * @example\r\n * extended(\"major\") // => [\"bebop\", \"bebop dominant\", \"bebop major\", \"chromatic\", \"ichikosucho\"]\r\n */\r\nfunction extended(name) {\r\n    const s = get(name);\r\n    const isSuperset = isSupersetOf(s.chroma);\r\n    return all$1()\r\n        .filter((scale) => isSuperset(scale.chroma))\r\n        .map((scale) => scale.name);\r\n}\r\n/**\r\n * Find all scales names that are a subset of the given one\r\n * (has less notes but all from the given scale)\r\n *\r\n * @function\r\n * @param {string} name\r\n * @return {Array} a list of scale names\r\n *\r\n * @example\r\n * reduced(\"major\") // => [\"ionian pentatonic\", \"major pentatonic\", \"ritusen\"]\r\n */\r\nfunction reduced(name) {\r\n    const isSubset = isSubsetOf(get(name).chroma);\r\n    return all$1()\r\n        .filter((scale) => isSubset(scale.chroma))\r\n        .map((scale) => scale.name);\r\n}\r\n/**\r\n * Given an array of notes, return the scale: a pitch class set starting from\r\n * the first note of the array\r\n *\r\n * @function\r\n * @param {string[]} notes\r\n * @return {string[]} pitch classes with same tonic\r\n * @example\r\n * scaleNotes(['C4', 'c3', 'C5', 'C4', 'c4']) // => [\"C\"]\r\n * scaleNotes(['D4', 'c#5', 'A5', 'F#6']) // => [\"D\", \"F#\", \"A\", \"C#\"]\r\n */\r\nfunction scaleNotes(notes) {\r\n    const pcset = notes.map((n) => note(n).pc).filter((x) => x);\r\n    const tonic = pcset[0];\r\n    const scale = sortedUniqNames(pcset);\r\n    return rotate(scale.indexOf(tonic), scale);\r\n}\r\n/**\r\n * Find mode names of a scale\r\n *\r\n * @function\r\n * @param {string} name - scale name\r\n * @example\r\n * modeNames(\"C pentatonic\") // => [\r\n *   [\"C\", \"major pentatonic\"],\r\n *   [\"D\", \"egyptian\"],\r\n *   [\"E\", \"malkos raga\"],\r\n *   [\"G\", \"ritusen\"],\r\n *   [\"A\", \"minor pentatonic\"]\r\n * ]\r\n */\r\nfunction modeNames(name) {\r\n    const s = get(name);\r\n    if (s.empty) {\r\n        return [];\r\n    }\r\n    const tonics = s.tonic ? s.notes : s.intervals;\r\n    return modes(s.chroma)\r\n        .map((chroma, i) => {\r\n        const modeName = get(chroma).name;\r\n        return modeName ? [tonics[i], modeName] : [\"\", \"\"];\r\n    })\r\n        .filter((x) => x[0]);\r\n}\r\nfunction getNoteNameOf(scale) {\r\n    const names = Array.isArray(scale) ? scaleNotes(scale) : get(scale).notes;\r\n    const chromas = names.map((name) => note(name).chroma);\r\n    return (noteOrMidi) => {\r\n        const height = typeof noteOrMidi === \"number\" ? noteOrMidi : note(noteOrMidi).height;\r\n        if (height === undefined)\r\n            return undefined;\r\n        const chroma = height % 12;\r\n        const oct = Math.floor(height / 12) - 1;\r\n        const position = chromas.indexOf(chroma);\r\n        if (position === -1)\r\n            return undefined;\r\n        return names[position] + oct;\r\n    };\r\n}\r\nfunction rangeOf(scale) {\r\n    const getName = getNoteNameOf(scale);\r\n    return (fromNote, toNote) => {\r\n        const from = note(fromNote).height;\r\n        const to = note(toNote).height;\r\n        if (from === undefined || to === undefined)\r\n            return [];\r\n        return range(from, to)\r\n            .map(getName)\r\n            .filter((x) => x);\r\n    };\r\n}\r\nvar index = {\r\n    get,\r\n    names,\r\n    extended,\r\n    modeNames,\r\n    reduced,\r\n    scaleChords,\r\n    scaleNotes,\r\n    tokenize,\r\n    rangeOf,\r\n    // deprecated\r\n    scale,\r\n};\n\nexport default index;\nexport { extended, get, modeNames, names, rangeOf, reduced, scale, scaleChords, scaleNotes, tokenize };\n//# sourceMappingURL=index.es.js.map\n","import { rotate } from '@tonaljs/collection';\nimport { deprecate, transpose } from '@tonaljs/core';\nimport { simplify, transposeFifths } from '@tonaljs/interval';\nimport { chromaToIntervals, EmptyPcset } from '@tonaljs/pcset';\n\nconst MODES = [\r\n    [0, 2773, 0, \"ionian\", \"\", \"Maj7\", \"major\"],\r\n    [1, 2902, 2, \"dorian\", \"m\", \"m7\"],\r\n    [2, 3418, 4, \"phrygian\", \"m\", \"m7\"],\r\n    [3, 2741, -1, \"lydian\", \"\", \"Maj7\"],\r\n    [4, 2774, 1, \"mixolydian\", \"\", \"7\"],\r\n    [5, 2906, 3, \"aeolian\", \"m\", \"m7\", \"minor\"],\r\n    [6, 3434, 5, \"locrian\", \"dim\", \"m7b5\"],\r\n];\r\nconst NoMode = {\r\n    ...EmptyPcset,\r\n    name: \"\",\r\n    alt: 0,\r\n    modeNum: NaN,\r\n    triad: \"\",\r\n    seventh: \"\",\r\n    aliases: [],\r\n};\r\nconst modes = MODES.map(toMode);\r\nconst index = {};\r\nmodes.forEach((mode) => {\r\n    index[mode.name] = mode;\r\n    mode.aliases.forEach((alias) => {\r\n        index[alias] = mode;\r\n    });\r\n});\r\n/**\r\n * Get a Mode by it's name\r\n *\r\n * @example\r\n * get('dorian')\r\n * // =>\r\n * // {\r\n * //   intervals: [ '1P', '2M', '3m', '4P', '5P', '6M', '7m' ],\r\n * //   modeNum: 1,\r\n * //   chroma: '101101010110',\r\n * //   normalized: '101101010110',\r\n * //   name: 'dorian',\r\n * //   setNum: 2902,\r\n * //   alt: 2,\r\n * //   triad: 'm',\r\n * //   seventh: 'm7',\r\n * //   aliases: []\r\n * // }\r\n */\r\nfunction get(name) {\r\n    return typeof name === \"string\"\r\n        ? index[name.toLowerCase()] || NoMode\r\n        : name && name.name\r\n            ? get(name.name)\r\n            : NoMode;\r\n}\r\nconst mode = deprecate(\"Mode.mode\", \"Mode.get\", get);\r\n/**\r\n * Get a list of all modes\r\n */\r\nfunction all() {\r\n    return modes.slice();\r\n}\r\nconst entries = deprecate(\"Mode.mode\", \"Mode.all\", all);\r\n/**\r\n * Get a list of all mode names\r\n */\r\nfunction names() {\r\n    return modes.map((mode) => mode.name);\r\n}\r\nfunction toMode(mode) {\r\n    const [modeNum, setNum, alt, name, triad, seventh, alias] = mode;\r\n    const aliases = alias ? [alias] : [];\r\n    const chroma = Number(setNum).toString(2);\r\n    const intervals = chromaToIntervals(chroma);\r\n    return {\r\n        empty: false,\r\n        intervals,\r\n        modeNum,\r\n        chroma,\r\n        normalized: chroma,\r\n        name,\r\n        setNum,\r\n        alt,\r\n        triad,\r\n        seventh,\r\n        aliases,\r\n    };\r\n}\r\nfunction notes(modeName, tonic) {\r\n    return get(modeName).intervals.map((ivl) => transpose(tonic, ivl));\r\n}\r\nfunction chords(chords) {\r\n    return (modeName, tonic) => {\r\n        const mode = get(modeName);\r\n        if (mode.empty)\r\n            return [];\r\n        const triads = rotate(mode.modeNum, chords);\r\n        const tonics = mode.intervals.map((i) => transpose(tonic, i));\r\n        return triads.map((triad, i) => tonics[i] + triad);\r\n    };\r\n}\r\nconst triads = chords(MODES.map((x) => x[4]));\r\nconst seventhChords = chords(MODES.map((x) => x[5]));\r\nfunction distance(destination, source) {\r\n    const from = get(source);\r\n    const to = get(destination);\r\n    if (from.empty || to.empty)\r\n        return \"\";\r\n    return simplify(transposeFifths(\"1P\", to.alt - from.alt));\r\n}\r\nfunction relativeTonic(destination, source, tonic) {\r\n    return transpose(tonic, distance(destination, source));\r\n}\r\nvar index$1 = {\r\n    get,\r\n    names,\r\n    all,\r\n    distance,\r\n    relativeTonic,\r\n    notes,\r\n    triads,\r\n    seventhChords,\r\n    // deprecated\r\n    entries,\r\n    mode,\r\n};\n\nexport default index$1;\nexport { all, distance, entries, get, mode, names, notes, relativeTonic, seventhChords, triads };\n//# sourceMappingURL=index.es.js.map\n","import { chroma as getChroma } from '@tonaljs/note';\nimport { get as getMode } from '@tonaljs/mode';\nimport { Position } from '../../fretboard/Fretboard';\n\nexport enum Systems {\n    pentatonic = 'pentatonic',\n    CAGED = 'CAGED',\n    TNPS = 'TNPS'\n}\n\ntype ScaleDefinition = {\n    box: string[];\n    baseChroma: number;\n    baseOctave: number;\n}\n\ntype GetBoxParams = {\n    root: string;\n    box: number|string;\n    mode?: number|string;\n    system: Systems;\n}\n\nconst DEFAULT_MODE = 0;\nconst DEFAULT_PENTATONIC_MODE = 5;\nconst CAGED_ORDER = 'GEDCA';\n\nconst CAGEDDefinition: ScaleDefinition[] = [\n    {\n        box: [\n            '-6-71',\n            '-34-5',\n            '71-2-',\n            '-5-6-',\n            '-2-34',\n            '-6-71'\n        ],\n        baseChroma: getChroma('G#'),\n        baseOctave: 2\n    },        \n    {\n        box: [\n            '71-2',\n            '-5-6',\n            '2-34',\n            '6-71',\n            '34-5',\n            '71-2'\n        ],\n        baseChroma: getChroma('E#'),\n        baseOctave: 2\n    },    \n    {\n        box: [\n            '-2-34',\n            '-6-71',\n            '34-5',\n            '71-2-',\n            '-5-6-',\n            '-2-34'\n        ],\n        baseChroma: getChroma('D#'),\n        baseOctave: 3\n    },    \n    {\n        box: [\n            '34-5',\n            '71-2',\n            '5-6-',\n            '2-34',\n            '6-71',\n            '34-5'\n        ],\n        baseChroma: getChroma('C'),\n        baseOctave: 3\n    },    \n    {\n        box: [\n            '-5-6-',\n            '-2-34',\n            '6-71-',\n            '34-5-',\n            '71-2-',\n            '-5-6-'\n        ],\n        baseChroma: getChroma('A#'),\n        baseOctave: 2\n    }\n]\n\nconst TNPSDefinition: ScaleDefinition[] = [\n    {\n        box: [\n            '--2-34',\n            '--6-71',\n            '-34-5-',\n            '-71-2-',\n            '4-5-6-',\n            '1-2-3-'\n        ],\n        baseChroma: getChroma('E'),\n        baseOctave: 2\n    },\n    {\n        box: [\n            '--34-5',\n            '--71-2',\n            '4-5-6-',\n            '1-2-3-',\n            '5-6-7-',\n            '2-34--'\n        ],\n        baseChroma: getChroma('D'),\n        baseOctave: 3\n    },\n    {\n        box: [\n            '-4-5-6',\n            '-1-2-3',\n            '5-6-7-',\n            '2-34--',\n            '6-71--',\n            '34-5--'\n        ],\n        baseChroma: getChroma('C'),\n        baseOctave: 3\n    },\n    {\n        box: [\n            '--5-6-7',\n            '--2-34-',\n            '-6-71--',\n            '-34-5--',\n            '-71-2--',\n            '4-5-6--'\n        ],\n        baseChroma: getChroma('B'),\n        baseOctave: 2\n    },\n    {\n        box: [\n            '--6-71',\n            '--34-5',\n            '-71-2-',\n            '4-5-6-',\n            '1-2-3-',\n            '5-6-7-'\n        ],\n        baseChroma: getChroma('A'),\n        baseOctave: 2\n    },\n    {\n        box: [\n            '--71-2',\n            '-4-5-6',\n            '1-2-3-',\n            '5-6-7-',\n            '2-34--',\n            '6-71--'\n        ],\n        baseChroma: getChroma('G'),\n        baseOctave: 2\n    },\n    {\n        box: [\n            '-1-2-3',\n            '-5-6-7',\n            '2-34--',\n            '6-71--',\n            '34-5--',\n            '71-2--'\n        ],\n        baseChroma: getChroma('F'),\n        baseOctave: 2\n    }\n];\n\nexport function getModeFromScaleType(type: string): number {\n    const { modeNum } = getMode(type.replace('pentatonic', '').trim());\n    return modeNum;\n}\n\nfunction getModeOffset(mode: number): number {\n    return getChroma('CDEFGAB'.split('')[mode]);\n}\n\nfunction getPentatonicBoxIndex(box: number, mode: number): number {\n    if (mode === DEFAULT_PENTATONIC_MODE) {\n        return box - 1;\n    }\n    return box % 5;\n}\n\nfunction getBoxPositions({\n    root,\n    box,\n    modeOffset = 0,\n    baseChroma\n}: {\n    root: string;\n    box: string[];\n    modeOffset: number;\n    baseChroma: number;\n}): Position[] {\n    let delta = getChroma(root) - baseChroma - modeOffset;\n    while (delta < -1) {\n        delta += 12;\n    }\n    return box.reduce((memo, item, string) => ([\n        ...memo,\n        ...item.split('').map(\n            (x, i) => x !== '-'\n                ? { string: string + 1, fret: i + delta }\n                : null\n            ).filter(x => !!x)\n    ]), []);\n}\n\nexport function getBox({\n    root,\n    mode = -1,\n    system,\n    box\n}: GetBoxParams): Position[] {\n    let foundBox;\n    let modeNumber = system === Systems.pentatonic\n        ? DEFAULT_PENTATONIC_MODE\n        : DEFAULT_MODE;        \n\n    if (typeof mode === 'string') {\n        modeNumber = getModeFromScaleType(mode);\n    } else if (mode > -1) {\n        modeNumber = mode;\n    }\n\n    switch (system) {\n        case Systems.pentatonic:\n            foundBox = CAGEDDefinition[getPentatonicBoxIndex(+box, modeNumber)];\n            break;\n        case Systems.CAGED:\n            foundBox = CAGEDDefinition[CAGED_ORDER.indexOf(`${box}`)];\n            break;\n        case Systems.TNPS:\n            foundBox = TNPSDefinition[+box - 1];\n            break;\n    }\n    \n    if (!foundBox) {\n        throw new Error(`Cannot find box ${box} in the ${Systems[system]} scale system`);\n    }\n\n    const { baseChroma, box: boxDefinition } = foundBox;\n    \n    return getBoxPositions({\n        root,\n        modeOffset: getModeOffset(modeNumber),\n        baseChroma,\n        box: system === Systems.pentatonic\n            ? boxDefinition.slice().map(x => x.replace('4', '-').replace('7', '-'))\n            : boxDefinition\n    });    \n}","import { get as getNote, chroma as getChroma } from '@tonaljs/note';\nimport { distance, semitones } from '@tonaljs/interval';\nimport { get as getScale } from '@tonaljs/scale';\n\nimport {\n    Systems,\n    getBox,\n    getModeFromScaleType\n} from './systems/systems';\n\nimport { Position, Tuning } from '../fretboard/Fretboard';\n\nimport {\n    GUITAR_TUNINGS,\n    DEFAULT_FRET_COUNT\n} from '../constants';\n\nexport type FretboardPosition = {\n    string: number;\n    fret: number;\n    chroma: number;\n}\n\ntype FretboardSystemParams = {\n    tuning?: Tuning;\n    fretCount?: number;\n}\n\ntype ScaleParams = {\n    type: string;\n    root: string;\n    box?: {\n        system: Systems;\n        box: string | number;\n    };\n}\n\nfunction parseNote(note: string): {\n    note: string;\n    octave: number;\n} {\n    let octave = +note.slice(-1);\n    let parsedNote = note;\n    if (isNaN(octave)) {\n        octave = 2;\n    } else {\n        parsedNote = note.slice(0, -1);\n    }\n    return {\n        octave,\n        note: parsedNote\n    };\n}\n\nfunction getOctaveInScale({\n    root,\n    note,\n    octave,\n    baseOctave\n}: {\n    root: string;\n    note: string;\n    octave: number;\n    baseOctave: number;   \n}): number {\n    const noteChroma = getChroma(note) || 0;\n    const rootChroma = getChroma(root) || 0;\n\n    if (rootChroma > noteChroma) {\n        return octave - 1 - baseOctave;\n    }\n    return octave - baseOctave;\n}\n\nexport function isPositionInBox({ fret, string }: Position, systemPositions: Position[]): boolean {\n    return !!systemPositions.find(x => x.fret === fret && x.string === string);\n}\n\nexport class FretboardSystem {\n    private tuning: Tuning = GUITAR_TUNINGS.default;\n    private fretCount: number = DEFAULT_FRET_COUNT;\n    private positions: FretboardPosition[];\n    private baseNote: string;\n    private baseOctave: number;\n    constructor(params?: FretboardSystemParams) {\n        Object.assign(this, params);\n        const { note: baseNote, octave: baseOctave } = parseNote(this.tuning[0]);\n        this.baseNote = baseNote;\n        this.baseOctave = baseOctave;\n        this.populate();\n    }\n    getTuning(): Tuning {\n        return this.tuning;\n    }\n    getFretCount(): number {\n        return this.fretCount;\n    }\n    getScale({\n        type = 'major',\n        root: paramsRoot = 'C',\n        box\n    }: ScaleParams): Position[] {\n        const { baseOctave } = this;\n        const { note: root } = parseNote(paramsRoot);\n        const scaleName = `${root} ${type}`;\n        const { notes, empty, intervals } = getScale(scaleName);\n\n        if (empty) {\n            throw new Error(`Cannot find scale: ${scaleName}`);\n        }\n\n        const mode = getModeFromScaleType(type);\n        const boxPositions: Position[] = box ? this.adjustOctave(getBox({\n            root, mode, ...box\n        }), paramsRoot) : [];\n\n        const reverseMap = notes.map((note, index) => ({\n            chroma: getChroma(note),\n            note,\n            interval: intervals[index],\n            degree: + intervals[index][0]\n        }));\n        return this.positions\n            .filter(({ chroma }) => reverseMap.find(x => x.chroma === chroma))\n            .map(({ chroma, ...rest }) => ({\n                ...reverseMap.find(x => x.chroma === chroma),\n                ...rest\n            }))\n            .map(x => {\n                const octave = this.getOctave(x);\n                const position: Position = {\n                    octave,\n                    octaveInScale: getOctaveInScale({ root, octave, baseOctave, ...x }),\n                    ...x\n                };\n                if (boxPositions.length && isPositionInBox(x, boxPositions)) {\n                    position.inBox = true;\n                }\n                return position;\n            });\n    }    \n    private adjustOctave(positions: Position[], root: string): Position[] {\n        const { tuning } = this;\n        const rootOffset = semitones(distance(tuning[0], root)) >= 12;\n        const negativeFrets = positions.filter(x => x.fret < 0).length > 0;\n        return positions.map(({ string, fret }) => ({\n            string,\n            fret: rootOffset || negativeFrets ? fret + 12 : fret\n        }));\n    }\n    private populate(): void {\n        const { tuning, fretCount } = this;\n        this.positions = tuning\n            .slice().reverse()\n            .reduce((memo, note, index) => {\n                const string = index + 1;\n                const { chroma } = getNote(note);\n                const filledString = Array.from(\n                    { length: fretCount + 1 },\n                    (_, fret) => ({\n                        string,\n                        fret,\n                        chroma: (chroma + fret) % 12\n                    })\n                );\n                return [...memo, ...filledString];\n            }, []);\n    }\n    private getOctave({ fret, string, chroma, note }: {\n        fret: number;\n        string: number;\n        note: string;\n        chroma: number;        \n    }): number {\n        const { tuning } = this;\n        const baseNoteWithOctave = tuning[tuning.length - string];\n        const { note: baseNote, octave: baseOctave } = parseNote(baseNoteWithOctave);\n        const baseChroma = getChroma(baseNote);\n\n        let octaveIncrement = chroma < baseChroma ? 1 : 0;\n\n        if (note === 'B#' && octaveIncrement > 0) {\n            octaveIncrement--;\n        } else if (note === 'Cb' && octaveIncrement === 0) {\n            octaveIncrement++;\n        }\n        octaveIncrement += Math.floor(fret / 12);\n        return baseOctave + octaveIncrement;\n    }\n}","import {\n  select,\n  Selection,\n  ValueFn,\n  BaseType\n} from 'd3-selection';\n\nimport { throttle } from 'throttle-debounce';\n\nimport {\n  generateStrings,\n  generateFrets,\n  getStringThickness,\n  dotClasses,\n  getDimensions,\n  getPositionFromMouseCoords,\n  createHoverDiv\n} from './utils';\n\nimport { parseChord } from '../chords/chords';\n\nimport {\n  MIDDLE_FRET,\n  THROTTLE_INTERVAL,\n  GUITAR_TUNINGS,\n  DEFAULT_COLORS,\n  DEFAULT_DIMENSIONS,\n  DEFAULT_FRET_COUNT,\n  DEFAULT_FONT_FAMILY,\n  DEFAULT_FONT_SIZE\n} from '../constants';\n\nimport { FretboardSystem } from '../fretboardSystem/FretboardSystem';\nimport { Systems } from '../fretboardSystem/systems/systems';\n\nexport type Tuning = string[];\n\nexport type Position = {\n  string: number;\n  fret: number;\n  note?: string;\n  disabled?: boolean;\n  octave?: number;\n  octaveInScale?: number;\n  inBox?: boolean;\n  interval?: string;\n  degree?: number;\n  chroma?: number;\n} & Record<string, string | number | boolean | Array<string | number>>;\n\ntype FretboardHandler = (position: Position) => void;\n\nexport type Barre = {\n  fret: number;\n  stringFrom?: number;\n  stringTo?: number;\n}\n\nexport const defaultOptions = {\n  el: '#fretboard',\n  tuning: GUITAR_TUNINGS.default,\n  stringCount: 6,\n  stringWidth: DEFAULT_DIMENSIONS.line,\n  stringColor: DEFAULT_COLORS.line,\n  fretCount: DEFAULT_FRET_COUNT,\n  fretWidth: DEFAULT_DIMENSIONS.line,\n  fretColor: DEFAULT_COLORS.line,\n  nutWidth: DEFAULT_DIMENSIONS.nut,\n  nutColor: DEFAULT_COLORS.line,\n  middleFretColor: DEFAULT_COLORS.highlight,\n  middleFretWidth: 3 * DEFAULT_DIMENSIONS.line,\n  scaleFrets: true,\n  crop: false,\n  fretLeftPadding: 0,\n  topPadding: DEFAULT_DIMENSIONS.unit,\n  bottomPadding: DEFAULT_DIMENSIONS.unit * .75,\n  leftPadding: DEFAULT_DIMENSIONS.unit,\n  rightPadding: DEFAULT_DIMENSIONS.unit,\n  height: DEFAULT_DIMENSIONS.height,\n  width: DEFAULT_DIMENSIONS.width,\n  dotSize: DEFAULT_DIMENSIONS.unit,\n  dotStrokeColor: DEFAULT_COLORS.dotStroke,\n  dotStrokeWidth: 2 * DEFAULT_DIMENSIONS.line,\n  dotTextSize: DEFAULT_FONT_SIZE,\n  dotFill: DEFAULT_COLORS.dotFill,\n  dotText: (): string => '',\n  disabledOpacity: 0.9,\n  showFretNumbers: true,\n  fretNumbersHeight: 2 * DEFAULT_DIMENSIONS.unit,\n  fretNumbersMargin: DEFAULT_DIMENSIONS.unit,\n  fretNumbersColor: DEFAULT_COLORS.line,\n  font: DEFAULT_FONT_FAMILY,\n  barresColor: DEFAULT_COLORS.barres\n};\n\nexport const defaultMuteStringsParams = {\n  strings: [] as number[],\n  width: 15,\n  strokeWidth: 5,\n  stroke: DEFAULT_COLORS.mutedString\n};\n\nexport type Options = {\n  el: string | BaseType;\n  tuning: Tuning;\n  stringCount: number;\n  stringWidth: number | [number];\n  stringColor: string;\n  fretCount: number;\n  fretWidth: number;\n  fretColor: string;\n  nutWidth: number;\n  nutColor: string;\n  middleFretColor: string;\n  middleFretWidth: number;\n  scaleFrets: boolean;\n  topPadding: number;\n  bottomPadding: number;\n  leftPadding: number;\n  rightPadding: number;\n  height: number;\n  width: number;\n  dotSize: number;\n  dotStrokeColor: string;\n  dotStrokeWidth: number;\n  dotTextSize: number;\n  dotFill: string;\n  dotText: ValueFn<BaseType, unknown, string>;\n  disabledOpacity: number;\n  showFretNumbers: boolean;\n  fretNumbersHeight: number;\n  fretNumbersMargin: number;\n  fretNumbersColor: string;\n  crop: boolean;\n  fretLeftPadding: number;\n  font: string;\n  barresColor: string;\n}\n\ntype Rec = Record<string, string | number | boolean>;\n\ntype Point = {\n  x: number;\n  y: number;\n}\n\ntype MuteStringsParams = {\n  strings: number[];\n  width?: number;\n  strokeWidth?: number;\n  stroke?: string;\n}\n\nfunction getDotCoords({\n  fret,\n  string,\n  frets,\n  strings  \n}: {\n  fret: number;\n  string: number;\n  frets: number[];  \n  strings: number[];\n}): Point {\n  let x = 0;\n  if (fret === 0) {\n    x = frets[0] / 2;\n  } else {\n    x = frets[fret] - (frets[fret] - frets[fret - 1]) / 2;\n  }\n  return { x, y: strings[string - 1] };\n}\n\nfunction generatePositions({\n  fretCount,\n  stringCount,\n  frets,\n  strings\n}: {\n  fretCount: number;\n  stringCount: number;\n  frets: number[];\n  strings: number[];\n}): Point[][] {\n  const positions = [];\n  for (let string = 1; string <= stringCount; string++) {\n    const currentString = [];\n    for (let fret = 0; fret <= fretCount; fret++) {\n      currentString.push(getDotCoords({ fret, string, frets, strings }))\n    }\n    positions.push(currentString);\n  }\n  return positions;\n}\n\nfunction validateOptions(options: Options): void {\n  const { stringCount, tuning } = options;\n  if (stringCount !== tuning.length) {\n    throw new Error(`stringCount (${stringCount}) and tuning size (${tuning.length}) do not match`);\n  }\n}\n\nexport class Fretboard {\n  strings: number[];\n  frets: number[];\n  positions: Point[][];\n  svg: Selection<BaseType, unknown, HTMLElement, unknown>;\n  wrapper: Selection<BaseType, unknown, HTMLElement, unknown>;\n  private options: Options;\n  private baseRendered: boolean;\n  private hoverDiv: HTMLDivElement;\n  private handlers: Record<string, (event: MouseEvent) => void> = {};\n  private system: FretboardSystem;\n  private dots: Position[] = [];\n  constructor (options = {}) {\n    this.options = Object.assign({}, defaultOptions, options);\n    validateOptions(this.options);    \n    const {\n      el,\n      height,\n      width,\n      leftPadding,\n      topPadding,\n      stringCount,\n      stringWidth,\n      fretCount,\n      scaleFrets,\n      tuning\n    } = this.options;\n\n    this.strings = generateStrings({ stringCount, height, stringWidth });\n    this.frets = generateFrets({ fretCount, scaleFrets });\n    const { totalWidth, totalHeight } = getDimensions(this.options);\n\n    this.system = new FretboardSystem({\n      fretCount,\n      tuning\n    });\n\n    this.positions = generatePositions({\n      ...this,\n      ...this.options\n    });\n\n    this.svg = (\n      typeof el === 'string'\n        ? select(el)\n        : select<BaseType, unknown>(el)\n      )\n      .append('div')\n        .attr('class', 'fretbard-html-wrapper')\n        .attr('style', 'position: relative')\n      .append('svg')\n        .attr('viewBox', `0 0 ${totalWidth} ${totalHeight}`);\n\n    this.wrapper = this.svg\n      .append('g')\n        .attr('class', 'fretboard-wrapper')\n        .attr(\n          'transform',\n          `translate(${leftPadding}, ${topPadding}) scale(${width / totalWidth})`\n        );\n  }\n\n  render(): Fretboard {\n    const {\n      wrapper,\n      positions,\n      dots\n    } = this;\n\n    const {\n      font,\n      dotStrokeColor,\n      dotStrokeWidth,\n      dotFill,\n      dotSize,\n      dotText,\n      dotTextSize,\n      disabledOpacity\n    } = this.options;\n\n    const dotOffset = this.getDotOffset();\n    this.baseRender(dotOffset);\n\n    wrapper.select('.dots').remove();\n\n    if (!dots.length) {\n      return this;\n    }\n\n    const dotGroup = wrapper\n      .append('g')\n        .attr('class', 'dots')\n        .attr('font-family', font);\n\n    const dotsNodes = dotGroup.selectAll('g')\n      .data(dots)\n      .enter()\n      .filter(({ fret }) => fret >= 0)\n      .append('g')\n        .attr('class', dot => ['dot', dotClasses(dot, '')].join(' '))\n        .attr('opacity', ({ disabled }) => disabled ? disabledOpacity : 1);\n\n    dotsNodes.append('circle')\n      .attr('class', 'dot-circle')\n      .attr('cx', ({ string, fret }) => `${positions[string - 1][fret - dotOffset].x}%`)\n      .attr('cy', ({ string, fret }) => positions[string - 1][fret - dotOffset].y)\n      .attr('r', dotSize * 0.5)\n      .attr('stroke', dotStrokeColor)\n      .attr('stroke-width', dotStrokeWidth)\n      .attr('fill', dotFill);\n\n    dotsNodes.append('text')\n      .attr('class', 'dot-text')\n      .attr('x', ({ string, fret }) => `${positions[string - 1][fret - dotOffset].x}%`)\n      .attr('y', ({ string, fret }) => positions[string - 1][fret - dotOffset].y)\n      .attr('text-anchor', 'middle')\n      .attr('dominant-baseline', 'central')\n      .attr('font-size', dotTextSize)\n      .text(dotText);\n\n    return this;\n  }\n\n  setDots(dots: Position[]): Fretboard {\n    this.dots = dots;\n    return this;\n  }\n\n  clear(): Fretboard {\n    this.setDots([]);\n    this.wrapper.select('.dots').remove();\n    return this;\n  }\n\n  style ({\n    filter = (): boolean => true,\n    text,\n    fontSize,\n    fontFill,\n    ...opts\n  }: {\n    filter?: ValueFn<BaseType, unknown, boolean> | Rec;\n    text?: ValueFn<BaseType, unknown, string>;\n    fontSize?: number;\n    fontFill?: string;\n    [key: string]: string | number | Function | Rec;\n  }): Fretboard {\n    const { wrapper } = this;\n    const { dotTextSize } = this.options;\n    const filterFunction = filter instanceof Function\n      ? filter\n      : (dot: Position): boolean => {\n        const [key, value] = Object.entries(filter)[0];\n        return dot[key] === value;\n      };\n\n    const dots = wrapper.selectAll('.dot-circle')\n      .filter(filterFunction);\n    \n    Object.keys(opts).forEach(\n      key => dots.attr(key, (opts as Rec)[key])\n    );\n\n    if (text) {\n      wrapper.selectAll('.dot-text')\n        .filter(filterFunction)\n        .text(text)\n        .attr('font-size', fontSize || dotTextSize)\n        .attr('fill', fontFill || DEFAULT_COLORS.dotText);\n    }\n\n    return this;\n  }\n\n  muteStrings(params: MuteStringsParams): Fretboard {\n    const {\n      wrapper,\n      positions\n    } = this;\n\n    const {\n      strings,\n      stroke,\n      strokeWidth,\n      width\n    } = { ...defaultMuteStringsParams, ...params };\n\n    wrapper\n      .append('g')\n        .attr('class', 'muted-strings')\n        .attr('transform', `translate(${-width / 2}, ${-width / 2})`)\n      .selectAll('path')\n        .data(strings)\n        .enter()\n      .append('path')\n        .attr('d', d => {\n          const { y } = positions[d - 1][0];\n          return [\n            `M 0 ${y}`,\n            `L ${width} ${y + width}`,\n            `M ${width} ${y}`,\n            `L 0 ${y + width}`\n          ].join(' ');\n        })\n        .attr('stroke', stroke)\n        .attr('stroke-width', strokeWidth)\n        .attr('class', 'muted-string');\n\n    return this;\n  }\n\n  renderChord(chord: string, barres?: Barre | Barre[]): Fretboard {\n    const { positions, mutedStrings: strings } = parseChord(chord);\n    this.setDots(positions);\n    if (barres) {\n      this.renderBarres([].concat(barres));\n    }    \n    this.render();\n    this.muteStrings({ strings });\n    return this;\n  }\n\n  renderScale({\n    type,\n    root,\n    box\n  }: {\n    type: string;\n    root: string;\n    box?: {\n      system: Systems;\n      box: string|number;\n    };\n  }): Fretboard {\n    if (box && this.options.tuning.toString() !== GUITAR_TUNINGS.default.toString()) {\n      console.warn('Selected scale system works for standard tuning. Wrong notes may be highlighted.');\n    }\n    const dots = this.system.getScale({ type, root, box });\n    return this.setDots(dots).render();\n  }\n\n  renderBox({\n    type,\n    root,\n    box\n  }: {\n    type: string;\n    root: string;\n    box?: {\n      system: Systems;\n      box: string | number;\n    };\n  }): Fretboard {\n    if (this.options.tuning.toString() !== GUITAR_TUNINGS.default.toString()) {\n      console.warn('Selected scale system works for standard tuning. Wrong notes may be highlighted.');\n    }\n\n    const dots = this.system.getScale({ type, root, box }).filter(({ inBox }) => inBox);\n    return this.setDots(dots).render();\n  }  \n\n  on(eventName: string, handler: FretboardHandler): Fretboard {\n    const {\n      svg,\n      options,\n      strings,\n      frets,\n      hoverDiv,\n      dots\n    } = this;\n    const stringsGroup = svg.select('.strings');\n\n    if (!hoverDiv) {\n      this.hoverDiv = createHoverDiv(options);\n      (svg.node() as HTMLElement).parentNode.appendChild(this.hoverDiv);\n    }\n\n    if (this.handlers[eventName]) {\n      this.hoverDiv.removeEventListener(eventName, this.handlers[eventName]);\n    } else {\n      this.handlers[eventName] = throttle(\n        THROTTLE_INTERVAL,\n        (event: MouseEvent) => handler(getPositionFromMouseCoords({\n          event,\n          stringsGroup,\n          strings,\n          frets,\n          dots,\n          ...options\n        }\n      )));\n      this.hoverDiv.addEventListener(eventName, this.handlers[eventName]);\n    }\n    return this;\n  }\n\n  removeEventListeners(): Fretboard {\n    const {\n      hoverDiv,\n      handlers\n    } = this;\n    if (!hoverDiv) {\n      return this;\n    }\n    Object\n      .entries(handlers)\n      .map(\n        ([eventName, handler]) => hoverDiv.removeEventListener(eventName, handler)\n      );\n    return this;\n  }\n\n  private renderBarres(barres: Barre[]): void {\n    const {\n      wrapper,\n      strings,\n      options,\n      positions\n    } = this;\n\n    const normalisedBarres = barres.map(({\n      fret,\n      stringFrom,\n      stringTo\n    }: Barre) => ({\n      fret,\n      stringFrom: stringFrom\n        ? Math.min(stringFrom, strings.length)\n        : strings.length,\n      stringTo: stringTo\n        ? Math.max(stringTo, 1)\n        : 1\n    }));\n\n    const { dotSize, barresColor } = options;\n    const dotOffset = this.getDotOffset();\n    const barreWidth = dotSize * .8;\n    \n    const barresGroup = wrapper\n      .append('g')\n      .attr('class', 'barres')\n      .attr('transform', `translate(-${barreWidth * .5}, 0)`);\n\n    barresGroup\n      .selectAll('rect')\n      .data(normalisedBarres)\n      .enter()\n      .append('rect')\n      .attr('y', ({ fret, stringTo }: Barre) => positions[stringTo - 1][fret - dotOffset].y - dotSize * .75)\n      .attr('x', ({ fret, stringFrom }: Barre) => `${positions[stringFrom - 1][fret - dotOffset].x}%`)\n      .attr('rx', 7.5)\n      .attr('width', barreWidth)\n      .attr('height', ({ stringFrom, stringTo }: Barre) => strings[stringFrom - 1] - strings[stringTo - 1] + 1.5 * dotSize)\n      .attr('fill', barresColor);\n  }\n\n  private baseRender(dotOffset: number): void {\n    if (this.baseRendered) {\n      return;\n    }\n\n    const {\n      wrapper,\n      frets,\n      strings\n    } = this;\n\n    const {\n      height,\n      font,\n      nutColor,\n      nutWidth,\n      stringColor,\n      stringWidth,\n      fretColor,\n      fretWidth,\n      middleFretWidth,\n      middleFretColor,\n      showFretNumbers,\n      fretNumbersMargin,\n      fretNumbersColor,\n      topPadding\n    } = this.options;\n\n    const { totalWidth } = getDimensions(this.options);\n\n    const stringGroup = wrapper\n      .append('g')\n      .attr('class', 'strings');\n\n    stringGroup\n      .selectAll('line')\n      .data(strings)\n      .enter()\n      .append('line')\n      .attr('x1', 0)\n      .attr('y1', d => d)\n      .attr('x2', '100%')\n      .attr('y2', d => d)\n      .attr('stroke', stringColor)\n      .attr('stroke-width', (_d, i) => getStringThickness({ stringWidth, stringIndex: i }));\n\n    const fretsGroup = wrapper\n      .append('g')\n      .attr('class', 'frets');\n\n    fretsGroup\n      .selectAll('line')\n      .data(frets)\n      .enter()\n      .append('line')\n      .attr('x1', d => `${d}%`)\n      .attr('y1', 1)\n      .attr('x2', d => `${d}%`)\n      .attr('y2', height - 1)\n      .attr('stroke', (_d, i) => {\n        switch (i) {\n          case 0:\n            return nutColor;\n          case MIDDLE_FRET + 1:\n            return middleFretColor;\n          default:\n            return fretColor;\n        }\n      })\n      .attr('stroke-width', (_d, i) => {\n        switch (i) {\n          case 0:\n            return nutWidth;\n          case MIDDLE_FRET + 1:\n            return middleFretWidth;\n          default:\n            return fretWidth;\n        }\n      });\n\n    if (showFretNumbers) {\n      const fretNumbersGroup = wrapper\n        .append('g')\n        .attr('class', 'fret-numbers')\n        .attr('font-family', font)\n        .attr('transform',\n          `translate(0 ${fretNumbersMargin + topPadding + strings[strings.length - 1]})`\n        );\n\n      fretNumbersGroup\n        .selectAll('text')\n        .data(frets.slice(1))\n        .enter()\n        .append('text')\n        .attr('text-anchor', 'middle')\n        .attr('x', (d, i) => totalWidth / 100 * (d - (d - frets[i]) / 2))\n        .attr('fill', (_d, i) => i === MIDDLE_FRET ? middleFretColor : fretNumbersColor)\n        .text((_d, i) => `${i + 1 + dotOffset}`)\n    }\n\n    this.baseRendered = true;\n  }  \n\n  private getDotOffset(): number {\n    const { dots } = this;\n    const { crop, fretLeftPadding } = this.options;\n    return crop\n      ? Math.max(0, Math.min(...dots.map(({ fret }) => fret)) - 1 - fretLeftPadding)\n      : 0;    \n  }\n}\n","import { Position } from '../fretboard/Fretboard';\nimport { get as getInterval } from '@tonaljs/interval';\nimport { transpose } from '@tonaljs/note';\n\nexport enum TetrachordTypes {\n  Major = 'Major',\n  Minor = 'Minor',\n  Phrygian = 'Phrygian',\n  Harmonic = 'Harmonic',\n  Lydian = 'Lydian'\n}\n\nexport enum TetrachordLayouts {\n  Linear,\n  ThreePlusOne,\n  TwoPlusTwo,\n  OnePlusThree\n}\n\nconst Tetrachords = {\n  [TetrachordTypes.Major]: ['M2', 'M2', 'm2'],\n  [TetrachordTypes.Minor]: ['M2', 'm2', 'M2'],\n  [TetrachordTypes.Phrygian]: ['m2', 'M2', 'M2'],\n  [TetrachordTypes.Harmonic]: ['m2', 'A2', 'm2'],\n  [TetrachordTypes.Lydian]: ['M2', 'M2', 'M2']\n}\n\ntype TetrachordArgs = {\n  root: string;\n  type: TetrachordTypes;\n  layout: TetrachordLayouts;\n  string: number;\n  fret: number;\n};\n\nexport function tetrachord({\n  root,\n  type,\n  layout,\n  string,\n  fret\n}: TetrachordArgs = {\n  root: 'E',\n  type: TetrachordTypes.Major,\n  layout: TetrachordLayouts.Linear,\n  string: 6,\n  fret: 0\n}): Position[] {\n  const tetrachord = Tetrachords[type];\n  const pattern = [{\n    string,\n    fret,\n    note: root\n  }];\n\n  let partial = 0;\n  let currentNote = root;\n  if (layout === TetrachordLayouts.Linear) {\n    tetrachord.forEach(x => {\n      const { semitones } = getInterval(x);\n      currentNote = transpose(currentNote, x);\n      partial += semitones;\n      pattern.push({\n        string,\n        fret: fret + partial,\n        note: currentNote\n      });\n    });\n    return pattern;\n  }\n\n  if (string === 1) {\n    throw new Error('Cannot split a tetrachord over two strings if starting on the first one');\n  }\n\n  let currentString = string;\n\n  const splitIndex = ((): number => {\n    switch(layout) {\n      case TetrachordLayouts.ThreePlusOne:\n        return 2;\n      case TetrachordLayouts.TwoPlusTwo:\n        return 1;\n      case TetrachordLayouts.OnePlusThree:\n        return 0;\n    }\n  })();\n\n  tetrachord.forEach((x, i) => {\n    const { semitones } = getInterval(x);\n    currentNote = transpose(currentNote, x);\n    if (i === splitIndex) {\n      currentString -= 1;\n      partial = currentString === 2\n        ? partial - 4\n        : partial - 5;\n    }\n    partial += semitones;\n\n    const currentFret = fret + partial;\n\n    if (currentFret < 0) {\n      throw new Error('Cannot use this layout from this starting fret');\n    }\n\n    pattern.push({\n      string: currentString,\n      fret: currentFret,\n      note: currentNote\n    });\n  });\n\n  return pattern;\n}\n","import { Position } from '../fretboard/Fretboard';\n\nexport function parseChord(chord: string): {\n  positions: Position[];\n  mutedStrings: number[];\n} {\n  const positions = [] as Position[];\n  const mutedStrings = [] as number[];\n  const splitter = chord.indexOf('-') > -1 ? '-' : '';\n  chord.split(splitter).reverse().forEach((fret, string) => {\n    if (fret === '0') {\n      return;\n    }\n    if (fret === 'x') {\n      mutedStrings.push(string + 1);\n      return;\n    }\n    positions.push({\n      fret: +fret,\n      string: string + 1\n    });\n  });\n  return {\n    positions,\n    mutedStrings\n  };\n}\n","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {number}    delay -          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {boolean}   [noTrailing] -   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset).\n * @param  {Function}  callback -       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {boolean}   [debounceMode] - If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @returns {Function}  A new, throttled, function.\n */\nfunction throttle (delay, noTrailing, callback, debounceMode) {\n  /*\n   * After wrapper has stopped being called, this timeout ensures that\n   * `callback` is executed at the proper times in `throttle` and `end`\n   * debounce modes.\n   */\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  } // Function to cancel next exec\n\n\n  function cancel() {\n    clearExistingTimeout();\n    cancelled = true;\n  } // `noTrailing` defaults to falsy.\n\n\n  if (typeof noTrailing !== 'boolean') {\n    debounceMode = callback;\n    callback = noTrailing;\n    noTrailing = undefined;\n  }\n  /*\n   * The `wrapper` function encapsulates all of the throttling / debouncing\n   * functionality and when executed will limit the rate at which `callback`\n   * is executed.\n   */\n\n\n  function wrapper() {\n    for (var _len = arguments.length, arguments_ = new Array(_len), _key = 0; _key < _len; _key++) {\n      arguments_[_key] = arguments[_key];\n    }\n\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n\n    if (cancelled) {\n      return;\n    } // Execute `callback` and update the `lastExec` timestamp.\n\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, arguments_);\n    }\n    /*\n     * If `debounceMode` is true (at begin) this is used to clear the flag\n     * to allow future `callback` executions.\n     */\n\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (debounceMode && !timeoutID) {\n      /*\n       * Since `wrapper` is being called for the first time and\n       * `debounceMode` is true (at begin), execute `callback`.\n       */\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      /*\n       * In throttle mode, if `delay` time has been exceeded, execute\n       * `callback`.\n       */\n      exec();\n    } else if (noTrailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounceMode` is true (at begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounceMode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n\n  return wrapper;\n}\n\n/* eslint-disable no-undefined */\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {number}   delay -         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {boolean}  [atBegin] -     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback -      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @returns {Function} A new, debounced function.\n */\n\nfunction debounce (delay, atBegin, callback) {\n  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n}\n\nexport { debounce, throttle };\n//# sourceMappingURL=index.esm.js.map\n","import { Fretboard } from '@moonwave99/fretboard.js';\n\n\nconst AppFretboard = function() {\n  // The fretboard\n  // Ref https://moonwave99.github.io/fretboard.js/documentation-fretboard.html\n  const fretboardconfig = {\n    el: '#fretboard',\n    fretCount: 24,\n    middleFretColor: \"#666\",\n    middleFretWidth: 1,\n    width: 1500,\n    // height: 50,\n    scaleFrets: \"true\",\n    showFretNumbers: \"false\",\n    disabledOpacity: \"0.4\",\n  }\n  this.fretboard = new Fretboard(fretboardconfig)\n  this.fretboard.render()\n}\n\n/** Update the fretboard. */\nAppFretboard.prototype.drawNote = function(note) {\n  // console.log(`added ${JSON.stringify(note)}`)\n  // note.frets example: \"frets\":{\"2\":2,\"3\":7,\"4\":12}\n  const dots = this.noteAllStringFrets(note)\n  this.fretboard.\n    setDots(dots).\n    render().\n    style({ fill: 'green' })\n}\n\n\nAppFretboard.prototype.noteAllStringFrets = function(note, color = 'green') {\n  return Object.entries(note.frets).\n    map(p => [ parseInt(p[0]) + 1, p[1] ]).\n    reduce((arr, p) => { arr.push({ string: p[0], fret: p[1], color: color }); return arr }, [])\n}\n\nAppFretboard.prototype.noteSelectedStringFret = function(note, color) {\n  return {\n    string: note.string + 1,\n    fret: note.frets[`${note.string}`],\n    color: color\n  }\n}\n\nAppFretboard.prototype.chordStringFrets = function(notes, color) {\n  return notes.map(n => {\n    return this.noteSelectedStringFret(n, color)\n  })\n}\n\n/** Update fretboard with line of notes. */\nAppFretboard.prototype.drawLine = function(line, cursor) {\n  // console.log('enter drawLine')\n  const dots = []\n\n  const isChord = function(el) { return el instanceof Array }\n\n  // Show the current dot (at the app cursor) plus this many old dots.\n  const olddotcount = 1\n\n  const currcolor = 'red'\n  const oldcolor = 'green'\n\n  // console.log(`starting from cursor = ${cursor}`)\n  for (var i = cursor; i >= (cursor - olddotcount) && i >= 0; i--) {\n    const el = line[i]\n    // console.log(`got el = ${JSON.stringify(el, null, 2)}`)\n    const color = (i == cursor) ? currcolor : oldcolor\n    let newdots = null\n    if (isChord(el)) {\n      newdots = this.chordStringFrets(el, color)\n    }\n    else {\n      newdots = [ this.noteSelectedStringFret(el, color) ]\n    }\n    // console.log(`got newdots = ${JSON.stringify(newdots, null, 2)}`)\n    dots.push(newdots.map(n => { return { ...n, disabled: (i < cursor) } }))\n  }\n\n  if (!isChord(line[cursor])) {\n    dots.push(this.noteAllStringFrets(line[cursor], 'white'))\n  }\n\n  // console.log(`got all dots = \\n ${JSON.stringify(dots, null, 2)}`)\n\n  // The dots to add could be in arrays (if chords), so must flatten\n  // .. also want to render later dots last, and we iterated\n  // backwards, so reverse it.\n  const finaldots = dots.flat().reverse()\n  this.fretboard.\n    setDots(finaldots).\n    render().\n    style({\n      filter: ( { color: oldcolor } ),\n      fill: oldcolor\n    }).\n    style({\n      filter: ( { color: currcolor } ),\n      fill: currcolor\n    })\n\n  /*\n  // Set opacity so that the further back you go, things fade out.\n  // dot distances map to opacity\n  const opacityForDistance = (n) => {\n    if (n == 0)\n      return 1\n    return 0.5 - 0.05 * n\n  }\n  for (var d = 0; d <= 10; ++d) {\n    const cn = `dot-distance-${d}`\n    console.log('setting opacity for ' + cn)\n    var els = document.getElementsByClassName(cn)\n    for (var i = 0; i < els.length; i++) {\n      els[i].setAttribute(\"opacity\", opacityForDistance(d))\n    }\n  }\n  */\n\n}\n\nmodule.exports = { AppFretboard }\n","/** The \"keyboard navigator\" to select the strings to use from the rawtab. */\n\nconst Tabselector = function(app, fretboard, updateCallback) {\n  this.app = app\n\n  /** The current cursor position in the table. */\n  this.currString = this.getGoodStringForNote(this.app.line[0], 0, false)\n  this.app.cursor = 0\n\n  /** The preferred strings selected by navigation. */\n  this.app.noteAt(this.app.cursor).string = this.currString\n\n  /** A callback for when something updates. */\n  this.callUpdate = updateCallback\n  this.callUpdate()\n\n  this.fretboard = fretboard\n  this.fretboard.drawLine(this.app.line, this.app.cursor)\n\n  /** Listen to keyboard events. */\n  // bind required here to ensure that \"this\" in the checkKey method\n  // refers to the Tabselector, and not the window.\n  // ref https://www.html5gamedevs.com/topic/\n  //   9765-javascript-keydown-addeventlistener-will-not-call-my-class-method/\n  this.eventListener = this.checkKey.bind(this)\n}\n\n\n/**\n * If not changing string and the given note already has a string selected, keep it;\n * otherwise, try to use the suggested string, and if that doesn't\n * work, return the lowest string value.\n */\nTabselector.prototype.getGoodStringForNote = function(note, suggestedString, changingString) {\n  if (!note)\n    return\n  if (!changingString && note.string !== null)\n    return note.string\n\n  const possibleStrings = Object.keys(note.frets).map(n => parseInt(n, 10)).sort()\n  if (possibleStrings.includes(suggestedString))\n    return suggestedString\n  maxString = possibleStrings[possibleStrings.length - 1]\n  if (suggestedString > maxString)\n    return maxString\n  return possibleStrings[0]\n}\n\n\nTabselector.prototype.init = function() {\n  window.addEventListener(\"keydown\", this.eventListener)\n}\n\nTabselector.prototype.stop = function() {\n  window.removeEventListener(\"keydown\", this.eventListener)\n  /* Update the app, so vextab can be updated. */\n  this.app.cursorIndicator = null\n  this.callUpdate()\n}\n\nTabselector.prototype.toggleChordTone = function() {\n  this.app.toggleChord(this.app.cursor)\n}\n\n\n/**\n * Delete the current note.\n */\nTabselector.prototype.deleteCurrent = function() {\n  console.log('deleting note at index ' + this.app.cursor)\n  this.app.deleteAt(this.app.cursor)\n}\n\n// Allowable durations\nnoteDurations = [\n  'w', 'h', 'q', '8', '16', '32'\n]\n\n// Count backwards until you find a note with a duration, and return it.\nTabselector.prototype.mostRecentDuration = function(stripDot = true) {\n  for (var i = this.app.cursor; i >= 0; i--) {\n    const d = this.app.noteAt(i).duration\n    if (d) {\n      if (stripDot)\n        return d.replace(/d$/, '')  // remove dotted rhythm\n      return d\n    }\n  }\n  return 'q'  // default\n}\n\nTabselector.prototype.speedUp = function() {\n  let i = noteDurations.indexOf(this.mostRecentDuration())\n  i += 1\n  i = Math.min(i, noteDurations.length - 1)\n  this.app.setDuration(this.app.cursor, noteDurations[i])\n}\n\nTabselector.prototype.slowDown = function() {\n  let i = noteDurations.indexOf(this.mostRecentDuration())\n  i -= 1\n  i = Math.max(i, 0)\n  this.app.setDuration(this.app.cursor, noteDurations[i])\n}\n\nTabselector.prototype.toggleDot = function() {\n  let d = this.mostRecentDuration(false)\n  console.log(`most recent = ${d}`)\n  const n = this.app.noteAt(this.app.cursor)\n  let newduration = d\n  if (d.endsWith('d'))\n    newduration = d.replace(/d$/, '')\n  else\n    newduration = `${d}d`\n  console.log(`updating to = ${newduration}`)\n  this.app.setDuration(this.app.cursor, newduration)\n}\n\n/** Keyboard handler. */\nTabselector.prototype.checkKey = function(e) {\n  const oldString = this.currString\n  const oldCursor = this.app.cursor\n\n  e = e || window.event\n  // Movement\n  const [ DOWN, RIGHT, UP, LEFT, SPACE, T ] = [ 40, 39, 38, 37, 32, 84 ]\n  // Chords\n  const [ C ] = [ 67 ]\n  // Tempo\n  const [ PLUS, MINUS, DOT ] = [ 187, 189, 190 ]\n  // Misc\n  const [ DELETE ] = [ 8 ]\n  let changingString = false\n  switch(0 + e.keyCode) {\n  case UP: this.currString -= 1; break\n  case DOWN: this.currString += 1; break\n  case LEFT: this.app.cursor -= 1; break\n  case RIGHT: this.app.cursor += 1; break\n  case PLUS: this.speedUp(); break\n  case MINUS: this.slowDown(); break;\n  case DOT: this.toggleDot(); break;\n  case DELETE: this.deleteCurrent(); break;\n  case C: this.toggleChordTone(); break\n  default: return\n  }\n\n  /* Ensure curr row and column are within bounds. */\n  this.app.cursor = Math.min(this.app.cursor, this.app.line.length - 1)\n  this.app.cursor = Math.max(0, this.app.cursor)\n\n  changingString = (oldString !== this.currString)\n  this.currString = this.getGoodStringForNote(this.app.noteAt(this.app.cursor), this.currString, changingString)\n\n  // TODO - refactor, this is very messy.\n  if (changingString || this.app.cursor !== oldCursor) {\n    if (this.app.line[this.app.cursor] instanceof Array) {\n      console.log('cannot change the string of a note in chord')\n    }\n    else {\n      const n = this.app.noteAt(this.app.cursor)\n      if (n) {\n        n.string = this.currString\n      }\n      else {\n        console.log('deleted all notes')\n      }\n    }\n  }\n\n  if (this.callUpdate) {\n    this.callUpdate()\n  }\n  this.fretboard.drawLine(this.app.line, this.app.cursor)\n\n}\n\n\nmodule.exports = { Tabselector }\n","import { Application } from './app.js'\nimport { GuitarString } from './guitarstring.js'\nimport { Tuner } from './tuner.js'\nimport { Note } from './note.js'\nimport { AppFretboard } from './appfretboard.js'\nimport { Tabselector } from './tabselector.js'\nimport { VextabScribe } from './vextabscribe.js'\n\nconst ApplicationController = function(app) {\n  const a4 = 440\n  this.tuner = new Tuner(a4)\n  this.$rawnote = document.getElementById('rawnote')\n  // this.$tab = document.getElementById('tab')\n  this.$rawtab = document.getElementById('rawtab')\n  this.sensitivity = document.getElementById('micsensitivity').value || 400\n\n  this.app = app\n\n  // We're only recording once the user clicks \"start\", but the mic is listening.\n  this.isRecording = false\n\n  this.fretboard = new AppFretboard()\n\n  // Vextab creates a textarea with class \"editor\".\n  // There are 2 editors onscreen: the mini editor, and the large editor.\n  const vexeditors = document.getElementsByClassName(\"editor\")\n  if (vexeditors.length !== 2) {\n    throw \"no unique 'editor' class found\"\n  }\n  this.minieditor = vexeditors[0]\n  this.minieditor.style.display = 'none'\n  this.writeVextabMini()\n\n  this.vextabeditor = vexeditors[1]\n\n  // The editor\n  this.tabselector = null\n}\n\nApplicationController.prototype.configure = function(config) {\n  this.sensitivity = document.getElementById('micsensitivity').value || 400\n}\n\nApplicationController.prototype.startRecording = function() {\n  this.isRecording = true\n  this.start()\n}\n\nApplicationController.prototype.start = function() {\n  this.currNote = null\n  this.currNoteStart = null\n\n  // Only add the current note _once_ after it has lasted the min\n  // duration.\n  this.currNoteProcessed = false\n\n  const self = this\n  this.tuner.onFrequencyDetected = function(frequency) {\n    const now = Date.now()\n    const note = self.app.buildNote(frequency)\n\n    // Ignore first sample, as we can't do anything with a note until it\n    // reaches MIN_DURATION.\n    if (!self.currNote) {\n      self.currNote = note\n      self.currNoteStart = now\n      return\n    }\n\n    const currNoteAge = (now - self.currNoteStart)\n    if (note.standard !== 0 && self.currNote.standard == note.standard && currNoteAge > self.sensitivity && !self.currNoteProcessed) {\n      // console.log(`Curr note duration ${duration} exceeds min, updating`)\n      self.addNote(self.currNote)\n      self.currNoteProcessed = true\n    }\n\n    if (note.standard !== self.currNote.standard) {\n      // console.log('New current note)\n      self.currNote = note\n      self.currNoteStart = now\n      self.currNoteProcessed = false\n    }\n\n  }\n\n  self.tuner.init()\n  self.frequencyData = new Uint8Array(self.tuner.analyser.frequencyBinCount)\n\n}\n\nApplicationController.prototype.addNote = function(n) {\n  this.handleNote(n)\n  if (this.isRecording) {\n    this.app.addNote(n)\n    this.updateUI()\n  }\n}\n\n/** Start keyboard listener. */\nApplicationController.prototype.stop = function() {\n  this.isRecording = false\n  this.tuner.onFrequencyDetected = function(note) { /* no-op */ }\n  this.app.cursorIndicator = '$.a-/bottom.$'\n\n  // Create a callback for UI updates when the tabselector does its thing.\n  // Fancy code ... if we just pass in \"this.updateUI\" as the callback,\n  // javascript complains (I believe because \"this\" resolves to the tabselector).\n  const self = this\n  const callback = () => { self.updateUI() }\n\n  if (this.app.line.length > 0) {\n    this.tabselector = new Tabselector(this.app, this.fretboard, callback)\n    this.tabselector.init()\n  }\n}\n\n/** Remove keyboard listener. */\nApplicationController.prototype.stopEditing = function() {\n  if (this.tabselector) {\n    this.tabselector.stop()\n  }\n}\n\n\nApplicationController.prototype.handleNote = function(note) {\n  this.fretboard.drawNote(note)\n  this.updateCurrentNoteDisplay(note)\n}\n\n\n/**\n * Update the text box that shows the raw data of what's currently played.\n */\nApplicationController.prototype.updateCurrentNoteDisplay = function(note) {\n  const notedesc = `${note.name}${note.octave} (${note.frequency.toFixed(2)} Hz)`\n  this.$rawnote.innerHTML = `Current: ${notedesc}`\n}\n\n\n/**\n * Update the mini vextab editor.\n */\nApplicationController.prototype.writeVextabMini = function() {\n  const opts = {\n    ...window.getConfig(),\n    cursor: this.app.cursor,\n    cursorIndicator: this.app.cursorIndicator\n  }\n  // console.log(JSON.stringify(opts,null,2))\n  const scribe = new VextabScribe('tabstave notation=true', opts)\n  const indices = this.app.editorWindowIndices(this.app.line.length, this.app.cursor, 21)\n  const vt = scribe.tab(this.app.line, indices.start, indices.end)\n  this.minieditor.value = vt\n\n  // Simulate a keypress in the mini editor so that the canvas is updated.\n  // ref https://github.com/0xfe/mini/blob/master/src/div.js\n  this.minieditor.dispatchEvent(new KeyboardEvent('keyup'));\n\n  // If we're not recording, we're editing ... update the progress bar.\n  if (!this.isRecording) {\n    // Assume that everything to the left of the cursor has had a string assigned.\n    const w = Math.floor(100 * (this.app.cursor + 1)/ this.app.line.length)\n    document.getElementById('prog-bar').style.width = `${w}%`\n  }\n}\n\n\n/**\n * Update the vextab editor.\n */\nApplicationController.prototype.writeVextab = function() {\n  const vt = this.app.vextab('tabstave notation=true')\n  if (vt === '') {\n    return\n  }\n  this.vextabeditor.value = vt\n\n  // Simulate a keypress in the vextab editor so that the canvas is updated.\n  // ref https://github.com/0xfe/vextab/blob/master/src/div.js\n  this.vextabeditor.dispatchEvent(new KeyboardEvent('keyup'));\n}\n\n\nApplicationController.prototype.updateUI = function() {\n  // this.writeVextab()\n  this.writeVextabMini()\n}\n\nmodule.exports = { ApplicationController }\n","const Scribe = function(numstrings = 6, scribeOptions = {}) {\n  this.numstrings = numstrings\n  this.opts = scribeOptions\n}\n\n\n /**\n * get tab for app line.\n *\n * @param {array} app.line, with .string filled in or not.\n * @returns {array}\n */\nScribe.prototype.tab = function(appline) {\n  const stafflength = this.opts.stafflength || 75\n\n  ns = this.numstrings\n\n  function newStaff() {\n    return new Array(ns).fill('-')\n  }\n\n  const result = []\n  let staff = newStaff()\n  result.push(staff)\n\n  for (var i = 0; i < appline.length; i++) {\n\n    let notes = appline[i]\n    if (!(notes instanceof Array))\n      notes = [ notes ]\n\n    const frets = new Array(ns).fill(null)\n\n    // Fill in frets for all strings.\n    notes.forEach(n => {\n      // Hacky, ensure the string chosen is valid!\n      if (n.string >= 0 && n.string < ns)\n        frets[n.string] = n.frets[`${n.string}`]\n    })\n    // console.log(`for line # ${i}, have frets: [ ${frets.join(', ')} ]`)\n\n    let maxfretlen = 0\n    for (var j = 0; j < frets.length; j++) {\n      let fstring = '-'\n      if (frets[j] !== null && frets[j] !== undefined)\n        fstring = `${frets[j]}`\n      frets[j] = fstring\n      if (maxfretlen < fstring.length)\n        maxfretlen = fstring.length\n    }\n    // console.log(`after stringing, have frets: [ ${frets.join(', ')} ]`)\n\n    const fretstring = frets.\n          map(s => `${'-'.repeat(maxfretlen - s.length)}${s}`).\n          map(s => `${s}-`)\n    // console.log(`fretstring = [ ${fretstring.join(', ')} ]`)\n    for (var j = 0; j < fretstring.length; j++) {\n      staff[j] += fretstring[j]\n    }\n\n    if (staff[0].length >= stafflength) {\n      staff = newStaff()\n      result.push(staff)\n    }\n  }\n  return result\n}\n\n\nmodule.exports = { Scribe }\n","import { Application } from './js/app.js'\nimport { ApplicationController } from './js/appcontroller.js'\nimport { Tabselector } from './js/tabselector.js'\nimport { Scribe } from './js/scribe.js'\nimport { VextabScribe } from './js/vextabscribe.js'\nimport { Fretboard } from '@moonwave99/fretboard.js'\n\n// All functions have \"window.\" due to hint:\n// https://stackoverflow.com/questions/57602686/\n//   javascript-function-wont-trigger-when-called-in-html-file-during-parcel-build\n\n\nwindow.onloadBody = function() {\n  // In prod, hide dev tools.\n  // there is probably a much better way to do this,\n  // but this is fine for now.\n  if (process.env.NODE_ENV === 'development') {\n    const el = document.getElementById('devControls')\n    if (el) {\n      el.style.display = 'block';\n    }\n  }\n  window.openTab('btnVextab', 'finalvextab')\n\n  window.app = new Application({})\n  window.appcontroller = new ApplicationController(window.app)\n}\n\n\nconst enableButtons = function(hsh) {\n  const es = Object.entries(hsh)\n  for (var i = 0; i < es.length; i++) {\n    const e = es[i]\n    document.getElementById(e[0]).disabled = !e[1]\n  }\n}\n\n\n/** Build app config from UI settings. */\nwindow.getConfig = function() {\n  const opt = function(name, defaultVal) {\n    return document.getElementById(name).value || defaultVal\n  }\n\n  let v = ''\n  const tabkey = opt('tabkey', '')\n  const tabtime = opt('tabtime', '')\n  if (tabkey !== '')\n    v += `key=${tabkey}`\n  if (tabtime !== '')\n    v += ` time=${tabtime}`\n\n  return {\n    min: opt('minFret', 0),\n    max: opt('maxFret', 0),\n    vextabopts: v\n  }\n}\n\n/** Mic slider. */\nwindow.updateMicSensitivity = function(s) {\n  document.getElementById(\"micsensitivity\").value = s.value\n  window.appcontroller.sensitivity = s.value\n  window.appcontroller.start()\n}\n\n\nfunction setUserInstructions(html) {\n  const e = document.getElementById(\"userInstructions\")\n  e.innerHTML = html\n}\n\n/** Start the application */\nwindow.startRecord = function() {\n  const i = \"<p>When done recording, click 'Stop'.</p>\"\n  setUserInstructions(i)\n\n  const opts = window.getConfig()\n  window.app.configure(opts)\n  window.appcontroller.configure(opts)\n  window.appcontroller.startRecording()\n  enableButtons({ btnStart: false, btnStop: true, btnFreeze: false })\n}\n\nwindow.printRecord = function() {\n  let ts = tabselector || { currNote: '(not editing)' }\n  const output = [\n    `VEXTAB: ${window.app.vextab()}`,\n    `APP CURSOR: ${window.app.cursor}`,\n    `TABSEL CURSOR: ${ts.currNote}`,\n    `LINE:<br /><pre>${JSON.stringify(window.app.line, null, 2)}</pre>`,\n  ]\n  const display = document.getElementById('recorded')\n  display.innerHTML = '<br />' + output.join(\"<hr />\")\n}\n\n/** Hack helper during dev, add a random frequency. */\nwindow.addRandom = function() {\n  var count = window. prompt(\"Number of notes to add:\", 5)\n  count = parseInt(count, 10)\n  startRecord()\n  for (var i = 0; i < count; i++) {\n    const freq = Math.floor(Math.random() * 200) + 200\n    const n = window.app.buildNote(freq)\n    window.appcontroller.addNote(n)\n  }\n}\n\n/** Stop the application and scrolling */\nwindow.stopRecord = function() {\n  const i = \"<p>You can edit the tab using the keyboard (see Editing).  When done editing, click 'Done'.</p>\"\n  setUserInstructions(i)\n\n  window.appcontroller.stop()\n  enableButtons({ btnStop: false, btnFreeze: true })\n}\n\n\nwindow.stopEditing = function() {\n  const i = \"<p>Your tab is below.  Thanks for using Tabbyhack!</p>\"\n  setUserInstructions(i)\n\n  window.appcontroller.stopEditing()\n  window.renderTab()\n  const e = document.getElementById(\"tabOutputDiv\")\n  e.style.display = 'block'\n  e.scrollIntoView()\n}\n\n/** Toggle tabs.\n * ref https://www.w3schools.com/howto/howto_js_tabs.asp\n */\nwindow.openTab = function(btnName, tabName) {\n  // Get all elements with class=\"tabcontent\" and hide them\n  var tabcontent = document.getElementsByClassName(\"tabcontent\");\n  for (var i = 0; i < tabcontent.length; i++) {\n    tabcontent[i].style.display = \"none\";\n  }\n\n  // Get all elements with class=\"tablinks\" and remove the class \"active\"\n  var tablinks = document.getElementsByClassName(\"tablinks\");\n  for (var i = 0; i < tablinks.length; i++) {\n    tablinks[i].className = tablinks[i].className.replace(\" active\", \"\");\n  }\n\n  // Show the current tab, and add an \"active\" class to the button that opened the tab\n  document.getElementById(tabName).style.display = \"block\";\n  document.getElementById(btnName).className += \" active\";\n}\n\n\n/** Get tab */\nwindow.renderTab = function() {\n  const scribe = new Scribe(window.app.strings.length)\n  const tabout = scribe.tab(window.app.line).\n        map(a => a.join('<br />')).\n        join('<br /><br /><br />')\n  const tabdest = document.getElementById('tabdest')\n  tabdest.innerHTML = tabout\n\n  window.appcontroller.writeVextab()\n  enableButtons({ btnCopy: true })\n}\n\n\nwindow.copyTab = function() {\n  var copyText = document.getElementById(\"tabdest\")\n  var textArea = document.createElement(\"textarea\")\n  textArea.value = copyText.innerHTML.\n    replace(/<br>/g, '\\n').\n    replace(/<br \\/>/g, '\\n')\n  document.body.appendChild(textArea)\n  textArea.select()\n  document.execCommand(\"Copy\")\n  textArea.remove()\n  document.getElementById(\"copied\").style.display = 'inline'\n}\n"]}